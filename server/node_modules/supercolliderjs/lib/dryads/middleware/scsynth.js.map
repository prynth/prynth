{"version":3,"sources":["../../../src/dryads/middleware/scsynth.js"],"names":[],"mappings":";;;;;kBAewB;;;;;;;;;;;;;;;;AAAT,SAAS,QAAT,CAAkB,QAAlB,EAA4B;AACzC,MAAI,WAAW,EAAX,CADqC;AAEzC,WAAS,OAAT,CAAiB,UAAC,cAAD,EAAoB;AACnC,QAAI,UAAU,eAAe,OAAf,CADqB;AAEnC,QAAI,UAAU,eAAe,OAAf,CAFqB;;AAInC,QAAI,QAAQ,OAAR,EAAiB;AACnB,UAAI,QAAQ,OAAR,CAAgB,GAAhB,EAAqB;AACvB,YAAI,IAAI,QAAQ,OAAR,CAAgB,GAAhB,CAAoB,OAApB,CAAJ;;AADmB,eAGvB,CAAQ,OAAR,CAAgB,IAAhB,CAAqB,MAArB,CAA4B,IAA5B,EAAkC,CAAC,CAAD,CAAlC,EAHuB;OAAzB;AAKA,UAAI,QAAQ,OAAR,CAAgB,MAAhB,EAAwB;AAC1B,YAAI,IAAI,QAAQ,OAAR,CAAgB,MAAhB,CAAuB,OAAvB,CAAJ,CADsB;AAE1B,gBAAQ,OAAR,CAAgB,IAAhB,CAAqB,MAArB,CAA4B,EAAE,IAAF,EAAQ,EAAE,OAAF,CAApC,CAF0B;OAA5B;AAIA,UAAI,QAAQ,OAAR,CAAgB,eAAhB,EAAiC;AACnC,YAAI,IAAI,QAAQ,OAAR,CAAgB,eAAhB,CAAgC,OAAhC,CAAJ,CAD+B;AAEnC,iBAAS,IAAT,CAAc,QAAQ,OAAR,CAAgB,eAAhB,CAAgC,CAAhC,CAAd,EAFmC;OAArC;KAVF;GAJe,CAAjB,CAFyC;AAsBzC,SAAO,QAAQ,GAAR,CAAY,QAAZ,CAAP,CAtByC;CAA5B","file":"scsynth.js","sourcesContent":["\n/**\n * Send OSC to scsynth\n *\n * Command may have one of these three forms:\n *\n * msg: Array\n *\n * bundle: {\n *   time: null|Number|Array|Date\n *   packets: Array\n * }\n *\n * callAndResponse: {call: response: }\n */\nexport default function scserver(commands) {\n  let promises = [];\n  commands.forEach((commandContext) => {\n    let command = commandContext.command;\n    let context = commandContext.context;\n\n    if (command.scsynth) {\n      if (command.scsynth.msg) {\n        let m = command.scsynth.msg(context);\n        // context.scsynth.send.msg(m);\n        context.scsynth.send.bundle(0.03, [m]);\n      }\n      if (command.scsynth.bundle) {\n        let b = command.scsynth.bundle(context);\n        context.scsynth.send.bundle(b.time, b.packets);\n      }\n      if (command.scsynth.callAndResponse) {\n        let c = command.scsynth.callAndResponse(context);\n        promises.push(context.scsynth.callAndResponse(c));\n      }\n    }\n  });\n  return Promise.all(promises);\n};\n"]}