{"version":3,"sources":["../../../src/server/dryads/Group.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;IAMa,KAAK,WAAL,KAAK;YAAL,KAAK;;AAEhB,WAFW,KAAK,GAES;QAAb,QAAQ,yDAAC,EAAE;;0BAFZ,KAAK;;kEAAL,KAAK,aAGR,EAAE,EAAE,QAAQ;GACnB;;eAJU,KAAK;;0BAMV,OAAO,EAAE;AACb,UAAM,MAAM,GAAG,iBAXX,UAAU,EAWY,OAAO,CAAC,CAAC;AACnC,aAAO;AACL,WAAG,EAAE;AACH,iBAAO,EAAE,SAfC,QAAQ,EAeA,MAAM,EAAE,KAfN,UAAU,CAeO,IAAI,EAAE,OAAO,CAAC,KAAK,CAAC;SAC1D;AACD,aAAK,EAAE;AACL,gBAAM,EAAE,MAAM;SACf;AACD,iBAAS,EAAE;iBAAM,iBAlBf,UAAU,EAkBgB,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,EAAE,EAAE,MAAM,CAAC;SAAA;OAChE,CAAC;KACH;;;4BAEO,OAAO,EAAE,KAAK,EAAE;AACtB,aAAO;AACL,WAAG,EAAE;AACH,iBAAO,EAAE,SA3BT,QAAQ,EA2BU,KAAK,CAAC,MAAM,CAAC;SAChC;AACD,iBAAS,EAAE;iBAAM,iBA3BH,WAAW,EA2BI,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,EAAE,EAAE,KAAK,CAAC,MAAM,CAAC;SAAA;OACvE,CAAC;KACH;;;SA1BU,KAAK;WANV,KAAK","file":"Group.js","sourcesContent":["import {Dryad} from '../../dryadic/Dryad';\nimport {nodeFree, groupNew, AddActions} from '../osc/msg.js';\nimport {nextNodeID} from './internals/side-effects';\nimport {whenNodeGo, whenNodeEnd} from './node-watcher';\n\n\nexport class Group extends Dryad {\n\n  constructor(children=[]) {\n    super({}, children);\n  }\n\n  mount(context) {\n    const nodeID = nextNodeID(context);\n    return {\n      osc: {\n        scsynth: groupNew(nodeID, AddActions.TAIL, context.group)\n      },\n      state: {\n        nodeID: nodeID\n      },\n      completed: () => whenNodeGo(context.server, context.id, nodeID)\n    };\n  }\n\n  unmount(context, state) {\n    return {\n      osc: {\n        scsynth: nodeFree(state.nodeID)\n      },\n      completed: () => whenNodeEnd(context.server, context.id, state.nodeID)\n    };\n  }\n}\n"]}