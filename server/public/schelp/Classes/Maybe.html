<!doctype html><html lang='en'><head><title>Maybe | SuperCollider 3.11.2 Help</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../codemirror.css' type='text/css' />
<link rel='stylesheet' href='./../editor.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../lib/jquery.min.js'></script>
<script src='./../lib/codemirror-5.39.2.min.js' type='text/javascript'></script>
<script src='./../lib/codemirror-addon-simple-5.39.2.min.js' type='text/javascript'></script>
<script>
var helpRoot = './..';
var scdoc_title = 'Maybe';
var scdoc_sc_version = '3.11.2';
</script>
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='qrc:///qtwebchannel/qwebchannel.js' type='text/javascript'></script>
</head>
<body onload='fixTOC()'>
<div id='toc'>
<div id='toctitle'>Maybe:</div>
<span class='toc_search'>Filter: <input id='toc_search'></span><ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
<li class='toc2'><a href='#Undocumented%20class%20methods'>Undocumented class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*callFunc'>callFunc</a> </li>
<li class='toc3'><a href='#*callers'>callers</a> </li>
<li class='toc3'><a href='#*current'>current</a> </li>
<li class='toc3'><a href='#*defaultValue'>defaultValue</a> </li>
<li class='toc3'><a href='#*protected'>protected</a> </li>
<li class='toc3'><a href='#*verbose'>verbose</a> </li>
</ul></ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-source'>source</a> </li>
<li class='toc3'><a href='#-value'>value</a> </li>
<li class='toc3'><a href='#-apply'>apply</a> </li>
<li class='toc3'><a href='#-doesNotUnderstand'>doesNotUnderstand</a> </li>
<li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
<li class='toc2'><a href='#Undocumented%20instance%20methods'>Undocumented instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-<>'>&lt;&gt;</a> </li>
<li class='toc3'><a href='#-add'>add</a> </li>
<li class='toc3'><a href='#-addAll'>addAll</a> </li>
<li class='toc3'><a href='#-all'>all</a> </li>
<li class='toc3'><a href='#-at'>at</a> </li>
<li class='toc3'><a href='#-atAll'>atAll</a> </li>
<li class='toc3'><a href='#-catchRecursion'>catchRecursion</a> </li>
<li class='toc3'><a href='#-clear'>clear</a> </li>
<li class='toc3'><a href='#-composeBinaryOp'>composeBinaryOp</a> </li>
<li class='toc3'><a href='#-composeNAryOp'>composeNAryOp</a> </li>
<li class='toc3'><a href='#-composeUnaryOp'>composeUnaryOp</a> </li>
<li class='toc3'><a href='#-do'>do</a> </li>
<li class='toc3'><a href='#-embedInStream'>embedInStream</a> </li>
<li class='toc3'><a href='#-findKey'>findKey</a> </li>
<li class='toc3'><a href='#-functionPerformList'>functionPerformList</a> </li>
<li class='toc3'><a href='#-includedInCallers'>includedInCallers</a> </li>
<li class='toc3'><a href='#-infoString'>infoString</a> </li>
<li class='toc3'><a href='#-o'>o</a> </li>
<li class='toc3'><a href='#-postString'>postString</a> </li>
<li class='toc3'><a href='#-put'>put</a> </li>
<li class='toc3'><a href='#-putAll'>putAll</a> </li>
<li class='toc3'><a href='#-reduceFuncProxy'>reduceFuncProxy</a> </li>
<li class='toc3'><a href='#-reverseComposeBinaryOp'>reverseComposeBinaryOp</a> </li>
<li class='toc3'><a href='#-valueArray'>valueArray</a> </li>
<li class='toc3'><a href='#-valueArrayEnvir'>valueArrayEnvir</a> </li>
<li class='toc3'><a href='#-valueEnvir'>valueEnvir</a> </li>
<li class='toc3'><a href='#-valueFuncProxy'>valueFuncProxy</a> </li>
</ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><div id='menubar'></div>
<div class='contents'>
<div class='header'>
<div id='label'>
<span id='folder'>Classes</span>
 | <span id='categories'><a href='./../Browse.html#JITLib'>JITLib</a>&#8201;&gt;&#8201;<a href='./../Browse.html#JITLib>Environments'>Environments</a> | <a href='./../Browse.html#Live Coding'>Live Coding</a></span>
</div><h1>Maybe<span id='superclasses'> : <a href="../Classes/Ref.html">Ref</a> : <a href="../Classes/AbstractFunction.html">AbstractFunction</a> : <a href="../Classes/Object.html">Object</a></span>
</h1>
<div id='summary'>referentially transparent proxy object</div>
</div>
<div class='subheader'>
<div id='filename'>Source: <a href='file:///usr/share/SuperCollider/SCClassLibrary/JITLib/Patterns/Fdef.sc' title='/usr/share/SuperCollider/SCClassLibrary/JITLib/Patterns/Fdef.sc'>Fdef.sc</a></div><div id='subclasses'>Subclasses: <a href="../Classes/Fdef.html">Fdef</a></div>
<div id='related'>See also: <a href="./../Classes/Fdef.html">Fdef</a>, <a href="./../Overviews/JITLib.html">JITLib</a></div>
</div>
<h2><a class='anchor' name='description'>Description</a></h2>

<p>A Maybe object can contain either nil or some other object, and allows to construct calculations without knowing this other object yet. If the calculation fails, due to a loop or a not yet defined object, Maybe returns nil.
<p>The name <strong>Maybe</strong> stems from the programming language Haskell, where it represents a somewhat similar entity. See also: <a href="./../Classes/Fdef.html">Fdef</a><div class='note'><span class='notelabel'>NOTE:</span> A Maybe object lazily constructs an operation as an object instead of performing it immediately. Its implementation remains incomplete necessarily, in the current form: it is limited to the arithmetic operations that AbstractFunction implements and the following collection methods: <code>put, addAll, add, putAll, atAll</code>.
<p>You can extend Maybe as you need for your purpose, by the following schema:<textarea class='editor'>// replace "myMethod" with your method name
+ Maybe {
    myMethod { |...args|
        ^this.composeNAryOp(\myMethod, args)
    }
}</textarea>
</div><h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>Maybe.</span><a class='method-name' name='*new' href='./../Overviews/Methods.html#new'>new</a>(<span class='argstr'>thing</span>)</h3>
<div class='supmethod'>From superclass: <a href='./../Classes/Ref.html'>Ref</a></div>
<div class='method'>
<p>create a new instance<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>thing<td class='argumentdesc'>
<p>an object or nil.<textarea class='editor'>a = Maybe.new;
b = Maybe(a + 6);
b.value; // =&gt; nil
a.value = 1;
b.value; // =&gt; 7</textarea>
</table></div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h3><a class='anchor' name='Undocumented%20class%20methods'>Undocumented class methods</a></h3>
<h3 class='method-code'><span class='method-prefix'>Maybe.</span><a class='method-name' name='*callFunc' href='./../Overviews/Methods.html#callFunc'>callFunc</a></h3>
<h3 class='method-code'><span class='method-prefix'>Maybe.</span><a class='method-name' name='*callFunc' href='./../Overviews/Methods.html#callFunc'>callFunc</a> = value</h3>
<h3 class='method-code'><span class='method-prefix'>Maybe.</span><a class='method-name' name='*callers' href='./../Overviews/Methods.html#callers'>callers</a></h3>
<h3 class='method-code'><span class='method-prefix'>Maybe.</span><a class='method-name' name='*current' href='./../Overviews/Methods.html#current'>current</a></h3>
<h3 class='method-code'><span class='method-prefix'>Maybe.</span><a class='method-name' name='*defaultValue' href='./../Overviews/Methods.html#defaultValue'>defaultValue</a></h3>
<h3 class='method-code'><span class='method-prefix'>Maybe.</span><a class='method-name' name='*defaultValue' href='./../Overviews/Methods.html#defaultValue'>defaultValue</a> = value</h3>
<h3 class='method-code'><span class='method-prefix'>Maybe.</span><a class='method-name' name='*protected' href='./../Overviews/Methods.html#protected'>protected</a></h3>
<h3 class='method-code'><span class='method-prefix'>Maybe.</span><a class='method-name' name='*protected' href='./../Overviews/Methods.html#protected'>protected</a> = value</h3>
<h3 class='method-code'><span class='method-prefix'>Maybe.</span><a class='method-name' name='*verbose' href='./../Overviews/Methods.html#verbose'>verbose</a></h3>
<h3 class='method-code'><span class='method-prefix'>Maybe.</span><a class='method-name' name='*verbose' href='./../Overviews/Methods.html#verbose'>verbose</a> = value</h3>
<h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-source' href='./../Overviews/Methods.html#source'>source</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-source' href='./../Overviews/Methods.html#source'>source</a> = <span class='argstr'>obj</span></h3>
<div class='method'>
<p>return or set the contained object</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-value' href='./../Overviews/Methods.html#value'>value</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-value' href='./../Overviews/Methods.html#value'>value</a> = value</h3>
<div class='method'>
<p>set the contained object or return the source, or the value of the contained object, if it is a Maybe. If there is a recursion, return nil.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-apply' href='./../Overviews/Methods.html#apply'>apply</a>( <span class='argstr'>... args</span>)</h3>
<div class='method'>
<p>return the value, or the value of the contained object, if it is a Maybe. This method allows recursion, so that recursive calculations can be made.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-doesNotUnderstand' href='./../Overviews/Methods.html#doesNotUnderstand'>doesNotUnderstand</a>(<span class='argstr'>selector</span> <span class='argstr'>... args</span>)</h3>
<div class='method'>
<p>(called by any message that Maybe doesn't understand.)
<p>returns a composition function that, when evaluated, returns the value.<textarea class='editor'>a = Maybe.new;
a.respondsTo(\flop) // false: Maybe constructs a placeholder instead
b = Maybe(a.flop);
b.value; // =&gt; nil
a.value = [1, 2, [2, 3]];
b.value;    // =&gt; [ [ 1, 2, 2 ], [ 1, 2, 3 ] ]</textarea>
</div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h3><a class='anchor' name='Undocumented%20instance%20methods'>Undocumented instance methods</a></h3>
<h3 class='method-code'><span class='method-prefix'></span><a class='method-name' name='-<>' href='./../Overviews/Methods.html#&lt;&gt;'>&lt;&gt;</a>(<span class='argstr'>that</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-add' href='./../Overviews/Methods.html#add'>add</a>( <span class='argstr'>... args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-addAll' href='./../Overviews/Methods.html#addAll'>addAll</a>( <span class='argstr'>... args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-all' href='./../Overviews/Methods.html#all'>all</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-at' href='./../Overviews/Methods.html#at'>at</a>( <span class='argstr'>... args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-atAll' href='./../Overviews/Methods.html#atAll'>atAll</a>( <span class='argstr'>... args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-catchRecursion' href='./../Overviews/Methods.html#catchRecursion'>catchRecursion</a>(<span class='argstr'>func</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-clear' href='./../Overviews/Methods.html#clear'>clear</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-composeBinaryOp' href='./../Overviews/Methods.html#composeBinaryOp'>composeBinaryOp</a>(<span class='argstr'>aSelector</span>, <span class='argstr'>something</span>, <span class='argstr'>adverb</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-composeNAryOp' href='./../Overviews/Methods.html#composeNAryOp'>composeNAryOp</a>(<span class='argstr'>aSelector</span>, <span class='argstr'>anArgList</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-composeUnaryOp' href='./../Overviews/Methods.html#composeUnaryOp'>composeUnaryOp</a>(<span class='argstr'>aSelector</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-do' href='./../Overviews/Methods.html#do'>do</a>(<span class='argstr'>function</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-embedInStream' href='./../Overviews/Methods.html#embedInStream'>embedInStream</a>(<span class='argstr'>inval</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-findKey' href='./../Overviews/Methods.html#findKey'>findKey</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-functionPerformList' href='./../Overviews/Methods.html#functionPerformList'>functionPerformList</a>(<span class='argstr'>selector</span>, <span class='argstr'>arglist</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-includedInCallers' href='./../Overviews/Methods.html#includedInCallers'>includedInCallers</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-infoString' href='./../Overviews/Methods.html#infoString'>infoString</a>(<span class='argstr'>args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-o' href='./../Overviews/Methods.html#o'>o</a>( <span class='argstr'>... args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-postString' href='./../Overviews/Methods.html#postString'>postString</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-put' href='./../Overviews/Methods.html#put'>put</a>( <span class='argstr'>... args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-putAll' href='./../Overviews/Methods.html#putAll'>putAll</a>( <span class='argstr'>... args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-reduceFuncProxy' href='./../Overviews/Methods.html#reduceFuncProxy'>reduceFuncProxy</a>(<span class='argstr'>args</span>, <span class='argstr'>protect: true</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-reverseComposeBinaryOp' href='./../Overviews/Methods.html#reverseComposeBinaryOp'>reverseComposeBinaryOp</a>(<span class='argstr'>aSelector</span>, <span class='argstr'>something</span>, <span class='argstr'>adverb</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-valueArray' href='./../Overviews/Methods.html#valueArray'>valueArray</a>(<span class='argstr'>args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-valueArrayEnvir' href='./../Overviews/Methods.html#valueArrayEnvir'>valueArrayEnvir</a>( <span class='argstr'>... args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-valueEnvir' href='./../Overviews/Methods.html#valueEnvir'>valueEnvir</a>( <span class='argstr'>... args</span>)</h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-valueFuncProxy' href='./../Overviews/Methods.html#valueFuncProxy'>valueFuncProxy</a>(<span class='argstr'>args</span>)</h3>
<h2><a class='anchor' name='examples'>Examples</a></h2>
<textarea class='editor'>// the following examples use a LazyEnvir with a Maybe as a proxy class.
// instead of writing a = Maybe.new; a.value = something;
// one can simply write ~a = something.
// the Maybe is implicitly created for you.

(
    p.pop.clear;
    p = LazyEnvir.new;
    p.proxyClass = Maybe;
    p.linkDoc; // here: connect to current doc only.
);


// sets
~a = Set[0, 4, 5, 7];
~b = Set[4, 5];
~c = ~a union: ~b; // union of the two sets (note that the shortcut | does not work here.).
~d = ~a sect: ~b; // intersection of a and b
~c.postcs;""; // post the whole construction
~d.postcs;"";
~c.value; // Set[ 4, 0, 5, 7 ]
~d.value; // Set[ 4, 5 ]
~b = Set[4, 5, 13, 0];
~c.value;
~d.value; // Set[ 4, 0, 5 ]
~b.source.add(~w); // add another placeholder
~c.value; // it is part of the union.
~d.value; // but not part of the intersection


// envirs
~a = (note: [1, 2]);
~b = (dur: 1);
~c = ~a.putAll(~b) // provisionally put everything into the placholder
~c.value;
~a = (note: [1, 2, 4]);
~c.value;
~d = ~a.at(\note);
~d.value;
~a = (note: [7.5]);
~d.value; // [7.5]

// patterns
~a = Pseq([1, 2, 3]);
~b = Pseq([5, ~a, ~a + 10], inf);
~b.value.asStream.nextN(10);


~a = Prand([100, 200]);
~b.value.asStream.nextN(10);


// to do : flop!

//////////////// deep recursion

// with normal functions:
f = { |x| if(x &lt;= 1) { 1 } { x * f.(x - 1) } };
f.(12)


~faculty = { |x| if(x == 1) { 1 } { x * ~faculty.(x - 1) } };
~faculty.(12) // doesn't work (=&gt; nil). here we _do_ want recursion ...

// for explicit recursion use "apply"
~faculty = { |x| if(x == 1) { 1 } { x * ~faculty.apply(x - 1) } };
~faculty.(12)

/*// safety (not yet implemented)
Maybe.maxDepth = 1e2; // higher depth is risky..
~faculty = { |x| x * ~faculty.apply(x - 1) }; // infinite recursion
~faculty.(12)

Maybe.maxDepth = nil; // unsafe again.*/


//////////////// recursion prevention tests

~b = ~a;
~a = ~b;
~a.value; // =&gt; nil


~a = ~b;
~b = ~c;
~c = ~a;
~a.value; // =&gt; nil

~a = ~b + ~c;
~c = ~a;
~a.value; // =&gt; nil


~a = ~b;
~b = 19;
~a.value; // =&gt; 19
~b.value; // =&gt; 19

// function evaluation and argument passing

~a = { |x| x + 2 };
~a.value; // =&gt; nil

~a.value(~c); // =&gt; nil
~b = 2000;
~a.value(~b); // =&gt; 2002
~x = [600, 1000];

(~a + 1).value(~b); // 2003
(~a + 1).value(~x); // [ 603, 1003 ]
(~a + 1).value({ 8 }); // binary op func.
(~a + 1).value({ 5 + 3 }).value // 11

~a = { |x| x + 2 + ~b };
~a.value(8); // 2010

~c = nil;
~a = { |x| x + 2 + ~c }; // ~c is undefined.
~a.value(8); // =&gt; nil

~c = 100; // define ~c

~a.value(8); // now returns a value.

~c = ~b; // now recursion?
~b = ~a;
~a.value(8); // caught recursion =&gt; nil

~c = { 100.rand }; // ~c is a function

~a.value(8);
~a.value(8);

~c = { ~a + ~b };
~a.value(8);    // ~c is a recursion with ~a =&gt; nil


// function composition
~a = {|x| x + 1 };
~v = ~a &lt;&gt; ~a &lt;&gt; ~a; // same as: { ~a.(~a.(~a)) }
~v.value(0); // =&gt; 3

~a = {|x| x + 2 };
~v.value(0); // transparent. =&gt; 6

// {|x| x }.valueEnvir // doesn't work with current implementation of Function:valueEnvir


// calculations with functions:
~c = 0;
~a = { |ff| { ff = ff + 1; ~c + ff + 2 + ~c } };
~x = ~a.value(8);
~x.value; // return 11, 12, 13...
~x.value;
~x.value;
~c = 100;
~x.value; // return 214, 215 ...
~x.value;

// binary op functions:
~c = 0;
~a = { |ff| { [600, 800] } + { ff + 2 + ~c } };

~x = ~a.value(8);
~x.value; // return [ 610, 810 ]

~c = { [10, -10].rand };
~x.value; // return random between [ 610..620, 800..810 ]</textarea>

<p><div class='doclink'>helpfile source: <a href='file:///usr/share/SuperCollider/HelpSource/Classes/Maybe.schelp'>/usr/share/SuperCollider/HelpSource/Classes/Maybe.schelp</a><br>link::Classes/Maybe::<br></div></div><script src='./../editor.js' type='text/javascript'></script>
</body></html>