<html><head><title>VBAPSpeakerArray</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES (extension)</div>
<div id='categories'><a href='./../Browse.html#UGens>Multichannel>Panners'>UGens>Multichannel>Panners</a></div>
<h1>VBAPSpeakerArray</h1>
<div id='summary'>Vector Base Amplitude Panning Speaker Array</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /usr/local/share/SuperCollider/Extensions/SC3plugins/VBAPUGens/<a href='file:///usr/local/share/SuperCollider/Extensions/SC3plugins/VBAPUGens/vbap.sc'>vbap.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
<div id='related'>See also: <a href="./../Classes/VBAP.html">VBAP</a>, <a href="./../Classes/CircleRamp.html">CircleRamp</a>, <a href="./../Classes/VBAPSpeaker.html">VBAPSpeaker</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc3'><a href='#*maxNumSpeakers'>maxNumSpeakers</a> </li>
<li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-dim'>dim</a> </li>
<li class='toc3'><a href='#-numSpeakers'>numSpeakers</a> </li>
<li class='toc3'><a href='#-speakers'>speakers</a> </li>
<li class='toc3'><a href='#-getSetsAndMatrices'>getSetsAndMatrices</a> </li>
<li class='toc3'><a href='#-loadToBuffer'>loadToBuffer</a> </li>
<li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
<li class='toc2'><a href='#Undocumented instance methods'>Undocumented instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-anglesToCartesian'>anglesToCartesian</a> </li>
<li class='toc3'><a href='#-any_ls_inside_triplet'>any_ls_inside_triplet</a> </li>
<li class='toc3'><a href='#-calc_2D_inv_tmatrix'>calc_2D_inv_tmatrix</a> </li>
<li class='toc3'><a href='#-calculate_3x3_matrixes'>calculate_3x3_matrixes</a> </li>
<li class='toc3'><a href='#-choose_ls_triplets'>choose_ls_triplets</a> </li>
<li class='toc3'><a href='#-choose_ls_tuplets'>choose_ls_tuplets</a> </li>
<li class='toc3'><a href='#-initFromDirections'>initFromDirections</a> </li>
<li class='toc3'><a href='#-lines_intersect'>lines_intersect</a> </li>
<li class='toc3'><a href='#-sort_2D_lss'>sort_2D_lss</a> </li>
<li class='toc3'><a href='#-unq_cross_prod'>unq_cross_prod</a> </li>
<li class='toc3'><a href='#-vec_angle'>vec_angle</a> </li>
<li class='toc3'><a href='#-vec_length'>vec_length</a> </li>
<li class='toc3'><a href='#-vec_prod'>vec_prod</a> </li>
<li class='toc3'><a href='#-vol_p_side_lgth'>vol_p_side_lgth</a> </li>
</ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>VBAPSpeakerArray represents an array of speakers configured for use with VBAP. It provides functions for calculating optimised pairs and triplets based on speaker location.
<p>VBAP was created by Ville Pulkki. For more information on VBAP see <a href="http://www.acoustics.hut.fi/research/cat/vbap/">http://www.acoustics.hut.fi/research/cat/vbap/</a>
<p>This version of VBAP for SC was ported from the ver. 0.99 PD code by Scott Wilson, as part of the BEASTMulch project. Development was partially funded by the Arts and Humanities Research Council: <a href="http://www.ahrc.ac.uk">http://www.ahrc.ac.uk</a><h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>dim</span>, <span class='argstr'>directions</span>)</h3>
<div class='method'>
<p>Create a new VBAPSpeakerArray.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>dim<td class='argumentdesc'>
<p>Number of dimensions in the array, either 2 (ring or partial ring), or 3 (partial or full dome or sphere).<tr><td class='argumentname'>directions<td class='argumentdesc'>
<p>An <a href="./../Classes/Array.html">Array</a> containing speaker locations in degrees. If dim is 2 this will be an array of azimuth angles, if dim is 3 this will be an array of arrays of [azimuth, elevation] angle pairs.
<p>Angles are given in degrees, with azimuth +/- 180 degrees from the median plane (i.e. straight ahead), and elevation +/- 90 degrees from the azimuth plane.
<p>The order of the speakers corresponds to the order of the outputs when using a VBAP UGen.</table><h4>Discussion:</h4>

<p>2D and 3D examples<pre class='code prettyprint lang-sc'>VBAPSpeakerArray.new(2, [ -30, 30, 0, -110, 110 ]); // 5.1 array

VBAPSpeakerArray.new(3, [[-22.5, 14.97], [22.5, 14.97], [-67.5, 14.97], [67.5, 14.97], [-112.5, 14.97], [112.5, 14.97], [-157.5, 14.97], [157.5, 14.97], [-45, 0], [45, 0], [-90, 0], [90, 0], [-135, 0], [135, 0], [0, 0], [180, 0]]); // zig zag partial dome</pre>
</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*maxNumSpeakers' href='./../Overviews/Methods.html#maxNumSpeakers'>maxNumSpeakers</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*maxNumSpeakers' href='./../Overviews/Methods.html#maxNumSpeakers'>maxNumSpeakers</a> = value</h3>
<div class='method'>
<p>Set/get the maximum number of speakers in an array. Default is 55. (This limitation will be removed in a later version.)</div><h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-dim' href='./../Overviews/Methods.html#dim'>dim</a> </h3>
<div class='method'>
<p>Returns an <a href="./../Classes/Integer.html">Integer</a> corresponding to the receiver's number of dimensions.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-numSpeakers' href='./../Overviews/Methods.html#numSpeakers'>numSpeakers</a> </h3>
<div class='method'>
<p>Returns an <a href="./../Classes/Integer.html">Integer</a> indicating the number of speakers in this array.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-speakers' href='./../Overviews/Methods.html#speakers'>speakers</a> </h3>
<div class='method'>
<p>Returns an <a href="./../Classes/Array.html">Array</a> containing instances of <a href="./../Classes/VBAPSpeaker.html">VBAPSpeaker</a>.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-getSetsAndMatrices' href='./../Overviews/Methods.html#getSetsAndMatrices'>getSetsAndMatrices</a> </h3>
<div class='method'>
<p>Sort the speaker array into loudspeaker pairs or triplets and return this data in a form appropriate for loading into a buffer. Once loaded this data can be used by a <a href="./../Classes/VBAP.html">VBAP</a> UGen.<h4>Discussion:</h4>
<pre class='code prettyprint lang-sc'>a = VBAPSpeakerArray.new(2, [0, 45, 90, 135, 180, -135, -90, -45]); // 8 channel ring
b = Buffer.loadCollection(s, a.getSetsAndMatrices);</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-loadToBuffer' href='./../Overviews/Methods.html#loadToBuffer'>loadToBuffer</a> (<span class='argstr'>server</span>)</h3>
<div class='method'>
<p>A shortcut for calling getSetsAndMatrices and loading into a Buffer. Returns a <a href="./../Classes/Buffer.html">Buffer</a> object.<h4>Discussion:</h4>
<pre class='code prettyprint lang-sc'>a = VBAPSpeakerArray.new(2, [0, 45, 90, 135, 180, -135, -90, -45]); // 8 channel ring
b = a.loadToBuffer;</pre>
</div><h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h3><a class='anchor' name='Undocumented instance methods'>Undocumented instance methods</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-anglesToCartesian' href='./../Overviews/Methods.html#anglesToCartesian'>anglesToCartesian</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-any_ls_inside_triplet' href='./../Overviews/Methods.html#any_ls_inside_triplet'>any_ls_inside_triplet</a> (<span class='argstr'>a</span>, <span class='argstr'>b</span>, <span class='argstr'>c</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-calc_2D_inv_tmatrix' href='./../Overviews/Methods.html#calc_2D_inv_tmatrix'>calc_2D_inv_tmatrix</a> (<span class='argstr'>azi1</span>, <span class='argstr'>azi2</span>, <span class='argstr'>inv_mat</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-calculate_3x3_matrixes' href='./../Overviews/Methods.html#calculate_3x3_matrixes'>calculate_3x3_matrixes</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-choose_ls_triplets' href='./../Overviews/Methods.html#choose_ls_triplets'>choose_ls_triplets</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-choose_ls_tuplets' href='./../Overviews/Methods.html#choose_ls_tuplets'>choose_ls_tuplets</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-initFromDirections' href='./../Overviews/Methods.html#initFromDirections'>initFromDirections</a> (<span class='argstr'>directions</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-lines_intersect' href='./../Overviews/Methods.html#lines_intersect'>lines_intersect</a> (<span class='argstr'>i</span>, <span class='argstr'>j</span>, <span class='argstr'>k</span>, <span class='argstr'>l</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-sort_2D_lss' href='./../Overviews/Methods.html#sort_2D_lss'>sort_2D_lss</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-unq_cross_prod' href='./../Overviews/Methods.html#unq_cross_prod'>unq_cross_prod</a> (<span class='argstr'>v1</span>, <span class='argstr'>v2</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-vec_angle' href='./../Overviews/Methods.html#vec_angle'>vec_angle</a> (<span class='argstr'>v1</span>, <span class='argstr'>v2</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-vec_length' href='./../Overviews/Methods.html#vec_length'>vec_length</a> (<span class='argstr'>v1</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-vec_prod' href='./../Overviews/Methods.html#vec_prod'>vec_prod</a> (<span class='argstr'>v1</span>, <span class='argstr'>v2</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-vol_p_side_lgth' href='./../Overviews/Methods.html#vol_p_side_lgth'>vol_p_side_lgth</a> (<span class='argstr'>i</span>, <span class='argstr'>j</span>, <span class='argstr'>k</span>)</h3>
<h2><a class='anchor' name='examples'>Examples</a></h2>

<p>See <a href="./../Classes/VBAP.html">VBAP</a> for further examples.<div class='doclink'>source: <a href='file:///usr/local/share/SuperCollider/Extensions/SC3plugins/VBAPUGens/HelpSource/Classes/VBAPSpeakerArray.schelp'>/usr/local/share/SuperCollider/Extensions/SC3plugins/VBAPUGens/HelpSource/Classes/VBAPSpeakerArray.schelp</a><br>link::Classes/VBAPSpeakerArray::<br>sc version: 3.8dev</div></div></body></html>