<html><head><title>DemandEnvGen</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES</div>
<div id='categories'><a href='./../Browse.html#UGens>Demand'>UGens>Demand</a>, <a href='./../Browse.html#UGens>Envelopes'>UGens>Envelopes</a></div>
<h1>DemandEnvGen</h1>
<div id='summary'>Demand rate envelope generator</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /usr/local/share/SuperCollider/SCClassLibrary/Common/Audio/<a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Common/Audio/Demand.sc'>Demand.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/UGen.html">UGen</a> : <a href="../Classes/AbstractFunction.html">AbstractFunction</a> : <a href="../Classes/Object.html">Object</a></div>
<div id='related'>See also: <a href="./../Classes/Demand.html">Demand</a>, <a href="./../Classes/Duty.html">Duty</a>, <a href="./../Classes/TDuty.html">TDuty</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*ar'>ar</a>  <a href='#*kr'>kr</a> </li>
<li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
<li class='toc2'><a href='#Undocumented instance methods'>Undocumented instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-canFreeSynth'>canFreeSynth</a> </li>
</ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>Plays back break point envelope contours (levels, times, shapes) given by demand ugens. The next values are called when the next node is reached.<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*ar' href='./../Overviews/Methods.html#ar'>ar</a> (<span class='argstr'>level</span>, <span class='argstr'>dur</span>, <span class='argstr'>shape: 1</span>, <span class='argstr'>curve: 0</span>, <span class='argstr'>gate: 1</span>, <span class='argstr'>reset: 1</span>, <span class='argstr'>levelScale: 1</span>, <span class='argstr'>levelBias: 0</span>, <span class='argstr'>timeScale: 1</span>, <span class='argstr'>doneAction: 0</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*kr' href='./../Overviews/Methods.html#kr'>kr</a> (<span class='argstr'>level</span>, <span class='argstr'>dur</span>, <span class='argstr'>shape: 1</span>, <span class='argstr'>curve: 0</span>, <span class='argstr'>gate: 1</span>, <span class='argstr'>reset: 1</span>, <span class='argstr'>levelScale: 1</span>, <span class='argstr'>levelBias: 0</span>, <span class='argstr'>timeScale: 1</span>, <span class='argstr'>doneAction: 0</span>)</h3>
<div class='method'>
<p><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>level<td class='argumentdesc'>
<p>A demand UGen or any other UGen returning level values. If this ends, the
<p><code class='code prettyprint lang-sc'>doneAction</code> is evaluated.<tr><td class='argumentname'>dur<td class='argumentdesc'>
<p>A demand UGen or any other UGen returning time values. If this ends, the
<p><code class='code prettyprint lang-sc'>doneAction</code> is evaluated.<tr><td class='argumentname'>shape<td class='argumentdesc'>
<p>A demand UGen or any other UGen: the number given is the shape number according to <a href="./../Classes/Env.html">Env</a>.<tr><td class='argumentname'>curve<td class='argumentdesc'>
<p>A demand UGen or any other UGen returning curve values. if shape is 5, this is the curve factor.
<p>The possible values are:<table>
<tr><td>0<td>flat segments<tr><td>1<td>linear segments, the default<tr><td>2<td>natural exponential growth and decay. In this case, the levels must all be nonzero and the have the same sign.<tr><td>3<td>sinusoidal S shaped segments.<tr><td>4<td>sinusoidal segments shaped like the sides of a Welch window.<tr><td>a Float<td>a curvature value for all segments.<tr><td>An Array of Floats<td>curvature values for each segments.</table>
<tr><td class='argumentname'>gate<td class='argumentdesc'>
<p>If gate is x â‰¥ 1, the UGen runs.
<p>If gate is 0 &gt; x &gt; 1, the UGen is released at the next level (doneAction).
<p>If gate is x &lt; 0, the UGen is sampled and held.<tr><td class='argumentname'>reset<td class='argumentdesc'>
<p>If reset crosses from non-positive to positive, the UGen is reset at the next level. If it is &gt; 1, it is reset immediately.<tr><td class='argumentname'>levelScale<td class='argumentdesc'>
<p>demand ugen returning level scaling values<tr><td class='argumentname'>levelBias<td class='argumentdesc'>
<p>demand ugen returning level offset values<tr><td class='argumentname'>timeScale<td class='argumentdesc'>
<p>demand ugen returning time scaling values<tr><td class='argumentname'>doneAction<td class='argumentdesc'>
<p>A doneAction that is evaluated when level or duration stream ends. See <a href="./../Reference/UGen-doneActions.html">UGen done-actions</a> for more detail.</table></div><h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h3><a class='anchor' name='Undocumented instance methods'>Undocumented instance methods</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-canFreeSynth' href='./../Overviews/Methods.html#canFreeSynth'>canFreeSynth</a> </h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Common/Audio/canFreeSynth.sc'>/usr/local/share/SuperCollider/SCClassLibrary/Common/Audio/canFreeSynth.sc</a></div>
<h2><a class='anchor' name='examples'>Examples</a></h2>
<pre class='code prettyprint lang-sc'>// frequency envelope with random times
(
    {
        var freq;
        freq = DemandEnvGen.ar(
                Dseq([204, 400, 201, 502, 300, 200], inf),
                Drand([1.01, 0.2, 0.1, 2], inf) * MouseY.kr(0.01, 3, 1),
                7 // cubic interpolation
            );
        SinOsc.ar(freq * [1, 1.01]) * 0.1

    }.play;
)

// frequency modulation
(
    {
        var freq, list;
        list = { exprand(200, 1000.0) } ! 32;
        freq = DemandEnvGen.ar(
                { Dseq(list.scramble, inf) } ! 2,
                SampleDur.ir * MouseY.kr(1, 3000, 1),
                5, // curve interpoaltion
                MouseX.kr(-0.01, -4) // curve must be negative for fast interpol.
            );
        SinOsc.ar(freq) * 0.1

    }.play;
)


//  gate
// mouse x on right side of screen toggles gate
(
    {
        var freq;
        freq = DemandEnvGen.kr(
                Dwhite(300, 1000, inf).round(100),
                0.1,
                5, 0.3, // curve: 0.3
                MouseX.kr &gt; 0.5,
                1
            );
        SinOsc.ar(freq * [1, 1.21]) * 0.1

    }.play;
)

// sample and hold (0.5 &gt; gate &gt; 0)
// mouse x on right side of screen toggles gate
// mouse y scales frequency
(
    {
        var freq;
        freq = DemandEnvGen.kr(
                Dwhite(300, 1000, inf).round(100),
                0.1,
                5, 0.3,
                MouseX.kr &gt; 0.5 + 0.1
            );
        SinOsc.ar(freq * [1, 1.21]) * 0.1

    }.play;
)

// gate
// mouse x on right side of screen toggles gate
// mouse button does soft reset
(
    {
        var freq;
        freq = DemandEnvGen.kr(
                Dseq([Dseries(400, 200, 5), 500, 800, 530, 4000, 900], 2),
                Dseq([0.2, 0.1, 0.2, 0.3, 0.1], inf),
                Dseq([1, 0, 0, 6, 1, 1, 0, 2], inf), // shapes
                0,
                MouseX.kr &gt; 0.5, // gate
                MouseButton.kr &gt; 0.5, // reset
                doneAction:0
            );
        SinOsc.ar(freq * [1, 1.001]) * 0.1

    }.play;
)


//  gate
// mouse x on right side of screen toggles sample and hold
// mouse button does hard reset
(
    {
        var freq;
        freq = DemandEnvGen.kr(
                Dseq([Dseries(400, 200, 5), 500, 800, 530, 4000, 900], 2),
                0.1,
                3, 0,
                MouseX.kr &gt; 0.5 - 0.1, // gate: sample and hold
                MouseButton.kr &gt; 0.5 * 2, // hard reset
                doneAction: 0
            );
        SinOsc.ar(freq * [1, 1.001]) * 0.1

    }.play;
)





// short sequence with doneAction, linear
(
    {
        var freq;
        freq = DemandEnvGen.kr(
                Dseq([1300, 500, 800, 300, 400], 1),
                0.2,
                1,
                doneAction:2
            );
        SinOsc.ar(freq * [1, 1.01]) * 0.1

    }.play;
)

// short sequence with doneAction, step
(
    {
        var freq;
        freq = DemandEnvGen.kr(
                Dseq([1300, 500, 800, 300, 400], 1),
                0.2,
                0,
                doneAction:2
            );
        SinOsc.ar(freq * [1, 1.01]) * 0.1

    }.play;
)



// a linear ramp
(
    {
        var freq;
        freq = DemandEnvGen.kr(
                Dseq([300, 800], 1),
                1,
                1
            );
        SinOsc.ar(freq * [1, 1.01]) * 0.1

    }.play;
)



// random gate:  release. gate low level &gt; 0.
// only end points are kept as release levels
(
    {
        var freq;
        freq = DemandEnvGen.kr(
                Dseq([500, 800], inf),
                0.03,
                1,0, // linear
                ToggleFF.kr(Dust.kr(5)) + 0.1 // gate


            );
        SinOsc.ar(freq * [1, 1.01]) * 0.1

    }.play;
)

// random gate: sample and hold. gate low level = 0.
(
    {
        var freq;
        freq = DemandEnvGen.kr(
                Dseq([500, 800, 600], inf),
                0.03,
                1,0, // linear
                ToggleFF.kr(Dust.kr(5)), // gate
                0 // reset

            );
        SinOsc.ar(freq * [1, 1.01]) * 0.1

    }.play;
)




// lfnoise1
(
    {
            DemandEnvGen.ar(
                Dwhite(-0.1, 0.1, inf),
                SampleDur.ir * MouseY.kr(0.5, 20),
                5,
                -4
            );


    }.play;
)

// lfbrownnoise
(
    {
            DemandEnvGen.ar(
                Dbrown(-0.1, 0.1, 0.1, inf),
                SampleDur.ir * MouseY.kr(1, 100, 1)
            );


    }.play;
)






// hardsyncing a saw
(
    {

            DemandEnvGen.ar(
                Dseq([Dseries(-0.1, 0.01, 20)], inf),
                SampleDur.ir * MouseY.kr(1, 100, 1),
                1, 0,
                K2A.ar(1),
                Impulse.ar(MouseX.kr(1, SampleRate.ir * MouseX.kr(0.002, 1, 1), 1), 0, 1.5)

            )


    }.scope;
)


// softsyncing a saw
(
    {

            DemandEnvGen.ar(
                Dseq([Dseries(-0.1, 0.01, 20)], inf),
                SampleDur.ir * MouseY.kr(1, 100, 1),
                1, 0,
                K2A.ar(1),
                Impulse.ar(MouseX.kr(1, SampleRate.ir * MouseX.kr(0.002, 1, 1), 1)) + [0, 0.3]

            )


    }.scope;
)



// hardsyncing a saw, som random elements
(
    {

            DemandEnvGen.ar(
                Dseq([Dseries(-0.1, 0.01, 20), Dseries(-0.1, 0.01, 20), Dwhite(-0.1, 0.1, 5)], inf),
                SampleDur.ir * MouseY.kr(1, 100, 1),
                3, 0,
                1,
                Impulse.ar(MouseX.kr(1, SampleRate.ir * MouseX.kr(0.002, 1, 1), 1), 0, 1.5)

            )


    }.scope;
)

// softsyncing a saw, som random elements
(
    {

            DemandEnvGen.ar(
                Dseq([Dseries(-0.1, 0.01, 20), Dseries(-0.1, 0.01, 20), Dwhite(-0.1, 0.1, 5)], inf),
                SampleDur.ir * MouseY.kr(1, 100, 1),
                1, 0, // linear interpolation
                1,
                Impulse.ar(MouseX.kr(1, SampleRate.ir * MouseX.kr(0.002, 1, 1), 1))

            )


    }.scope;
)


// multichannel expansion
// mouse x on right side of screen toggles gate
// mouse y controls speed

(
    {
        var freq;
        freq = DemandEnvGen.kr(
                { Dseq([300, 800, Drand([1000, 460, 300], 1), 400], inf) + 3.0.rand } ! 2,
                MouseY.kr(0.001, 2, 1),
                5, -4,
                MouseX.kr &gt; 0.5
            );
        SinOsc.ar(freq) * 0.1

    }.play;
)</pre>

<p><div class='doclink'>source: <a href='file:///usr/local/share/SuperCollider/HelpSource/Classes/DemandEnvGen.schelp'>/usr/local/share/SuperCollider/HelpSource/Classes/DemandEnvGen.schelp</a><br>link::Classes/DemandEnvGen::<br>sc version: 3.8dev</div></div></body></html>