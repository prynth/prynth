<html><head><title>MIDIIn</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES</div>
<div id='categories'><a href='./../Browse.html#External Control>MIDI'>External Control>MIDI</a></div>
<h1>MIDIIn</h1>
<div id='summary'>receive MIDI messages</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /usr/local/share/SuperCollider/SCClassLibrary/Common/Control/<a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Common/Control/MIDIOut.sc'>MIDIOut.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
<div id='related'>See also: <a href="./../Classes/MIDIClient.html">MIDIClient</a>, <a href="./../Classes/MIDIOut.html">MIDIOut</a>, <a href="./../Classes/MIDIFunc.html">MIDIFunc</a>, <a href="./../Classes/MIDIdef.html">MIDIdef</a>, <a href="./../Guides/MIDI.html">MIDI</a>, <a href="./../Guides/UsingMIDI.html">Using MIDI</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'><li class='toc2'><a href='#The MIDIIn class'>The MIDIIn class</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*findPort'>findPort</a> </li>
<li class='toc3'><a href='#*addFuncTo'>addFuncTo</a> </li>
<li class='toc3'><a href='#*removeFuncFrom'>removeFuncFrom</a> </li>
<li class='toc3'><a href='#*replaceFuncTo'>replaceFuncTo</a> </li>
<li class='toc3'><a href='#*noteOnZeroAsNoteOff'>noteOnZeroAsNoteOff</a> </li>
<li class='toc3'><a href='#*connectAll'>connectAll</a> </li>
<li class='toc3'><a href='#*disconnectAll'>disconnectAll</a> </li>
<li class='toc2'><a href='#Getter/Setters for Specific Message Types'>Getter/Setters for Specific Message Types</a></li>
<ul class='toc'><li class='toc3'><a href='#*noteOn'>noteOn</a> </li>
<li class='toc3'><a href='#*noteOff'>noteOff</a> </li>
<li class='toc3'><a href='#*polytouch'>polytouch</a> </li>
<li class='toc3'><a href='#*control'>control</a> </li>
<li class='toc3'><a href='#*program'>program</a> </li>
<li class='toc3'><a href='#*touch'>touch</a> </li>
<li class='toc3'><a href='#*bend'>bend</a> </li>
<li class='toc3'><a href='#*sysex'>sysex</a> </li>
<li class='toc3'><a href='#*sysrt'>sysrt</a> </li>
<li class='toc3'><a href='#*smpte'>smpte</a> </li>
</ul><li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
<li class='toc2'><a href='#Undocumented class methods'>Undocumented class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*action'>action</a> </li>
<li class='toc3'><a href='#*bendList'>bendList</a> </li>
<li class='toc3'><a href='#*connect'>connect</a> </li>
<li class='toc3'><a href='#*controlList'>controlList</a> </li>
<li class='toc3'><a href='#*disconnect'>disconnect</a> </li>
<li class='toc3'><a href='#*doAction'>doAction</a> </li>
<li class='toc3'><a href='#*doBendAction'>doBendAction</a> </li>
<li class='toc3'><a href='#*doControlAction'>doControlAction</a> </li>
<li class='toc3'><a href='#*doInvalidSysexAction'>doInvalidSysexAction</a> </li>
<li class='toc3'><a href='#*doNoteOffAction'>doNoteOffAction</a> </li>
<li class='toc3'><a href='#*doNoteOnAction'>doNoteOnAction</a> </li>
<li class='toc3'><a href='#*doPolyTouchAction'>doPolyTouchAction</a> </li>
<li class='toc3'><a href='#*doProgramAction'>doProgramAction</a> </li>
<li class='toc3'><a href='#*doSMPTEaction'>doSMPTEaction</a> </li>
<li class='toc3'><a href='#*doSysexAction'>doSysexAction</a> </li>
<li class='toc3'><a href='#*doSysrtAction'>doSysrtAction</a> </li>
<li class='toc3'><a href='#*doTouchAction'>doTouchAction</a> </li>
<li class='toc3'><a href='#*invalid'>invalid</a> </li>
<li class='toc3'><a href='#*noteOffList'>noteOffList</a> </li>
<li class='toc3'><a href='#*noteOnList'>noteOnList</a> </li>
<li class='toc3'><a href='#*polyList'>polyList</a> </li>
<li class='toc3'><a href='#*programList'>programList</a> </li>
<li class='toc3'><a href='#*touchList'>touchList</a> </li>
<li class='toc3'><a href='#*waitBend'>waitBend</a> </li>
<li class='toc3'><a href='#*waitControl'>waitControl</a> </li>
<li class='toc3'><a href='#*waitNoteOff'>waitNoteOff</a> </li>
<li class='toc3'><a href='#*waitNoteOn'>waitNoteOn</a> </li>
<li class='toc3'><a href='#*waitPoly'>waitPoly</a> </li>
<li class='toc3'><a href='#*waitProgram'>waitProgram</a> </li>
<li class='toc3'><a href='#*waitTouch'>waitTouch</a> </li>
</ul></ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'><li class='toc2'><a href='#Quick start for 1 port'>Quick start for 1 port</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Quick start for 2 or more ports'>Quick start for 2 or more ports</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#example with sound'>example with sound</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#writing to the bus rather than directly to the synth'>writing to the bus rather than directly to the synth</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Keyboard Split for two voices'>Keyboard Split for two voices</a></li>
<ul class='toc'></ul></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>This document explains technical details of the MIDI hardware interface class, MIDIIn.
<p>MIDIIn is a simple and direct interface. When MIDI events come into Super Collider, MIDIIn evaluates simple handler functions.<div class='note'><span class='notelabel'>NOTE:</span> For general programming, <strong>users should not use the MIDIIn class directly</strong>. See the <a href="./../Classes/MIDIFunc.html">MIDIFunc</a> and <a href="./../Classes/MIDIdef.html">MIDIdef</a> classes for higher level event matching and more flexible handling of event handlers.</div>
<p>Certain MIDI messages are supported only through MIDIIn. These are: sysex, sysrt, smpte.
<p>See the <a href="./../Guides/UsingMIDI.html">Using MIDI</a> helpfile for practical considerations and techniques for using MIDI in SC.<h3><a class='anchor' name='The MIDIIn class'>The MIDIIn class</a></h3>

<p>MIDIIn links MIDI input received from the operating system to a set of user defined functions. Only one set of MIDI input handling functions can be active at a time, they are stored in the following class variables:
<p> noteOff, noteOn, polytouch, control, program, touch, bend, sysex, sysrt, smpte
<p>The first argument these functions receive is an unique identifier that specifies the source of the data.<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*findPort' href='./../Overviews/Methods.html#findPort'>findPort</a> (<span class='argstr'>deviceName</span>, <span class='argstr'>portName</span>)</h3>
<div class='method'>
<p>searches for a connected <a href="./../Classes/MIDIEndPoint.html">MIDIEndPoint</a> by name.<pre class='code prettyprint lang-sc'>//list connected ins:
MIDIClient.init;
MIDIClient.sources;</pre>
</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*addFuncTo' href='./../Overviews/Methods.html#addFuncTo'>addFuncTo</a> (<span class='argstr'>what</span>, <span class='argstr'>func</span>)</h3>
<div class='method'>
<p>Add a <a href="./../Classes/Function.html">Function</a> or similar object to be evaluated whenever a particular MIDI message is received. This method is preferable to the setters below, since it will not overwrite any existing functions.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>what<td class='argumentdesc'>
<p>A <a href="./../Classes/Symbol.html">Symbol</a> indicating the message type to wait for, one of <code class='code prettyprint lang-sc'>'noteOn'</code> <code class='code prettyprint lang-sc'>'noteOff'</code>, <code class='code prettyprint lang-sc'>'polytouch'</code>, <code class='code prettyprint lang-sc'>'control'</code>, <code class='code prettyprint lang-sc'>'program'</code>, <code class='code prettyprint lang-sc'>'touch'</code>, <code class='code prettyprint lang-sc'>'bend'</code>, <code class='code prettyprint lang-sc'>'sysex'</code>, <code class='code prettyprint lang-sc'>'sysrt'</code>, <code class='code prettyprint lang-sc'>'smpte'</code>, or <code class='code prettyprint lang-sc'>'invalid'</code> (for invalid sysex messages).<tr><td class='argumentname'>func<td class='argumentdesc'>
<p>A <a href="./../Classes/Function.html">Function</a> or similar object to be evaluated when a message of the specified type is received. See the setters below for the arguments which will be passed at evaluation time.</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*removeFuncFrom' href='./../Overviews/Methods.html#removeFuncFrom'>removeFuncFrom</a> (<span class='argstr'>what</span>, <span class='argstr'>func</span>)</h3>
<div class='method'>
<p>Remove a <a href="./../Classes/Function.html">Function</a> or similar object from the list of those to be evaluated whenever a particular MIDI message is received. This method is preferable to the setters below, since it will leave any existing functions in place.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>what<td class='argumentdesc'>
<p>A <a href="./../Classes/Symbol.html">Symbol</a> indicating the message type, one of <code class='code prettyprint lang-sc'>'noteOn'</code> <code class='code prettyprint lang-sc'>'noteOff'</code>, <code class='code prettyprint lang-sc'>'polytouch'</code>, <code class='code prettyprint lang-sc'>'control'</code>, <code class='code prettyprint lang-sc'>'program'</code>, <code class='code prettyprint lang-sc'>'touch'</code>, <code class='code prettyprint lang-sc'>'bend'</code>, <code class='code prettyprint lang-sc'>'sysex'</code>, <code class='code prettyprint lang-sc'>'sysrt'</code>, <code class='code prettyprint lang-sc'>'smpte'</code>, or <code class='code prettyprint lang-sc'>'invalid'</code> (for invalid sysex messages).<tr><td class='argumentname'>func<td class='argumentdesc'>
<p>The <a href="./../Classes/Function.html">Function</a> or similar object to be removed.</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*replaceFuncTo' href='./../Overviews/Methods.html#replaceFuncTo'>replaceFuncTo</a> (<span class='argstr'>what</span>, <span class='argstr'>func</span>, <span class='argstr'>newFunc</span>)</h3>
<div class='method'>
<p>Replace a <a href="./../Classes/Function.html">Function</a> or similar object in the list to be evaluated whenever a particular MIDI message is received with another one. This method is preferable to the setters below, since it will not overwrite any existing functions.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>what<td class='argumentdesc'>
<p>A <a href="./../Classes/Symbol.html">Symbol</a> indicating the message type to wait for, one of <code class='code prettyprint lang-sc'>'noteOn'</code> <code class='code prettyprint lang-sc'>'noteOff'</code>, <code class='code prettyprint lang-sc'>'polytouch'</code>, <code class='code prettyprint lang-sc'>'control'</code>, <code class='code prettyprint lang-sc'>'program'</code>, <code class='code prettyprint lang-sc'>'touch'</code>, <code class='code prettyprint lang-sc'>'bend'</code>, <code class='code prettyprint lang-sc'>'sysex'</code>, <code class='code prettyprint lang-sc'>'sysrt'</code>, <code class='code prettyprint lang-sc'>'smpte'</code>, or <code class='code prettyprint lang-sc'>'invalid'</code> (for invalid sysex messages).<tr><td class='argumentname'>func<td class='argumentdesc'>
<p>The <a href="./../Classes/Function.html">Function</a> or similar object to be replaced.<tr><td class='argumentname'>newFunc<td class='argumentdesc'>
<p>A <a href="./../Classes/Function.html">Function</a> or similar object to be evaluated when a message of the specified type is received. See the setters below for the arguments which will be passed at evaluation time.</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*noteOnZeroAsNoteOff' href='./../Overviews/Methods.html#noteOnZeroAsNoteOff'>noteOnZeroAsNoteOff</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*noteOnZeroAsNoteOff' href='./../Overviews/Methods.html#noteOnZeroAsNoteOff'>noteOnZeroAsNoteOff</a> = value</h3>
<div class='method'>
<p>By default this flag is <code class='code prettyprint lang-sc'>true</code> and SuperCollider interprets incoming MIDI noteOn message with velocity 0 as noteOff messages. In case you do not want this automatic translation, you can set this flag to <code class='code prettyprint lang-sc'>false</code></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*connectAll' href='./../Overviews/Methods.html#connectAll'>connectAll</a> (<span class='argstr'>verbose: true</span>)</h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Platform/linux/extMIDIOut.sc'>/usr/local/share/SuperCollider/SCClassLibrary/Platform/linux/extMIDIOut.sc</a></div>
<div class='method'>
<p>Connect to all possible MIDI inputs.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>verbose<td class='argumentdesc'>
<p>If set to true (default) it will print out the ports found in MIDIClient.init.</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*disconnectAll' href='./../Overviews/Methods.html#disconnectAll'>disconnectAll</a> </h3>
<div class='method'>
<p>Disconnect from all MIDI inputs.</div><h3><a class='anchor' name='Getter/Setters for Specific Message Types'>Getter/Setters for Specific Message Types</a></h3>

<p>The methods below allow you to register a function to respond to a particular message type.<div class='note'><span class='notelabel'>NOTE:</span> It is preferable to use the <a href="#*addFuncTo">*addFuncTo</a>, <a href="#*removeFuncFrom">*removeFuncFrom</a> and <a href="#*replaceFuncTo">*replaceFuncTo</a> methods above instead of these methods, as they will not overwrite any functions added by system objects.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*noteOn' href='./../Overviews/Methods.html#noteOn'>noteOn</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*noteOn' href='./../Overviews/Methods.html#noteOn'>noteOn</a> = value</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>(value)<td class='argumentdesc'>
<p>a <a href="./../Classes/Function.html">Function</a> evaluated whenever a MIDI noteOn message is received. It is passed the following arguments:<dl>
<dt>uid<dd>unique identifier of the MIDI port<dt>MIDIchannel<dd>ranges from 0 to 15<dt>keyNumber<dd>0 - 127<dt>velocity<dd>0 - 127</dl>
</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*noteOff' href='./../Overviews/Methods.html#noteOff'>noteOff</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*noteOff' href='./../Overviews/Methods.html#noteOff'>noteOff</a> = value</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>(value)<td class='argumentdesc'>
<p>a <a href="./../Classes/Function.html">Function</a> evaluated whenever a MIDI noteOff message is received. It is passed the following arguments:<dl>
<dt>uid<dd>unique identifier of the MIDI port<dt>MIDIchannel<dd>ranges from 0 to 15<dt>keyNumber<dd>0 - 127<dt>velocity<dd>0 - 127 (typically 64 unless noteOff velocity is supported)</dl>
</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*polytouch' href='./../Overviews/Methods.html#polytouch'>polytouch</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*polytouch' href='./../Overviews/Methods.html#polytouch'>polytouch</a> = value</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>(value)<td class='argumentdesc'>
<p>a <a href="./../Classes/Function.html">Function</a> evaluated whenever a MIDI polytouch message is received. It is passed the following arguments:<dl>
<dt>uid<dd>unique identifier of the MIDI port<dt>MIDIchannel<dd>ranges from 0 to 15<dt>keyNumber<dd>0 - 127<dt>pressure<dd>0 - 127</dl>
</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*control' href='./../Overviews/Methods.html#control'>control</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*control' href='./../Overviews/Methods.html#control'>control</a> = value</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>(value)<td class='argumentdesc'>
<p>a <a href="./../Classes/Function.html">Function</a> evaluated whenever a MIDI control change message (CC) is received. It is passed the following arguments:<dl>
<dt>uid<dd>unique identifier of the MIDI port<dt>MIDIchannel<dd>ranges from 0 to 15<dt>controllerNumber<dd>0 - 127<dt>value<dd>0 - 127</dl>
</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*program' href='./../Overviews/Methods.html#program'>program</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*program' href='./../Overviews/Methods.html#program'>program</a> = value</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>(value)<td class='argumentdesc'>
<p>a <a href="./../Classes/Function.html">Function</a> evaluated whenever a MIDI program change message is received. It is passed the following arguments:<dl>
<dt>uid<dd>unique identifier of the MIDI port<dt>MIDIchannel<dd>ranges from 0 to 15<dt>programNumber<dd>0 - 127</dl>
</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*touch' href='./../Overviews/Methods.html#touch'>touch</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*touch' href='./../Overviews/Methods.html#touch'>touch</a> = value</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>(value)<td class='argumentdesc'>
<p>a <a href="./../Classes/Function.html">Function</a> evaluated whenever a MIDI after-touch message is received. It is passed the following arguments:<dl>
<dt>uid<dd>unique identifier of the MIDI port<dt>MIDIchannel<dd>ranges from 0 to 15<dt>pressure<dd>0 - 127</dl>
</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*bend' href='./../Overviews/Methods.html#bend'>bend</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*bend' href='./../Overviews/Methods.html#bend'>bend</a> = value</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>(value)<td class='argumentdesc'>
<p>a <a href="./../Classes/Function.html">Function</a> evaluated whenever a MIDI pitch wheel change message is received. It is passed the following arguments:<dl>
<dt>uid<dd>unique identifier of the MIDI port<dt>MIDIchannel<dd>ranges from 0 to 15<dt>bend<dd>0 - 16383 (14bits, the midpoint is 8192)</dl>
</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*sysex' href='./../Overviews/Methods.html#sysex'>sysex</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*sysex' href='./../Overviews/Methods.html#sysex'>sysex</a> = value</h3>
<div class='method'><div class='note'><span class='notelabel'>NOTE:</span> The current implementation assembles a complete system exclusive packet before evaluating the function.</div>
<p><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>(value)<td class='argumentdesc'>
<p>a <a href="./../Classes/Function.html">Function</a> evaluated whenever a MIDI System Exclusive message is received. It is passed the following arguments:<dl>
<dt>uid<dd>unique identifier of the MIDI port<dt>data<dd>an <a href="./../Classes/Int8Array.html">Int8Array</a> (includes f0 and f7). See manufacturer references for details.</dl>
</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*sysrt' href='./../Overviews/Methods.html#sysrt'>sysrt</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*sysrt' href='./../Overviews/Methods.html#sysrt'>sysrt</a> = value</h3>
<div class='method'><table>
<tr><td><strong>index</strong><td><strong>data</strong><td><strong>message</strong><tr><td>2<td>14bits<td>song pointer<tr><td>3<td>7bits<td>song select<tr><td>8<td><td>midiclock<tr><td>10<td><td>start<tr><td>11<td><td>continue<tr><td>12<td><td>stop</table>

<p><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>(value)<td class='argumentdesc'>
<p>a <a href="./../Classes/Function.html">Function</a> evaluated whenever a MIDI System Real-Time message is received. It is passed the following arguments:<dl>
<dt>uid<dd>unique identifier of the MIDI port<dt>index<dd>ranges from 0 to 15<dt>data<dd></dl>
</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*smpte' href='./../Overviews/Methods.html#smpte'>smpte</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*smpte' href='./../Overviews/Methods.html#smpte'>smpte</a> = value</h3>
<div class='method'>Over MIDI, SMPTE is transmitted at 1/4 frame intervals four times faster than the frame rate.<table>
<tr><td><strong>index</strong><td><strong>data</strong><tr><td>0<td>frames low nibble<tr><td>1<td>frames hi nibble<tr><td>2<td>seconds low nibble<tr><td>3<td>seconds hi nibble<tr><td>4<td>minutes low nibble<tr><td>5<td>minutes hi nibble<tr><td>6<td>hours low nibble<tr><td>7<td>hours hi <em>bit</em> OR'ed with frameRate<ul>
<li>0 -&gt; 24 fps<li>2 -&gt; 25 fps<li>4 -&gt; 30 fps drop frame<li>6 -&gt; 30 fps</ul>
</table>

<p>Nibbles are sent in ascending order.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>(value)<td class='argumentdesc'>
<p>a <a href="./../Classes/Function.html">Function</a> evaluated whenever a MIDI smpte message is received. It is passed the following arguments:<dl>
<dt>uid<dd>unique identifier of the MIDI port<dt>index<dd>ranges from 0 to 7<dt>data<dd>0 - 15 (4bits)</dl>
</table></div><h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h3><a class='anchor' name='Undocumented class methods'>Undocumented class methods</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*action' href='./../Overviews/Methods.html#action'>action</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*action' href='./../Overviews/Methods.html#action'>action</a> = value</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*bendList' href='./../Overviews/Methods.html#bendList'>bendList</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*bendList' href='./../Overviews/Methods.html#bendList'>bendList</a> = value</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*connect' href='./../Overviews/Methods.html#connect'>connect</a> (<span class='argstr'>inport: 0</span>, <span class='argstr'>device: 0</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*controlList' href='./../Overviews/Methods.html#controlList'>controlList</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*controlList' href='./../Overviews/Methods.html#controlList'>controlList</a> = value</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*disconnect' href='./../Overviews/Methods.html#disconnect'>disconnect</a> (<span class='argstr'>inport: 0</span>, <span class='argstr'>device: 0</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doAction' href='./../Overviews/Methods.html#doAction'>doAction</a> (<span class='argstr'>src</span>, <span class='argstr'>status</span>, <span class='argstr'>a</span>, <span class='argstr'>b</span>, <span class='argstr'>c</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doBendAction' href='./../Overviews/Methods.html#doBendAction'>doBendAction</a> (<span class='argstr'>src</span>, <span class='argstr'>chan</span>, <span class='argstr'>val</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doControlAction' href='./../Overviews/Methods.html#doControlAction'>doControlAction</a> (<span class='argstr'>src</span>, <span class='argstr'>chan</span>, <span class='argstr'>num</span>, <span class='argstr'>val</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doInvalidSysexAction' href='./../Overviews/Methods.html#doInvalidSysexAction'>doInvalidSysexAction</a> (<span class='argstr'>src</span>, <span class='argstr'>packet</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doNoteOffAction' href='./../Overviews/Methods.html#doNoteOffAction'>doNoteOffAction</a> (<span class='argstr'>src</span>, <span class='argstr'>chan</span>, <span class='argstr'>num</span>, <span class='argstr'>veloc</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doNoteOnAction' href='./../Overviews/Methods.html#doNoteOnAction'>doNoteOnAction</a> (<span class='argstr'>src</span>, <span class='argstr'>chan</span>, <span class='argstr'>num</span>, <span class='argstr'>veloc</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doPolyTouchAction' href='./../Overviews/Methods.html#doPolyTouchAction'>doPolyTouchAction</a> (<span class='argstr'>src</span>, <span class='argstr'>chan</span>, <span class='argstr'>num</span>, <span class='argstr'>val</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doProgramAction' href='./../Overviews/Methods.html#doProgramAction'>doProgramAction</a> (<span class='argstr'>src</span>, <span class='argstr'>chan</span>, <span class='argstr'>val</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doSMPTEaction' href='./../Overviews/Methods.html#doSMPTEaction'>doSMPTEaction</a> (<span class='argstr'>src</span>, <span class='argstr'>frameRate</span>, <span class='argstr'>timecode</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doSysexAction' href='./../Overviews/Methods.html#doSysexAction'>doSysexAction</a> (<span class='argstr'>src</span>, <span class='argstr'>packet</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doSysrtAction' href='./../Overviews/Methods.html#doSysrtAction'>doSysrtAction</a> (<span class='argstr'>src</span>, <span class='argstr'>index</span>, <span class='argstr'>val</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*doTouchAction' href='./../Overviews/Methods.html#doTouchAction'>doTouchAction</a> (<span class='argstr'>src</span>, <span class='argstr'>chan</span>, <span class='argstr'>val</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*invalid' href='./../Overviews/Methods.html#invalid'>invalid</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*invalid' href='./../Overviews/Methods.html#invalid'>invalid</a> = value</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*noteOffList' href='./../Overviews/Methods.html#noteOffList'>noteOffList</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*noteOffList' href='./../Overviews/Methods.html#noteOffList'>noteOffList</a> = value</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*noteOnList' href='./../Overviews/Methods.html#noteOnList'>noteOnList</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*noteOnList' href='./../Overviews/Methods.html#noteOnList'>noteOnList</a> = value</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*polyList' href='./../Overviews/Methods.html#polyList'>polyList</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*polyList' href='./../Overviews/Methods.html#polyList'>polyList</a> = value</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*programList' href='./../Overviews/Methods.html#programList'>programList</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*programList' href='./../Overviews/Methods.html#programList'>programList</a> = value</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*touchList' href='./../Overviews/Methods.html#touchList'>touchList</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*touchList' href='./../Overviews/Methods.html#touchList'>touchList</a> = value</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*waitBend' href='./../Overviews/Methods.html#waitBend'>waitBend</a> (<span class='argstr'>port</span>, <span class='argstr'>chan</span>, <span class='argstr'>val</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*waitControl' href='./../Overviews/Methods.html#waitControl'>waitControl</a> (<span class='argstr'>port</span>, <span class='argstr'>chan</span>, <span class='argstr'>num</span>, <span class='argstr'>val</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*waitNoteOff' href='./../Overviews/Methods.html#waitNoteOff'>waitNoteOff</a> (<span class='argstr'>port</span>, <span class='argstr'>chan</span>, <span class='argstr'>note</span>, <span class='argstr'>veloc</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*waitNoteOn' href='./../Overviews/Methods.html#waitNoteOn'>waitNoteOn</a> (<span class='argstr'>port</span>, <span class='argstr'>chan</span>, <span class='argstr'>note</span>, <span class='argstr'>veloc</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*waitPoly' href='./../Overviews/Methods.html#waitPoly'>waitPoly</a> (<span class='argstr'>port</span>, <span class='argstr'>chan</span>, <span class='argstr'>note</span>, <span class='argstr'>veloc</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*waitProgram' href='./../Overviews/Methods.html#waitProgram'>waitProgram</a> (<span class='argstr'>port</span>, <span class='argstr'>chan</span>, <span class='argstr'>num</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*waitTouch' href='./../Overviews/Methods.html#waitTouch'>waitTouch</a> (<span class='argstr'>port</span>, <span class='argstr'>chan</span>, <span class='argstr'>val</span>)</h3>
<h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>
<h3><a class='anchor' name='Quick start for 1 port'>Quick start for 1 port</a></h3>
<pre class='code prettyprint lang-sc'>(
MIDIIn.connect;    // init for one port midi interface
// register functions:
~noteOff = { arg src, chan, num, vel;    [chan,num,vel / 127].postln; };
~noteOn = { arg src, chan, num, vel;    [chan,num,vel / 127].postln; };
~polytouch = { arg src, chan, num, vel;    [chan,num,vel / 127].postln; };
~control = { arg src, chan, num, val;    [chan,num,val].postln; };
~program = { arg src, chan, prog;        [chan,prog].postln; };
~touch = { arg src, chan, pressure;    [chan,pressure].postln; };
~bend = { arg src, chan, bend;        [chan,bend - 8192].postln; };
~sysex = { arg src, sysex;        sysex.postln; };
~sysrt = { arg src, chan, val;        [chan,val].postln; };
~smpte = { arg src, chan, val;        [chan,val].postln; };
MIDIIn.addFuncTo(\noteOn, ~noteOn);
MIDIIn.addFuncTo(\noteOff, ~noteOff);
MIDIIn.addFuncTo(\polytouch, ~polytouch);
MIDIIn.addFuncTo(\control, ~control);
MIDIIn.addFuncTo(\program, ~program);
MIDIIn.addFuncTo(\touch, ~touch);
MIDIIn.addFuncTo(\bend, ~bend);
MIDIIn.addFuncTo(\sysex, ~sysex);
MIDIIn.addFuncTo(\sysrt, ~sysrt);
MIDIIn.addFuncTo(\smpte, ~smpte);
)

//cleanup
(
MIDIIn.removeFuncFrom(\noteOn, ~noteOn);
MIDIIn.removeFuncFrom(\noteOff, ~noteOff);
MIDIIn.removeFuncFrom(\polytouch, ~polytouch);
MIDIIn.removeFuncFrom(\control, ~control);
MIDIIn.removeFuncFrom(\program, ~program);
MIDIIn.removeFuncFrom(\touch, ~touch);
MIDIIn.removeFuncFrom(\bend, ~bend);
MIDIIn.removeFuncFrom(\sysex, ~sysex);
MIDIIn.removeFuncFrom(\sysrt, ~sysrt);
MIDIIn.removeFuncFrom(\smpte, ~smpte);
)</pre>
<h3><a class='anchor' name='Quick start for 2 or more ports'>Quick start for 2 or more ports</a></h3>
<pre class='code prettyprint lang-sc'>(
    var inPorts = 2;
    var outPorts = 2;
    MIDIClient.init(inPorts,outPorts);    // explicitly intialize the client
    inPorts.do({ arg i;
        MIDIIn.connect(i, MIDIClient.sources.at(i));
    });
)</pre>
<h3><a class='anchor' name='example with sound'>example with sound</a></h3>
<pre class='code prettyprint lang-sc'>MIDIIn.connect;
s.boot;

(
SynthDef("sik-goo", { arg freq=440,formfreq=100,gate=0.0,bwfreq=800;
    var x;
    x = Formant.ar(
        SinOsc.kr(0.02, 0, 10, freq),
        formfreq,
        bwfreq
    );
    x = EnvGen.kr(Env.adsr, gate,Latch.kr(gate,gate)) * x;
    Out.ar(0, x);
}).add;
)

x = Synth("sik-goo");

//set the action:
(
~noteOn = {arg src, chan, num, vel;
    x.set(\freq, num.midicps / 4.0);
    x.set(\gate, vel / 200 );
    x.set(\formfreq, vel / 127 * 1000);
};
MIDIIn.addFuncTo(\noteOn, ~noteOn);

~noteOff = { arg src,chan,num,vel;
    x.set(\gate, 0.0);
};
MIDIIn.addFuncTo(\noteOff, ~noteOff);

~bend = { arg src,chan,val;
    //(val * 0.048828125).postln;
    x.set(\bwfreq, val * 0.048828125 );
};
MIDIIn.addFuncTo(\bend, ~bend);
)

//cleanup
MIDIIn.removeFuncFrom(\noteOn, ~noteOn);
MIDIIn.removeFuncFrom(\noteOff, ~noteOff);
MIDIIn.removeFuncFrom(\bend, ~bend);</pre>
<h3><a class='anchor' name='writing to the bus rather than directly to the synth'>writing to the bus rather than directly to the synth</a></h3>
<pre class='code prettyprint lang-sc'>//i used this and got acceptable latency for triggering synths live.
//The latency might actually be less than sc2, but i haven't used it enough
//to tell for sure yet.
//Powerbook G4, 512mb ram.
//- matrix6k@somahq.com

s.boot;

(
SynthDef("moto-rev", { arg ffreq=100;
    var x;
    x = RLPF.ar(LFPulse.ar(SinOsc.kr(0.2, 0, 10, 21), [0,0.1], 0.1),
        ffreq, 0.1)
        .clip2(0.4);
    Out.ar(0, x);
}).add;
)

b = Bus.control(s);

x = Synth("moto-rev");

// map the synth's first input (ffreq) to read
// from the bus' output index
x.map(0, b);


MIDIIn.connect;
//set the action:
(
~noteOn = {arg src, chan, num, vel;
    b.value = num.midicps.postln;
};
MIDIIn.addFuncTo(\noteOn, ~noteOn);

~control = {arg src, chan, num, val;
    [chan,num,val].postln;
};
MIDIIn.addFuncTo(\control, ~control);

~bend = {arg src, chan, val;
    val.postln;
};
MIDIIn.addFuncTo(\bend, ~bend);
)

// cleanup
x.free;
b.free;
MIDIIn.removeFuncFrom(\noteOn, ~noteOn);
MIDIIn.removeFuncFrom(\control, ~control);
MIDIIn.removeFuncFrom(\bend, ~bend);</pre>
<h3><a class='anchor' name='Keyboard Split for two voices'>Keyboard Split for two voices</a></h3>
<pre class='code prettyprint lang-sc'>//pbend to cutoff, mod to rez, 7 to amp
//- matrix6k@somahq.com

s.boot;
(
SynthDef("funk",{ arg freq = 700, amp = 0.2, gate = 1, cutoff = 20000, rez = 1, lfospeed=0;
    var e,x,env,range,filterfreq;
    e = Env.new([0, 0.1, 0.1, 0], [0, 0.1, 0.1], 'linear', 2);
    env=Env.adsr(0.3,1,1,1);
    range = cutoff -1;
    filterfreq = SinOsc.kr(lfospeed,0, range, cutoff).abs;
    x = RLPF.ar(Mix.ar([
            Mix.arFill(2, {Saw.ar(freq *2 + 0.2.rand2, amp)}),
            Mix.arFill(2, {Saw.ar(freq *4+ 0.2.rand2, amp)})
        ]),
        EnvGen.kr(env,gate)*filterfreq,
        rez);
    Out.ar([0,1],x * EnvGen.kr(e, gate, doneAction: 2))
}).add;

SynthDef("strings",{ arg freq = 700, amp = 0.2, gate = 1;
    var x,enve;
    enve = Env.new([0, 0.1, 0.1, 0], [2, 0.1, 1], 'linear', 2);
    x = RLPF.ar(Mix.ar([
            Mix.arFill(2, {Saw.ar(freq +2.rand2,0.6)}),
            Mix.arFill(2, {Saw.ar(freq *0.5 + 2.rand2,0.6)})
        ]),
        6000,1);
    Out.ar([0,1],x * EnvGen.kr(enve, gate, doneAction: 2))
}).add;
)

(
var keys, cutspec, cutbus, rezspec, rezbus, lfospec, lfobus;
keys = Array.newClear(128);

MIDIClient.init;
MIDIIn.connect(0, MIDIClient.sources.at(0));

g = Group.new;

cutspec = ControlSpec(100,10000,\linear,0.001);
cutbus = Bus.new(\control,1,1,s);
cutbus.value = 10000;

rezspec = ControlSpec(1,0,\linear,0.001);
rezbus = Bus.new(\control,2,1,s);
rezbus.value = 1.0;

lfospec = ControlSpec(0,50,\linear,0.001);
lfobus = Bus.new(\control,3,1,s);

~control = {arg src, chan, num, val;
    if(num == 1,{
        rezbus.value = rezspec.map(val/127.0);
    });
    if(num == 7,{
        lfobus.value = lfospec.map(val/127.0).postln;
    });
};
MIDIIn.addFuncTo(\control, ~control);

~bend = {arg src, chan, val;
    cutbus.value = cutspec.map(val/16383.0);
};
MIDIIn.addFuncTo(\bend, ~bend);

~noteOn = {arg src, chan, num, vel;
    var node;
    if(num &lt; 60, {
        node = Synth.tail(g, "funk", [\freq, num.midicps, \amp, vel/255]);
        node.map("cutoff",1,"rez",2,"lfospeed",3);
//        node = Synth.basicNew("funk",s);
//        s.sendBundle(nil,
//            node.addToTailMsg(g,[\freq, num.midicps, \amp, vel/255]),
//            node.mapMsg("cutoff",1,"rez",2,"lfospeed",3)
//        );
        keys.put(num, node)
    },{
        node = Synth.tail(g, "strings", [\freq, num.midicps, \amp, vel/255]);
        keys.put(num, node)
    });
};
MIDIIn.addFuncTo(\noteOn, ~noteOn);

~noteOff = {arg src, chan, num, vel;
    var node;
    node = keys.at(num);
    if (node.notNil, {
        keys.put(num, nil);
        s.sendMsg("/n_set", node.nodeID, "gate", 0);
        // or node.release
        // then free it ... or get the NodeWatcher to do it
    });
};
MIDIIn.addFuncTo(\noteOff, ~noteOff);
)

//cleanup
MIDIIn.removeFuncFrom(\noteOn, ~noteOn);
MIDIIn.removeFuncFrom(\control, ~control);
MIDIIn.removeFuncFrom(\bend, ~bend);</pre>

<p><div class='doclink'>source: <a href='file:///usr/local/share/SuperCollider/HelpSource/Classes/MIDIIn.schelp'>/usr/local/share/SuperCollider/HelpSource/Classes/MIDIIn.schelp</a><br>link::Classes/MIDIIn::<br>sc version: 3.8dev</div></div></body></html>