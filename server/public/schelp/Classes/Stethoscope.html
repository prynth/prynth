<html><head><title>Stethoscope</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES</div>
<div id='categories'><a href='./../Browse.html#GUI>Interfaces'>GUI>Interfaces</a></div>
<h1>Stethoscope</h1>
<div id='summary'>An oscilloscope</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /usr/local/share/SuperCollider/SCClassLibrary/Common/GUI/tools/<a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Common/GUI/tools/Stethoscope.sc'>Stethoscope.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
<div id='subclasses'>Subclasses: <a href="../Classes/QStethoscope.html">QStethoscope</a></div>
<div id='related'>See also: <a href="./../Classes/ScopeView.html">ScopeView</a>, <a href="./../Classes/FreqScope.html">FreqScope</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'><li class='toc2'><a href='#Creation by message .scope'>Creation by message .scope</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Keyboard shortcuts'>Keyboard shortcuts</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc3'><a href='#*isValidServer'>isValidServer</a> </li>
<li class='toc3'><a href='#*ugenScopes'>ugenScopes</a> </li>
<li class='toc3'><a href='#*tileBounds'>tileBounds</a> </li>
<li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc2'><a href='#Data'>Data</a></li>
<ul class='toc'><li class='toc3'><a href='#-server'>server</a> </li>
<li class='toc3'><a href='#-rate'>rate</a> </li>
<li class='toc3'><a href='#-index'>index</a> </li>
<li class='toc3'><a href='#-numChannels'>numChannels</a> </li>
<li class='toc3'><a href='#-bufsize'>bufsize</a> </li>
<li class='toc3'><a href='#-cycle'>cycle</a> </li>
</ul><li class='toc2'><a href='#Display'>Display</a></li>
<ul class='toc'><li class='toc3'><a href='#-window'>window</a> </li>
<li class='toc3'><a href='#-size'>size</a> </li>
<li class='toc3'><a href='#-toggleSize'>toggleSize</a> </li>
<li class='toc3'><a href='#-zoom'>zoom</a> </li>
<li class='toc3'><a href='#-xZoom'>xZoom</a> </li>
<li class='toc3'><a href='#-yZoom'>yZoom</a> </li>
<li class='toc3'><a href='#-style'>style</a> </li>
</ul><li class='toc2'><a href='#Operation'>Operation</a></li>
<ul class='toc'><li class='toc3'><a href='#-run'>run</a> </li>
<li class='toc3'><a href='#-quit'>quit</a> </li>
</ul><li class='toc2'><a href='#Convenience'>Convenience</a></li>
<ul class='toc'><li class='toc3'><a href='#-setProperties'>setProperties</a> </li>
</ul><li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
<li class='toc2'><a href='#Undocumented instance methods'>Undocumented instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-bus'>bus</a> </li>
<li class='toc3'><a href='#-doOnServerQuit'>doOnServerQuit</a> </li>
<li class='toc3'><a href='#-doOnServerTree'>doOnServerTree</a> </li>
<li class='toc3'><a href='#-initStethoscope'>initStethoscope</a> </li>
<li class='toc3'><a href='#-keyDown'>keyDown</a> </li>
<li class='toc3'><a href='#-largeSize'>largeSize</a> </li>
<li class='toc3'><a href='#-scopeView'>scopeView</a> </li>
<li class='toc3'><a href='#-smallSize'>smallSize</a> </li>
<li class='toc3'><a href='#-stop'>stop</a> </li>
<li class='toc3'><a href='#-switchRate'>switchRate</a> </li>
<li class='toc3'><a href='#-toInputBus'>toInputBus</a> </li>
<li class='toc3'><a href='#-toOutputBus'>toOutputBus</a> </li>
<li class='toc3'><a href='#-view'>view</a> </li>
</ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'><li class='toc2'><a href='#A step-by-step example'>A step-by-step example</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Embedded use'>Embedded use</a></li>
<ul class='toc'></ul></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>Stethoscope provides a complete oscilloscope GUI. It displays a window containing a bus-plotting <a href="./../Classes/ScopeView.html">ScopeView</a> and an interface to configure the plotting and choose among the buses.<h3><a class='anchor' name='Creation by message .scope'>Creation by message .scope</a></h3>

<p>Several classes provide a convenient 'scope' method that creates a Stethoscope to display their data. See for example: <a href="./../Classes/Server.html#-scope">Server: -scope</a>, <a href="./../Classes/Bus.html#-scope">Bus: -scope</a>, <a href="./../Classes/Function.html#-scope">Function: -scope</a>.<h3><a class='anchor' name='Keyboard shortcuts'>Keyboard shortcuts</a></h3>

<p>The following keyboard shortcuts may be used when focused on the Stethoscope display:<table>
<tr><td><strong>Shortcut</strong><td><strong>Action</strong><tr><td>J<td>one channel back<tr><td>K<td>switch rate (audio vs. control)<tr><td>L<td>one channel forward<tr><td>O<td>jump to first hardware output channel and adjust numChannels to hardware<tr><td>I<td>jump to first hardware input channel and adjust numChannels to hardware<tr><td>space<td>run, if not running already<tr><td>. (period)<td>stop<tr><td>M<td>toggle screen size<tr><td>+ / -<td>zoom horizontally<tr><td>* / _<td>zoom vertically<tr><td>S<td>change style between parallel and overlay<tr><td>Shift+S<td>change style to lissajou<tr><td>Shift+A<td>allocate buffer size so it fills the screen (to next power of two) (this can be dangerous, might crash)</table>
<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>server</span>, <span class='argstr'>numChannels: 2</span>, <span class='argstr'>index: 0</span>, <span class='argstr'>bufsize: 4096</span>, <span class='argstr'>zoom: 1</span>, <span class='argstr'>rate: 'audio'</span>, <span class='argstr'>view</span>, <span class='argstr'>bufnum</span>)</h3>
<div class='method'>
<p> Create a Stethoscope, either as a window, or placed on a given parent view.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>server<td class='argumentdesc'>
<p> A valid Server (either a local or the internal server), or <code class='code prettyprint lang-sc'>nil</code>, in which case the <code class='code prettyprint lang-sc'>Server.default</code> is used.<tr><td class='argumentname'>numChannels<td class='argumentdesc'>
<p> An integer. Default value is 2.<tr><td class='argumentname'>index<td class='argumentdesc'>
<p> The offset index. An Integer. Default is nil.<tr><td class='argumentname'>bufsize<td class='argumentdesc'>
<p> The size of the analysis buffer. Default is 4096. See also <a href="#-bufsize">-bufsize</a>.<tr><td class='argumentname'>zoom<td class='argumentdesc'>
<p> Horizontal maginification of the displayed wave. Default is 1. See also <a href="#-xZoom">-xZoom</a>.<tr><td class='argumentname'>rate<td class='argumentdesc'>
<p> \audio or \control. Default is \audio.<tr><td class='argumentname'>view<td class='argumentdesc'>
<p> The optional parent view. Default is nil. If nil, then it will open in its own Window.<tr><td class='argumentname'>bufnum<td class='argumentdesc'>
<p> The id number of the Buffer to analyze. Default value is nil. If nil, then a Buffer of size bufSize is allocated.
<p> discussion:  Example:<pre class='code prettyprint lang-sc'>s.boot
{SinOsc.ar([330,440], 0, 0.4)}.play;
Stethoscope(s,2);</pre>
</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*isValidServer' href='./../Overviews/Methods.html#isValidServer'>isValidServer</a> (<span class='argstr'>aServer</span>)</h3>
<div class='method'>
<p> Tests whether Stethoscope can operate on the given server (any local server. See <a href="./../Classes/Server.html#-isLocal">Server: -isLocal</a>).<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>aServer<td class='argumentdesc'>
<p> A <a href="./../Classes/Server.html">Server</a>.</table><h4>Returns:</h4>
<div class='returnvalue'>
<p>A Boolean.</div></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*ugenScopes' href='./../Overviews/Methods.html#ugenScopes'>ugenScopes</a> </h3>
<div class='method'>
<p> Returns an array of the running ugen scopes.<pre class='code prettyprint lang-sc'>s.boot
{[SinOsc.ar.scope,WhiteNoise.ar(0.5).scope]*0.1}.scope(2);
Stethoscope.ugenScopes; // returns the ugen scopes</pre>
</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*tileBounds' href='./../Overviews/Methods.html#tileBounds'>tileBounds</a> </h3>
<div class='method'>
<p> A utility method used by <a href="./../Classes/UGen.html#-scope">UGen: -scope</a> to tile scope windows.<h4>Returns:</h4>
<div class='returnvalue'>
<p>A Rect.</div></div><h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3><a class='anchor' name='Data'>Data</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-server' href='./../Overviews/Methods.html#server'>server</a> </h3>
<div class='method'>
<p> The server on which the scope operates.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-rate' href='./../Overviews/Methods.html#rate'>rate</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-rate' href='./../Overviews/Methods.html#rate'>rate</a> = <span class='argstr'>argRate: 'audio'</span></h3>
<div class='method'>
<p> Whether to operate on audio or control busses.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>argRate<td class='argumentdesc'>
<p> One of the two symbols: <code class='code prettyprint lang-sc'>\audio</code> or <code class='code prettyprint lang-sc'>\control</code>.</table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-index' href='./../Overviews/Methods.html#index'>index</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-index' href='./../Overviews/Methods.html#index'>index</a> = <span class='argstr'>i</span></h3>
<div class='method'>
<p> The starting index of the busses to scope.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>i<td class='argumentdesc'>
<p> An Integer.</table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-numChannels' href='./../Overviews/Methods.html#numChannels'>numChannels</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-numChannels' href='./../Overviews/Methods.html#numChannels'>numChannels</a> = <span class='argstr'>n</span></h3>
<div class='method'>
<p> The amount of adjacent busses to scope (from <a href="#-index">-index</a> on).<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>n<td class='argumentdesc'>
<p> An Integer.</table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-bufsize' href='./../Overviews/Methods.html#bufsize'>bufsize</a> </h3>
<div class='method'>
<p> Defines the maximum allowed <a href="#-cycle">-cycle</a>.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-cycle' href='./../Overviews/Methods.html#cycle'>cycle</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-cycle' href='./../Overviews/Methods.html#cycle'>cycle</a> = <span class='argstr'>val</span></h3>
<div class='method'><div class='note'><span class='notelabel'>NOTE:</span> Only available in Qt GUI</div>
<p> The exact scoping period, in signal frames. Reciprocal to what is also known as <em>sweep speed</em> in analog oscilloscopes. It is dynamically adjustable while the scope is running.
<p> Data from scoped signals will be accumulated into a buffer until it reaches <code class='code prettyprint lang-sc'>cycle</code> amount frames, at which point the buffering will immediatly restart. The view will repeatedly display the entire buffer; it may skip a cycle if the drawing is too slow to keep up with the speed of incoming data, but the cycle boundaries will never shift with respect to signals.
<p> If you are scoping a periodic signal, setting <code class='code prettyprint lang-sc'>cycle</code> to match the signal's period will keep the waveform locked in place.</div><h3><a class='anchor' name='Display'>Display</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-window' href='./../Overviews/Methods.html#window'>window</a> </h3>
<div class='method'>
<p> The (parent) Window of the scope.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-size' href='./../Overviews/Methods.html#size'>size</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-size' href='./../Overviews/Methods.html#size'>size</a> = <span class='argstr'>value</span></h3>
<div class='supmethod'>From superclass: <a href='./../Classes/Object.html'>Object</a></div>
<div class='method'>
<p> Sets the width and the height of the scope window.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>value<td class='argumentdesc'>
<p> An Integer (the window is square).</table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-toggleSize' href='./../Overviews/Methods.html#toggleSize'>toggleSize</a> </h3>
<div class='method'>
<p> Toggle between small and large size.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-zoom' href='./../Overviews/Methods.html#zoom'>zoom</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-zoom' href='./../Overviews/Methods.html#zoom'>zoom</a> = <span class='argstr'>val</span></h3>
<div class='method'>
<p> A synonym for <a href="#-xZoom">-xZoom</a>.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-xZoom' href='./../Overviews/Methods.html#xZoom'>xZoom</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-xZoom' href='./../Overviews/Methods.html#xZoom'>xZoom</a> = <span class='argstr'>val</span></h3>
<div class='method'>
<p> Magnifies the displayed wave horizontally to the given factor.
<p> This sets <a href="#-cycle">-cycle</a> to <code class='code prettyprint lang-sc'>1024 * xZoom.reciprocal</code>.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>val<td class='argumentdesc'>
<p> A Float.</table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-yZoom' href='./../Overviews/Methods.html#yZoom'>yZoom</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-yZoom' href='./../Overviews/Methods.html#yZoom'>yZoom</a> = <span class='argstr'>val</span></h3>
<div class='method'>
<p> Magnifies the displayed wave vertically to the given factor.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>val<td class='argumentdesc'>
<p> A Float.</table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-style' href='./../Overviews/Methods.html#style'>style</a><h3 class='imethodname'><span class='methprefix'>-</span><a name='-style' href='./../Overviews/Methods.html#style'>style</a> = <span class='argstr'>val</span></h3>
<div class='method'>
<p> The plotting style:<ul>
<li>0 = the channels are vertically spaced<li>1 = the channels are overlayed<li>2 = lissajou; the first two channels are used for 2D plotting (as streams of x and y coordinates).</ul>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>val<td class='argumentdesc'>
<p> One of the above Integers.</table></div><h3><a class='anchor' name='Operation'>Operation</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-run' href='./../Overviews/Methods.html#run'>run</a> </h3>
<div class='method'>
<p> Starts the scope, if not already running.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-quit' href='./../Overviews/Methods.html#quit'>quit</a> </h3>
<div class='method'>
<p> Closes the window, and cleans up any used synths and buffers.</div><h3><a class='anchor' name='Convenience'>Convenience</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-setProperties' href='./../Overviews/Methods.html#setProperties'>setProperties</a> (<span class='argstr'>numChannels</span>, <span class='argstr'>index</span>, <span class='argstr'>bufsize</span>, <span class='argstr'>zoom</span>, <span class='argstr'>rate</span>)</h3>
<div class='method'>
<p> Sets several properties at once: <a href="#-numChannels">-numChannels</a>, <a href="#-index">-index</a>, <a href="#-bufsize">-bufsize</a>, <a href="#-zoom">-zoom</a>, and <a href="#-rate">-rate</a>.</div><h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h3><a class='anchor' name='Undocumented instance methods'>Undocumented instance methods</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-bus' href='./../Overviews/Methods.html#bus'>bus</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-bus' href='./../Overviews/Methods.html#bus'>bus</a> = <span class='argstr'>b</span></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-doOnServerQuit' href='./../Overviews/Methods.html#doOnServerQuit'>doOnServerQuit</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-doOnServerTree' href='./../Overviews/Methods.html#doOnServerTree'>doOnServerTree</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-initStethoscope' href='./../Overviews/Methods.html#initStethoscope'>initStethoscope</a> (<span class='argstr'>server_</span>, <span class='argstr'>parent</span>, <span class='argstr'>bus_</span>, <span class='argstr'>bufsize_</span>, <span class='argstr'>cycle_</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-keyDown' href='./../Overviews/Methods.html#keyDown'>keyDown</a> (<span class='argstr'>char</span>, <span class='argstr'>mod</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-largeSize' href='./../Overviews/Methods.html#largeSize'>largeSize</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-largeSize' href='./../Overviews/Methods.html#largeSize'>largeSize</a> = value</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-scopeView' href='./../Overviews/Methods.html#scopeView'>scopeView</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-smallSize' href='./../Overviews/Methods.html#smallSize'>smallSize</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-smallSize' href='./../Overviews/Methods.html#smallSize'>smallSize</a> = value</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-stop' href='./../Overviews/Methods.html#stop'>stop</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-switchRate' href='./../Overviews/Methods.html#switchRate'>switchRate</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-toInputBus' href='./../Overviews/Methods.html#toInputBus'>toInputBus</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-toOutputBus' href='./../Overviews/Methods.html#toOutputBus'>toOutputBus</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-view' href='./../Overviews/Methods.html#view'>view</a> </h3>
<h2><a class='anchor' name='examples'>Examples</a></h2>
<h3><a class='anchor' name='A step-by-step example'>A step-by-step example</a></h3>
<pre class='code prettyprint lang-sc'>s.boot;
(
{
    SinOsc.ar([225, 450, 900], 0, 0.2)
    + LPF.ar(
        LFPulse.ar(226 * [1, 2, 5],[0,0.1,0.1],0.2, 0.2),
        MouseX.kr(20, 10000, 1)
        )
}.scope;
)

// server.scope only changes the properies explicitly given:

s.scope(numChannels:5);
s.scope(index:12);
s.scope(zoom:4);
s.scope(index:0);

s.scopeWindow.size = 600;
s.scopeWindow.size = 222;

// scoping buses:

a = Bus.audio(s, 4);
{ WhiteNoise.ar(0.2.dup(4)) }.play(s, a);

a.scope;

c = Bus.control(s, 3);
{ WhiteNoise.kr(1.dup(4) * MouseX.kr) }.play(s, c);

c.scope;

// note that scoping control rate buses shows block size interpolation (this is due to the
// fact that ScopeOut.kr doesn't work yet.)</pre>
<h3><a class='anchor' name='Embedded use'>Embedded use</a></h3>

<p>You can pass your own view in to add a stethoscope to it:<pre class='code prettyprint lang-sc'>w = Window.new("my own scope", Rect(20, 20, 400, 500));
w.view.decorator = FlowLayout(w.view.bounds);
c = Stethoscope.new(s, view:w.view);
w.onClose = { c.free }; // don't forget this
w.front;</pre>

<p><div class='doclink'>source: <a href='file:///usr/local/share/SuperCollider/HelpSource/Classes/Stethoscope.schelp'>/usr/local/share/SuperCollider/HelpSource/Classes/Stethoscope.schelp</a><br>link::Classes/Stethoscope::<br>sc version: 3.8dev</div></div></body></html>