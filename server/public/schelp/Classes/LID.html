<html><head><title>LID</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES</div>
<div id='categories'><a href='./../Browse.html#Platform>Linux'>Platform>Linux</a>, <a href='./../Browse.html#External Control>HID'>External Control>HID</a></div>
<h1>LID</h1>
<div id='summary'>Linux Input Device</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /usr/local/share/SuperCollider/SCClassLibrary/Platform/linux/<a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Platform/linux/LID.sc'>LID.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
<div id='related'>See also: <a href="./../Classes/HID.html">HID</a>, <a href="./../Classes/LIDInfo.html">LIDInfo</a>, <a href="./../Classes/LIDSlot.html">LIDSlot</a>, <a href="./../Classes/LIDGui.html">LIDGui</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'><li class='toc2'><a href='#First example:'>First example:</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc2'><a href='#Finding devices'>Finding devices</a></li>
<ul class='toc'><li class='toc3'><a href='#*findAvailable'>findAvailable</a> </li>
<li class='toc3'><a href='#*deviceRoot'>deviceRoot</a> </li>
<li class='toc3'><a href='#*available'>available</a> </li>
<li class='toc3'><a href='#*postAvailable'>postAvailable</a> </li>
<li class='toc3'><a href='#*findBy'>findBy</a> </li>
</ul><li class='toc2'><a href='#Opening devices'>Opening devices</a></li>
<ul class='toc'><li class='toc3'><a href='#*open'>open</a> </li>
<li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc3'><a href='#*openPath'>openPath</a> </li>
<li class='toc3'><a href='#*openAt'>openAt</a> </li>
<li class='toc3'><a href='#*openDevices'>openDevices</a> </li>
</ul><li class='toc2'><a href='#Adding functions to LID events'>Adding functions to LID events</a></li>
<ul class='toc'><li class='toc3'><a href='#*debug'>debug</a> </li>
<li class='toc3'><a href='#*action'>action</a> </li>
<li class='toc3'><a href='#*addRecvFunc'>addRecvFunc</a> </li>
<li class='toc3'><a href='#*removeRecvFunc'>removeRecvFunc</a> </li>
</ul><li class='toc2'><a href='#Managing the LID subsystem'>Managing the LID subsystem</a></li>
<ul class='toc'><li class='toc3'><a href='#*initializeLID'>initializeLID</a> </li>
<li class='toc3'><a href='#*running'>running</a> </li>
<li class='toc3'><a href='#*closeAll'>closeAll</a> </li>
</ul><li class='toc2'><a href='#Creating specs for devices'>Creating specs for devices</a></li>
<ul class='toc'><li class='toc3'><a href='#*register'>register</a> </li>
<li class='toc3'><a href='#*specs'>specs</a> </li>
<li class='toc3'><a href='#*mouseDeviceSpec'>mouseDeviceSpec</a> </li>
<li class='toc3'><a href='#*keyboardDeviceSpec'>keyboardDeviceSpec</a> </li>
</ul><li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
<li class='toc2'><a href='#Undocumented class methods'>Undocumented class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*all'>all</a> </li>
<li class='toc3'><a href='#*buildDeviceList'>buildDeviceList</a> </li>
<li class='toc3'><a href='#*buildDeviceTable'>buildDeviceTable</a> </li>
<li class='toc3'><a href='#*deviceList'>deviceList</a> </li>
<li class='toc3'><a href='#*deviceTable'>deviceTable</a> </li>
<li class='toc3'><a href='#*eventLoopIsRunning'>eventLoopIsRunning</a> </li>
</ul></ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-close'>close</a> </li>
<li class='toc3'><a href='#-isOpen'>isOpen</a> </li>
<li class='toc2'><a href='#Posting human readable information about the device'>Posting human readable information about the device</a></li>
<ul class='toc'><li class='toc3'><a href='#-postInfo'>postInfo</a> </li>
<li class='toc3'><a href='#-postSlots'>postSlots</a> </li>
<li class='toc3'><a href='#-dumpCaps'>dumpCaps</a> </li>
<li class='toc3'><a href='#-makeGui'>makeGui</a> </li>
</ul><li class='toc2'><a href='#Accessing slots'>Accessing slots</a></li>
<ul class='toc'><li class='toc3'><a href='#-slot'>slot</a> </li>
<li class='toc3'><a href='#-at'>at</a> </li>
<li class='toc3'><a href='#-spec'>spec</a> </li>
</ul><li class='toc2'><a href='#Adding functionality to the device'>Adding functionality to the device</a></li>
<ul class='toc'><li class='toc3'><a href='#-debug'>debug</a> </li>
<li class='toc3'><a href='#-closeAction'>closeAction</a> </li>
<li class='toc3'><a href='#-action'>action</a> </li>
</ul><li class='toc2'><a href='#Properties of the device'>Properties of the device</a></li>
<ul class='toc'><li class='toc3'><a href='#-slots'>slots</a> </li>
<li class='toc3'><a href='#-path'>path</a> </li>
<li class='toc3'><a href='#-info'>info</a> </li>
<li class='toc3'><a href='#-vendor'>vendor</a> </li>
<li class='toc3'><a href='#-product'>product</a> </li>
<li class='toc3'><a href='#-caps'>caps</a> </li>
</ul><li class='toc2'><a href='#Grabbing devices'>Grabbing devices</a></li>
<ul class='toc'><li class='toc3'><a href='#-grab'>grab</a> </li>
<li class='toc3'><a href='#-ungrab'>ungrab</a> </li>
<li class='toc3'><a href='#-isGrabbed'>isGrabbed</a> </li>
</ul><li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
<li class='toc2'><a href='#Undocumented instance methods'>Undocumented instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-dumpEvents'>dumpEvents</a> </li>
</ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'><li class='toc2'><a href='#Finding and opening the device'>Finding and opening the device</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Event actions (raw events)'>Event actions (raw events)</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Event actions (raw slot events)'>Event actions (raw slot events)</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Event actions (symbolic slot events)'>Event actions (symbolic slot events)</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#LED's'>LED's</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Closing devices'>Closing devices</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Opening devices with alternative deviceRoot'>Opening devices with alternative deviceRoot</a></li>
<ul class='toc'></ul></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>This class provides a way to access devices in the linux input layer, which supports many input devices (mouse, keyboard, joystick, gamepad, tablet) and busses (serial, PS/2, USB).<div class='note'><span class='notelabel'>NOTE:</span> For external HID devices it is recommended to use the <a href="./../Classes/HID.html">HID</a> interface, as described in <a href="./../Guides/Working_with_HID.html">Working with HID</a>, as it will ensure that your code is cross platform compatible. Only in cases where the raw HID interface does not provide access because the device needs a special driver (and this driver is provided in Linux kernel), or in case you want to access internal devices, you should use this class.</div>
<p>NOTE: if you have trouble opening a device, e.g. when you get the message <code class='code prettyprint lang-sc'>ERROR: LID: Could not open device</code>, please check the <a href="./../Guides/LID_permissions.html">LID permissions</a><h3><a class='anchor' name='First example:'>First example:</a></h3>
<pre class='code prettyprint lang-sc'>LID.findAvailable;
LID.postAvailable; // pick one that you want to open, and fill in the vendor and product id in the next line:
d = LID.open( 2, 10 ); // trackpoint

d.postInfo;
d.postSlots;

d.debug_( true ); // wiggle a little and see the data coming in

d.debug_( false );

// create a GUI:
d.makeGui;

// close the device (don't do this yet, if you want to excecute the further examples in this class)
d.close;</pre>
<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3><a class='anchor' name='Finding devices'>Finding devices</a></h3>

<p>An example of finding a device:<pre class='code prettyprint lang-sc'>LID.findAvailable;

LID.available;

LID.postAvailable;

// look for the one you want and find it:

LID.findBy( 2, 10 ) // by vendor and product</pre>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*findAvailable' href='./../Overviews/Methods.html#findAvailable'>findAvailable</a> (<span class='argstr'>name</span>)</h3>
<div class='method'>
<p>queries the operating system which LID devices are attached to the system and can be accessed. When using LID this is the first method you need to execute, before you can access any device.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>name<td class='argumentdesc'>
<p>The basic path to look for, by default this is <code class='code prettyprint lang-sc'>"event"</code>. See also <code class='code prettyprint lang-sc'>deviceRoot</code>.</table><h4>Returns:</h4>
<div class='returnvalue'>
<p>an IdentityDictionary of available devices</div></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*deviceRoot' href='./../Overviews/Methods.html#deviceRoot'>deviceRoot</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*deviceRoot' href='./../Overviews/Methods.html#deviceRoot'>deviceRoot</a> = value</h3>
<div class='method'>
<p>This is the base path where to look for devices. By default this is: <code class='code prettyprint lang-sc'>"/dev/input"</code>. With <code class='code prettyprint lang-sc'>findAvailable</code> this is extended with the <code class='code prettyprint lang-sc'>name</code> that is passed in, which has as a default <code class='code prettyprint lang-sc'>"event"</code>. Hence, by default we look for devices that match the path: <code class='code prettyprint lang-sc'>"/dev/input/event*"</code>.
<p>See below for some <a href="#Opening devices with alternative deviceRoot">Opening devices with alternative deviceRoot</a></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*available' href='./../Overviews/Methods.html#available'>available</a> </h3>
<div class='method'>
<p>A dictionary of available devices, or rather info about them in an instance of <a href="./../Classes/LIDInfo.html">LIDInfo</a>, populated by the method findAvailable<h4>Returns:</h4>
<div class='returnvalue'>
<p>an IdentityDictionary</div></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*postAvailable' href='./../Overviews/Methods.html#postAvailable'>postAvailable</a> </h3>
<div class='method'>
<p>posts a human readable list of available LID devices and their properties (see also <a href="./../Classes/LIDInfo.html">LIDInfo</a>)</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*findBy' href='./../Overviews/Methods.html#findBy'>findBy</a> (<span class='argstr'>vendorID</span>, <span class='argstr'>productID</span>, <span class='argstr'>path</span>, <span class='argstr'>version</span>, <span class='argstr'>physical</span>, <span class='argstr'>unique</span>)</h3>
<div class='method'>
<p>Find devices in the available device dictionary by specifying one or more characteristics of the device<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>vendorID<td class='argumentdesc'>
<p>The vendor ID of the device, this is a number encoded by the device itself.<tr><td class='argumentname'>productID<td class='argumentdesc'>
<p>The product ID of the device, this is a number encoded by the device itself.<tr><td class='argumentname'>path<td class='argumentdesc'>
<p>The path of the device, this is a path defined by the operating system.<tr><td class='argumentname'>version<td class='argumentdesc'>
<p>The version of the device.<tr><td class='argumentname'>physical<td class='argumentdesc'>
<p>The physical location of the device, this is a path defined by the operating system.<tr><td class='argumentname'>unique<td class='argumentdesc'>
<p>A unique identifier for the device, defined by the operating system.</table><h4>Returns:</h4>
<div class='returnvalue'>
<p>an IdentityDictionary of devices the match the search query, or nil if no arguments are given<pre class='code prettyprint lang-sc'>LID.findBy( 2 ); // by vendorID
LID.findBy( 2, 10 ) // by vendor and product
LID.findBy( productID: 10 );
LID.findBy( path: "/dev/input/event4" );
LID.findBy( version: 0 );
LID.findBy( physical: 'synaptics-pt/serio0/input0' )
LID.findBy( physical: "synaptics-pt/serio0/input0" ) // argument is converted to symbol for check
LID.findBy( unique: '' )
LID.findBy( unique: "" ) // argument is converted to symbol for check

// using all possible arguments:
LID.findBy( 2, 10, "/dev/input/event4", 0x0000, 'synaptics-pt/serio0/input0' )</pre>
</div></div><h3><a class='anchor' name='Opening devices'>Opening devices</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*open' href='./../Overviews/Methods.html#open'>open</a> (<span class='argstr'>vendorID</span>, <span class='argstr'>productID</span>, <span class='argstr'>path</span>, <span class='argstr'>version</span>, <span class='argstr'>physical</span>, <span class='argstr'>unique</span>)</h3>
<div class='method'>
<p>Open a device with a given vendorID and product ID. For arguments description see <a href="#findBy">findBy</a>. The method will call the method <code class='code prettyprint lang-sc'>findBy</code> and use the first available result as the device to open.<h4>Returns:</h4>
<div class='returnvalue'>
<p>The LID device - an instance of <code class='code prettyprint lang-sc'>LID</code>.</div></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>path</span>)</h3>
<div class='method'>
<p>Same as <code class='code prettyprint lang-sc'>LID.openPath</code>.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*openPath' href='./../Overviews/Methods.html#openPath'>openPath</a> (<span class='argstr'>path</span>)</h3>
<div class='method'>
<p>Open a device using its path in the operating system.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>path<td class='argumentdesc'>
<p>The path in the operating system, e.g. <code class='code prettyprint lang-sc'>"/dev/input/event4"</code></table><h4>Returns:</h4>
<div class='returnvalue'>
<p>The LID device - an instance of <code class='code prettyprint lang-sc'>LID</code>.</div></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*openAt' href='./../Overviews/Methods.html#openAt'>openAt</a> (<span class='argstr'>index</span>)</h3>
<div class='method'>
<p>Open a device using its index in the dictionary of available devices<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>index<td class='argumentdesc'>
<p>The index into the dictionary of available devices</table><h4>Returns:</h4>
<div class='returnvalue'>
<p>The LID device - an instance of <code class='code prettyprint lang-sc'>LID</code>.</div></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*openDevices' href='./../Overviews/Methods.html#openDevices'>openDevices</a> </h3>
<div class='method'>
<p>A dictionary of the opened devices<h4>Returns:</h4>
<div class='returnvalue'>
<p>an IdentityDictionary</div></div><h3><a class='anchor' name='Adding functions to LID events'>Adding functions to LID events</a></h3>

<p>Whenever data comes in from an opened LID device, there are two types of actions fired. An action for the incoming element data and an action for the device, indicating that there has been a change in one of the elements. In most cases you will want to use the first action; only in cases where the order of parsing the element data is important, you may want to use the second type - e.g. when dealing with very accurately timed button press combinations.
<p>There are three levels where you can set actions:<ul>
<li>at the global level - called for any LID device, for any slot<li>at the device level - called for the specific device, for any slot<li>at the slot level - called for the specific element of the specific device</ul>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*debug' href='./../Overviews/Methods.html#debug'>debug</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*debug' href='./../Overviews/Methods.html#debug'>debug</a> = <span class='argstr'>onoff: true</span></h3>
<div class='method'>
<p>When set to true, the incoming data from any opened LID device will be printed to the post window.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*action' href='./../Overviews/Methods.html#action'>action</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*action' href='./../Overviews/Methods.html#action'>action</a> = <span class='argstr'>function</span></h3>
<div class='method'>
<p>Set or get the action to be performed upon receiving element data from any device. The function will be passed the following arguments: the value (mapped between 0 and 1), the raw value, element usage page, the element usage, the element id, the device id, the device (an instance of LID).<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>function<td class='argumentdesc'>
<p>The function to be performed upon receiving element data from the device</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*addRecvFunc' href='./../Overviews/Methods.html#addRecvFunc'>addRecvFunc</a> (<span class='argstr'>function</span>)</h3>
<div class='method'>
<p>add a function to the internal FunctionList that will be evaluated whenever element data comes in from an open device. The arguments passed to the function are as defined above. Use this method if you want to add actions to LID functions from classes you write, so that you still keep the option to add an action on the fly from user code.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>function<td class='argumentdesc'>
<p>The function to be added to the list.</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*removeRecvFunc' href='./../Overviews/Methods.html#removeRecvFunc'>removeRecvFunc</a> (<span class='argstr'>function</span>)</h3>
<div class='method'>
<p>remove a function to the internal FunctionList that will be evaluated whenever data comes in from a device.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>function<td class='argumentdesc'>
<p>The function to remove from the list, this must be a reference to the Function that was originally added to the list</table></div><h3><a class='anchor' name='Managing the LID subsystem'>Managing the LID subsystem</a></h3>

<p>The following methods are used internally to initialize and finalize the LID subsystem, but in rare cases you may wish to manage these methods manually.<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*initializeLID' href='./../Overviews/Methods.html#initializeLID'>initializeLID</a> </h3>
<div class='method'>
<p>Initialize the LID subsystem, this method is called automatically when calling the method findAvailable.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*running' href='./../Overviews/Methods.html#running'>running</a> </h3>
<div class='method'>
<p>Indicates whether or not the LID subsystem is running.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*closeAll' href='./../Overviews/Methods.html#closeAll'>closeAll</a> </h3>
<div class='method'>
<p>This method is called automatically upon Shutdown, if the LID subsystem was initialized. It can be stopped manually, in order to save system resources. This method will close all opened LID devices.</div><h3><a class='anchor' name='Creating specs for devices'>Creating specs for devices</a></h3>

<p>Device specs are mappings between event codes and symbolic control names. New specs can be added to LID.specs via LID&gt;&gt;*register.<pre class='code prettyprint lang-sc'>// Add a mouse device spec for a Logitech trackball
LID.register('Logitech Trackball', LID.mouseDeviceSpec);

// Add a custom device spec for a Logitech gamepad
(
LID.register('Logitech WingMan RumblePad', (
    // key
    rumble: #[0x0001, 0x0102],    // rumble (toggles ff)
    mode: #[0x0001, 0x0103],    // mode (switches h and l)
    a: #[0x0001, 0x0120],        // button a
    b: #[0x0001, 0x0121],        // button b
    c: #[0x0001, 0x0122],        // button c
    x: #[0x0001, 0x0123],        // button x
    y: #[0x0001, 0x0124],        // button y
    z: #[0x0001, 0x0125],        // button z
    l: #[0x0001, 0x0126],        // left front button
    r: #[0x0001, 0x0127],        // right front button
    s: #[0x0001, 0x0128],        // button s
    // abs
    lx: #[0x0003, 0x0000],        // left joystick x
    ly: #[0x0003, 0x0001],        // left joystick y
    rx: #[0x0003, 0x0005],        // right joystick x
    ry: #[0x0003, 0x0006],        // right joystick y
    hx: #[0x0003, 0x0010],        // hat x
    hy: #[0x0003, 0x0011],        // hat y
    slider: #[0x0003, 0x0002]    // slider
));
)</pre>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*register' href='./../Overviews/Methods.html#register'>register</a> (<span class='argstr'>name</span>, <span class='argstr'>spec</span>)</h3>
<div class='method'>
<p>This will register the spec for the specified device. If the device was opened and did not use the spec before, it will use this spec. See also <a href="./../Classes/LID.html#spec">LID: spec</a>.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>name<td class='argumentdesc'>
<p>The name of the device to register it for.<tr><td class='argumentname'>spec<td class='argumentdesc'>
<p>The spec to be added. This should be an IdentityDictionary.</table></div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*specs' href='./../Overviews/Methods.html#specs'>specs</a> </h3>
<div class='method'>
<p>This returns the specs that have been registered.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*mouseDeviceSpec' href='./../Overviews/Methods.html#mouseDeviceSpec'>mouseDeviceSpec</a> </h3>
<div class='method'>
<p>This returns a default spec for a mouse device; any mouse, trackball, trackpad or trackpoint should be able to use this spec.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*keyboardDeviceSpec' href='./../Overviews/Methods.html#keyboardDeviceSpec'>keyboardDeviceSpec</a> </h3>
<div class='method'>
<p>This returns a default spec for a keyboard device; any keyboard or numpad should be able to use this spec.</div><h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h3><a class='anchor' name='Undocumented class methods'>Undocumented class methods</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*all' href='./../Overviews/Methods.html#all'>all</a> </h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc'>/usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc</a></div>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*buildDeviceList' href='./../Overviews/Methods.html#buildDeviceList'>buildDeviceList</a> (<span class='argstr'>name</span>)</h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc'>/usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc</a></div>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*buildDeviceTable' href='./../Overviews/Methods.html#buildDeviceTable'>buildDeviceTable</a> (<span class='argstr'>name</span>)</h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc'>/usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc</a></div>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*deviceList' href='./../Overviews/Methods.html#deviceList'>deviceList</a> </h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc'>/usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc</a></div>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*deviceTable' href='./../Overviews/Methods.html#deviceTable'>deviceTable</a> </h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc'>/usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc</a></div>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*eventLoopIsRunning' href='./../Overviews/Methods.html#eventLoopIsRunning'>eventLoopIsRunning</a> </h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc'>/usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc</a></div>
<h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-close' href='./../Overviews/Methods.html#close'>close</a> </h3>
<div class='method'>
<p>Close the LID device, closing a device is asynchronous. You can set a closeAction (see below), which will be performed when the device closes.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-isOpen' href='./../Overviews/Methods.html#isOpen'>isOpen</a> </h3>
<div class='method'>
<p>Returns true if the device is open, false if the device was closed.<pre class='code prettyprint lang-sc'>d.isOpen;
d.close;
d.isOpen;</pre>
</div><h3><a class='anchor' name='Posting human readable information about the device'>Posting human readable information about the device</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-postInfo' href='./../Overviews/Methods.html#postInfo'>postInfo</a> </h3>
<div class='method'>
<p>Post the LIDInfo of this device in a human readable format. See also <a href="./../Classes/LIDInfo.html">LIDInfo</a>.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-postSlots' href='./../Overviews/Methods.html#postSlots'>postSlots</a> </h3>
<div class='method'>
<p>Post information about all the slots of this device in a human readable format</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-dumpCaps' href='./../Overviews/Methods.html#dumpCaps'>dumpCaps</a> </h3>
<div class='method'>
<p>Post the list of available capabilities in a human readable format</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-makeGui' href='./../Overviews/Methods.html#makeGui'>makeGui</a> </h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Platform/linux/LIDGui.sc'>/usr/local/share/SuperCollider/SCClassLibrary/Platform/linux/LIDGui.sc</a></div>
<div class='method'>
<p>Create a <a href="./../Classes/LIDGui.html">LIDGui</a> for the device.</div><h3><a class='anchor' name='Accessing slots'>Accessing slots</a></h3>

<p>Device capabilities are reported as event type and event code mappings. Event type and event code constants can be found in <code class='code prettyprint lang-sc'>/usr/include/linux/input.h</code><h3 class='imethodname'><span class='methprefix'>-</span><a name='-slot' href='./../Overviews/Methods.html#slot'>slot</a> (<span class='argstr'>evtType</span>, <span class='argstr'>evtCode</span>)</h3>
<div class='method'>
<p>Access a slot by its evtType and evtCode. See also <a href="./../Classes/LIDSlot.html">LIDSlot</a><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>evtType<td class='argumentdesc'>
<p>The eventType to access the slot.<tr><td class='argumentname'>evtCode<td class='argumentdesc'>
<p>The eventCode to access the slot.</table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-at' href='./../Overviews/Methods.html#at'>at</a> (<span class='argstr'>controlName</span>)</h3>
<div class='method'>
<p>If a <code class='code prettyprint lang-sc'>spec</code> is defined for this device, then you can use a controlName to look up a slot.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-spec' href='./../Overviews/Methods.html#spec'>spec</a> (<span class='argstr'>forceLookup: false</span>)</h3>
<div class='method'>
<p>The IdentityDictionary that maps labels for slots to slot indices.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>forceLookup<td class='argumentdesc'>
<p>If set to true, this will force the dictionary to be reinitialised with the registered spec for this device.</table></div><h3><a class='anchor' name='Adding functionality to the device'>Adding functionality to the device</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-debug' href='./../Overviews/Methods.html#debug'>debug</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-debug' href='./../Overviews/Methods.html#debug'>debug</a> = <span class='argstr'>onoff</span></h3>
<div class='method'>
<p>When set to true, the incoming data from this LID device will be printed to the post window.<pre class='code prettyprint lang-sc'>d.debug_( true );
d.debug_( false );</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-closeAction' href='./../Overviews/Methods.html#closeAction'>closeAction</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-closeAction' href='./../Overviews/Methods.html#closeAction'>closeAction</a> = value</h3>
<div class='method'>
<p>Function to be performed when device is closed.<pre class='code prettyprint lang-sc'>d.closeAction_( { "hey, I got closed!".postln; } );
d.close;</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-action' href='./../Overviews/Methods.html#action'>action</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-action' href='./../Overviews/Methods.html#action'>action</a> = value</h3>
<div class='method'>
<p>Set or get the action to be performed upon receiving data from the device. The function will be passed in the evtType, the evtCode, the value (mapped according to the slot's spec), and the raw value.<pre class='code prettyprint lang-sc'>d.action_( { arg ...args; ("my action" + args ).postln; } );
d.action_( nil );</pre>
</div><h3><a class='anchor' name='Properties of the device'>Properties of the device</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-slots' href='./../Overviews/Methods.html#slots'>slots</a> </h3>
<div class='method'>
<p>An IdentityDictionary holding all the slots, i.e. controls, of the device</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-path' href='./../Overviews/Methods.html#path'>path</a> </h3>
<div class='method'>
<p>Retrieve the path of this device<pre class='code prettyprint lang-sc'>d.path;</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-info' href='./../Overviews/Methods.html#info'>info</a> </h3>
<div class='method'>
<p>Retrieve the LIDInfo of this device<pre class='code prettyprint lang-sc'>d.info;</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-vendor' href='./../Overviews/Methods.html#vendor'>vendor</a> </h3>
<div class='method'>
<p>Retrieve the vendor id of this device<pre class='code prettyprint lang-sc'>d.vendor;</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-product' href='./../Overviews/Methods.html#product'>product</a> </h3>
<div class='method'>
<p>Retrieve the product id of this device<pre class='code prettyprint lang-sc'>d.product;</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-caps' href='./../Overviews/Methods.html#caps'>caps</a> </h3>
<div class='method'>
<p>The list of available capabilities.</div><h3><a class='anchor' name='Grabbing devices'>Grabbing devices</a></h3>

<p>Given proper permissions, devices can be grabbed to prevent use in other applications (including X). Be careful when grabbing mouse or keyboard, as you will not be able to use them for normal interaction (like typing code or moving the mouse pointer) anymore!<pre class='code prettyprint lang-sc'>d[\b].action = { d.ungrab };
d.grab;

d.isGrabbed;</pre>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-grab' href='./../Overviews/Methods.html#grab'>grab</a> (<span class='argstr'>flag: true</span>)</h3>
<div class='method'>
<p>Grab the device to use exclusively for SC.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-ungrab' href='./../Overviews/Methods.html#ungrab'>ungrab</a> </h3>
<div class='method'>
<p>Release the device to use it no longer exclusively for SC.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-isGrabbed' href='./../Overviews/Methods.html#isGrabbed'>isGrabbed</a> </h3>
<div class='method'>
<p>Check whether the device is grabbed.</div><h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h3><a class='anchor' name='Undocumented instance methods'>Undocumented instance methods</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-dumpEvents' href='./../Overviews/Methods.html#dumpEvents'>dumpEvents</a> </h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc'>/usr/local/share/SuperCollider/SCClassLibrary/deprecated/3.7/linux/deprecated-3.7.sc</a></div>
<h2><a class='anchor' name='examples'>Examples</a></h2>
<h3><a class='anchor' name='Finding and opening the device'>Finding and opening the device</a></h3>
<pre class='code prettyprint lang-sc'>LID.findAvailable;
LID.postAvailable; // pick one that you want to open, and fill in the vendor and product id in the next line:
d = LID.open( 2, 10 ); // trackpoint

d.postInfo;
d.postSlots;

d.debug_( true ); // wiggle a little and see the data coming in
d.debug_( false );</pre>
<h3><a class='anchor' name='Event actions (raw events)'>Event actions (raw events)</a></h3>

<p>The device's 'action' instance variable can be used for event notifications. it is passed the event type, code and current value.<pre class='code prettyprint lang-sc'>(
d.action = { | evtType, evtCode, evtValue |
    [evtType.asHexString(4), evtCode.asHexString(4), evtValue].postln
}
)

d.action = nil;</pre>

<p>If a device is detached LID will detect this, and close the device. It will execute a closeAction, which can be defined by the user:<pre class='code prettyprint lang-sc'>d.closeAction = { "device was detached".postln; };</pre>
<h3><a class='anchor' name='Event actions (raw slot events)'>Event actions (raw slot events)</a></h3>

<p>When 'action' is nil, actions can be bound to specific events.<pre class='code prettyprint lang-sc'>(
d.slot(0x0002, 0x0001).action = { | slot |
    [slot.type.asHexString(4), slot.code.asHexString(4), slot.value].postln;
}
)</pre>

<p>Relative slots can have deltaActions:<pre class='code prettyprint lang-sc'>(
d.slot(0x0002, 0x0001).deltaAction = { | slot |
    [slot.type.asHexString(4), slot.code.asHexString(4), slot.delta].postln;
}
)</pre>
<h3><a class='anchor' name='Event actions (symbolic slot events)'>Event actions (symbolic slot events)</a></h3>

<p>When a device spec was registered for a given device name, slot actions can be assigned by using the symbolic control name.<pre class='code prettyprint lang-sc'>    d[\x].action = { | slot | [\x, slot.value].postln };</pre>
<h3><a class='anchor' name='LED's'>LED's</a></h3>

<p>some devices have LEDs which can be turned on and off. These show up with d.caps as events of type 0x0011<pre class='code prettyprint lang-sc'>d = LID("/dev/input/event0");
// LED's can be turned on:
d.setLEDState( 0x0, 1 )
// (LED 0x0 should be available on any keyboard)
// and off:
d.setLEDState( 0x0, 0 )
d.close;

// setLEDState( evtCode, evtValue ): value should be 1 or 0</pre>
<h3><a class='anchor' name='Closing devices'>Closing devices</a></h3>
<pre class='code prettyprint lang-sc'>d.close;
LID.closeAll;</pre>
<h3><a class='anchor' name='Opening devices with alternative deviceRoot'>Opening devices with alternative deviceRoot</a></h3>

<p>Input devices are accessed through device nodes, typically <code class='code prettyprint lang-sc'>/dev/input/event[0-9]</code>. When using a userspace daemon like udev, meaningful names can be assigned to devices.
<p>raw device name:<pre class='code prettyprint lang-sc'>d = LID("/dev/input/event4");</pre>

<p>symbolic device name<pre class='code prettyprint lang-sc'>d = LID("/dev/input/trackball");</pre>

<p>device name relative to LID.deviceRoot<pre class='code prettyprint lang-sc'>d = LID("gamepad");</pre>

<p>build a list of the available devices:<pre class='code prettyprint lang-sc'>LID.findAvailable;</pre>

<p>buildDeviceList builds a table of the devices found in LID.deviceRoot+"/event", trying to open all that it finds, looking up its name and closing them again. The result is returned and can later be accessed by LID.deviceList. You can query another name than "/event" by passing an argument. (the search will be: LID.deviceRoot++"/"++name++"*")<pre class='code prettyprint lang-sc'>LID.findAvailable( "mouse" );</pre>

<p><div class='note'><span class='notelabel'>NOTE:</span> this is likely to give the info that the devices could not be opened, as "mouse" uses another interface (you can of course access mice via the "event" interface)</div><div class='note'><span class='notelabel'>NOTE:</span> if you cannot open the devices at all, please look in the helpfile for: <a href="./../Guides/LID_permissions.html">LID permissions</a></div>
<p><div class='doclink'>source: <a href='file:///usr/local/share/SuperCollider/HelpSource/Classes/LID.schelp'>/usr/local/share/SuperCollider/HelpSource/Classes/LID.schelp</a><br>link::Classes/LID::<br>sc version: 3.8dev</div></div></body></html>