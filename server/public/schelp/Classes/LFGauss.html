<html><head><title>LFGauss</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES</div>
<div id='categories'><a href='./../Browse.html#UGens>Generators>Deterministic'>UGens>Generators>Deterministic</a></div>
<h1>LFGauss</h1>
<div id='summary'>Gaussian function oscillator</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /usr/local/share/SuperCollider/SCClassLibrary/Common/Audio/<a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Common/Audio/Osc.sc'>Osc.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/UGen.html">UGen</a> : <a href="../Classes/AbstractFunction.html">AbstractFunction</a> : <a href="../Classes/Object.html">Object</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*ar'>ar</a>  <a href='#*kr'>kr</a> </li>
<li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
<li class='toc2'><a href='#Undocumented instance methods'>Undocumented instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-minval'>minval</a> </li>
<li class='toc3'><a href='#-range'>range</a> </li>
</ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'><li class='toc2'><a href='#Some plots'>Some plots</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Some calculations'>Some calculations</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Sound examples'>Sound examples</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#Gabor Grain'>Gabor Grain</a></li>
<ul class='toc'></ul></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>A non-band-limited gaussian function oscillator. Output ranges from <strong>minval</strong> to 1.
<p>LFGauss implements the formula:<pre class='code prettyprint lang-sc'>f(x) = exp(squared(x - iphase) / (-2.0 * squared(width)))</pre>

<p>where x is to vary in the range -1 to 1 over the period dur. <strong>minval</strong> is the initial value at -1.<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*ar' href='./../Overviews/Methods.html#ar'>ar</a> (<span class='argstr'>duration: 1</span>, <span class='argstr'>width: 0.1</span>, <span class='argstr'>iphase: 0</span>, <span class='argstr'>loop: 1</span>, <span class='argstr'>doneAction: 0</span>)</h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*kr' href='./../Overviews/Methods.html#kr'>kr</a> (<span class='argstr'>duration: 1</span>, <span class='argstr'>width: 0.1</span>, <span class='argstr'>iphase: 0</span>, <span class='argstr'>loop: 1</span>, <span class='argstr'>doneAction: 0</span>)</h3>
<div class='method'>
<p><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>duration<td class='argumentdesc'>
<p>duration of one full cycle ( for <strong>freq</strong> input: <strong>dur = 1 / freq</strong> )<tr><td class='argumentname'>width<td class='argumentdesc'>
<p>relative width of the bell. Best to keep below 0.25 when used as envelope. (default: 0.1)<tr><td class='argumentname'>iphase<td class='argumentdesc'>
<p>initial offset (default: 0)<tr><td class='argumentname'>loop<td class='argumentdesc'>
<p>if loop is &gt; 0, UGen oscillates. Otherwise it calls doneAction after one cycle (default: 1)<tr><td class='argumentname'>doneAction<td class='argumentdesc'>
<p>doneAction, which is evaluated after cycle completes (2 frees the synth, default: 0). See <a href="./../Reference/UGen-doneActions.html">UGen done-actions</a> for more detail.</table></div><h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h3><a class='anchor' name='Undocumented instance methods'>Undocumented instance methods</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-minval' href='./../Overviews/Methods.html#minval'>minval</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-range' href='./../Overviews/Methods.html#range'>range</a> (<span class='argstr'>min: 0</span>, <span class='argstr'>max: 1</span>)</h3>
<h2><a class='anchor' name='examples'>Examples</a></h2>
<h3><a class='anchor' name='Some plots'>Some plots</a></h3>
<pre class='code prettyprint lang-sc'>s.boot ;

// a 0.1 second grain
{ LFGauss.ar(0.1, 0.12) }.plot(0.1);

// shifting left
{ LFGauss.ar(0.1, 0.12, -1, loop: 0) }.plot(0.1);

// moving further away from the center
{ LFGauss.ar(0.1, 0.12, 2) }.plot(0.2);

// several grains
{ LFGauss.ar(0.065, 0.12, 0, loop: 1) }.plot(0.3);</pre>
<h3><a class='anchor' name='Some calculations'>Some calculations</a></h3>

<p>assuming iphase = 0:
<p><strong>minval</strong> for a given width: <code class='code prettyprint lang-sc'>minval = exp(-1.0 / (2.0 * squared(width)))</code>
<p><strong>width</strong> for a given minval: <code class='code prettyprint lang-sc'>width = sqrt(-1.0 / log(minval))</code>
<p><strong>width at half maximum (0.5)</strong>: <code class='code prettyprint lang-sc'>(2 * sqrt(2 * log(2)) * width) = ca. 2.355 * width</code><pre class='code prettyprint lang-sc'>// minval for a width of 0.1:
(exp(1 / (-2.0 * squared(0.1)))) // 2e-22

// maximum width for a beginning at -60dB:
// we want the beginning small enough to avoid clicks
sqrt(-1 / ( 2 * log(-60.dbamp))) // 0.269

// minval for width of 0.25
(exp(1 / (-2.0 * squared(0.25)))).ampdb // -70dB

// maximum is always 1:
{ LFGauss.ar(0.1, XLine.kr(1, 0.03, 1), 0, loop: 1) }.plot(1);

// a gauss curve in sclang:
(0..1000).normalize(-1, 1).collect(_.gaussCurve(1, 0, 0.1)).plot;


// rescale the function to the range 0..1
(
{
var width = XLine.kr(0.04, 1.0, 1);
var min = (exp(1.0 / (-2.0 * squared(width))));
var gauss = LFGauss.ar(0.1, width, loop: 1);
gauss.linlin(min, 1, 0, 1);
}.plot(1)
);

// range does the same implicitly
(
{
var width = XLine.kr(0.04, 1.0, 1);
LFGauss.ar(0.1, width, loop: 1).range(0, 1);
}.plot(1)
);</pre>
<h3><a class='anchor' name='Sound examples'>Sound examples</a></h3>
<pre class='code prettyprint lang-sc'>// modulating duration
{ LFGauss.ar(XLine.kr(0.1, 0.001, 10), 0.03) * 0.2 }.play;

// modulating width, freq 60 Hz
{ LFGauss.ar(1/60, XLine.kr(0.1, 0.001, 10)) * 0.2 }.play;

// modulating both: x position is frequency, y is width factor.
// note the artefacts due to alisasing at high frequencies
{ LFGauss.ar(MouseX.kr(1/8000, 0.1, 1), MouseY.kr(0.001, 0.1, 1)) * 0.1 }.play;

// LFGauss as amplitude modulator
{ LFGauss.ar(MouseX.kr(1, 0.001, 1), 0.1) * SinOsc.ar(1000) * 0.1 }.play;

// modulate iphase
{ LFGauss.ar(0.001, 0.2, [0, MouseX.kr(-1, 1)]).sum * 0.2 }.scope;

// for very small width we are "approaching" a dirac function
{ LFGauss.ar(0.01, SampleDur.ir * MouseX.kr(10, 3000, 1)) * 0.2 }.play;

// dur and width can be modulated at audio rate
(
{     var dur = SinOsc.ar(MouseX.kr(2, 1000, 1) * [1, 1.1]).range(0.0006, 0.01);
    var width = SinOsc.ar(0.5 * [1, 1.1]).range(0.01, 0.3);
    LFGauss.ar(dur, width) * 0.2
}.play
);


// several frequecies and widths combined
(
{
    var mod = LFGauss.ar(MouseX.kr(1, 0.07, 1), 1 * (MouseY.kr(1, 3) ** (-1..-6)));
    var carr = SinOsc.ar(200 * (1.3 ** (0..5)));
    (carr * mod).sum * 0.1
}.play;
)

// test spectrum
(
{
    var son = LeakDC.ar(LFGauss.ar(0.005, 0.2));
    BPF.ar(son * 3, MouseX.kr(60, 2000, 1), 0.05)
}.play;
)</pre>
<h3><a class='anchor' name='Gabor Grain'>Gabor Grain</a></h3>
<pre class='code prettyprint lang-sc'>(
var freq = 1000;
var ncycles = 10;
var width = 0.25;
var dur = ncycles / freq;
{

    var env = LFGauss.ar(dur, width, loop: 0, doneAction: 2);
    var son = FSinOsc.ar(freq, 0.5pi, env);
    son
}.plot(dur);
)


(
SynthDef(\gabor, { |out, i_freq = 440, i_sustain = 1, i_pan = 1, i_amp = 0.1, i_width = 0.25 |
    var env = LFGauss.ar(i_sustain, i_width, loop: 0, doneAction: 2);
    var son = FSinOsc.ar(i_freq, 0.5pi, env);
    OffsetOut.ar(out, Pan2.ar(son, i_pan, i_amp));

}).add;
)

// modulating various parameters
(
Pdef(\x,
    Pbind(
        \instrument, \gabor,
        \freq, Pbrown(step:0.01).linexp(0, 1, 100, 14000),
        \dur, Pbrown().linexp(0, 1, 0.004, 0.02),
        \legato, Pbrown(1, 3, 0.1, inf),
        \pan, Pwhite() * Pbrown()
    )
).play
)

// modulating width only
(
Pdef(\x,
    Pbind(
        \instrument, \gabor,
        \freq, 1000,
        \dur, 0.01,
        \width, Pseg(Pseq([0.25, 0.002], inf), 10, \exp),
        \legato, 2
    )
).play
)

// compare with sine grain.
(
SynthDef(\gabor, { |out, i_freq = 440, i_sustain = 1, i_pan = 1, i_amp = 0.1, i_width=0.25 |
    var env = EnvGen.ar(Env.sine(i_sustain * i_width), doneAction: 2);
    var son = FSinOsc.ar(i_freq, 0.5pi, env);
    OffsetOut.ar(out, Pan2.ar(son, i_pan, i_amp));

}).add;
)</pre>

<p><div class='doclink'>source: <a href='file:///usr/local/share/SuperCollider/HelpSource/Classes/LFGauss.schelp'>/usr/local/share/SuperCollider/HelpSource/Classes/LFGauss.schelp</a><br>link::Classes/LFGauss::<br>sc version: 3.8dev</div></div></body></html>