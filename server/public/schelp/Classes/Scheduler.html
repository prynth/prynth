<html><head><title>Scheduler</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES</div>
<div id='categories'><a href='./../Browse.html#Scheduling'>Scheduling</a></div>
<h1>Scheduler</h1>
<div id='summary'>schedules functions to be evaluated in the future</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /usr/local/share/SuperCollider/SCClassLibrary/Common/Core/<a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Common/Core/Clock.sc'>Clock.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Object.html">Object</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-play'>play</a> </li>
<li class='toc3'><a href='#-sched'>sched</a> </li>
<li class='toc3'><a href='#-schedAbs'>schedAbs</a> </li>
<li class='toc3'><a href='#-advance'>advance</a> </li>
<li class='toc3'><a href='#-seconds'>seconds</a> </li>
<li class='toc3'><a href='#-isEmpty'>isEmpty</a> </li>
<li class='toc3'><a href='#-clear'>clear</a> </li>
<li class='toc3'><a href='#-queue'>queue</a> </li>
<li class='toc3'><a href='#-recursive'>recursive</a> </li>
<li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>A Scheduler can be used to schedule and reschedule functions to be evaluated at a specific time-point. The Scheduler's time needs to be advanced manually. In most cases you will probably want to use a Clock (e.g. <a href="./../Classes/TempoClock.html">TempoClock</a>, <a href="./../Classes/SystemClock.html">SystemClock</a>, <a href="./../Classes/AppClock.html">AppClock</a>) instead, in which the march of time is handled for you.<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>clock</span>, <span class='argstr'>drift: false</span>, <span class='argstr'>recursive: true</span>)</h3>
<div class='method'><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>clock<td class='argumentdesc'>
<p>A clock, like SystemClock.<tr><td class='argumentname'>drift<td class='argumentdesc'>
<p>If <code class='code prettyprint lang-sc'>true</code>, <a href="#-sched">-sched</a> will schedule tasks relative to the current absolute time ( <a href="./../Classes/Process.html#*elapsedTime">Main.elapsedTime</a> ), otherwise to the current logical time of the scheduler ( <a href="#-seconds">-seconds</a> ).<tr><td class='argumentname'>recursive<td class='argumentdesc'>
<p>Sets <a href="#-recursive">-recursive</a>.</table></div><h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-play' href='./../Overviews/Methods.html#play'>play</a> (<span class='argstr'>task</span>)</h3>
<div class='method'>
<p>Schedules the task immediately. Equivalent to <code class='code prettyprint lang-sc'>sched(0, task)</code>.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-sched' href='./../Overviews/Methods.html#sched'>sched</a> (<span class='argstr'>delta</span>, <span class='argstr'>item</span>)</h3>
<div class='method'>
<p>Schedule the task at <code class='code prettyprint lang-sc'>delta</code> seconds relative to the current time, as defined by the <code class='code prettyprint lang-sc'>drift</code> argument of the <a href="#*new">constructor</a>.
<p>Regardless of what time a task is scheduled, it will only be awaken the next time <a href="#-seconds">-seconds</a> is set.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-schedAbs' href='./../Overviews/Methods.html#schedAbs'>schedAbs</a> (<span class='argstr'>time</span>, <span class='argstr'>item</span>)</h3>
<div class='method'>
<p>Schedule the task at absolute <code class='code prettyprint lang-sc'>time</code> in seconds.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-advance' href='./../Overviews/Methods.html#advance'>advance</a> (<span class='argstr'>delta</span>)</h3>
<div class='method'>
<p>Advance the current logical time by <code class='code prettyprint lang-sc'>delta</code> seconds. Has same effect as setting <a href="#-seconds">-seconds</a>.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-seconds' href='./../Overviews/Methods.html#seconds'>seconds</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-seconds' href='./../Overviews/Methods.html#seconds'>seconds</a> = <span class='argstr'>newSeconds</span></h3>
<div class='method'>
<p>The current logical time of the scheduler.
<p>Setting a new time will wake up (evaluate) any tasks scheduled within that time; a task that returns a new time will be rescheduled accordingly.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-isEmpty' href='./../Overviews/Methods.html#isEmpty'>isEmpty</a> </h3>
<div class='method'>
<p>Returns whether the scheduling queue is empty.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-clear' href='./../Overviews/Methods.html#clear'>clear</a> </h3>
<div class='method'>
<p>Clears the scheduling queue</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-queue' href='./../Overviews/Methods.html#queue'>queue</a> </h3>
<div class='method'><h4>Returns:</h4>
<div class='returnvalue'>
<p>The instance of <a href="./../Classes/PriorityQueue.html">PriorityQueue</a> used internally as scheduling queue.</div></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-recursive' href='./../Overviews/Methods.html#recursive'>recursive</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-recursive' href='./../Overviews/Methods.html#recursive'>recursive</a> = value</h3>
<div class='method'>
<p>If waking up items results in new items being scheduled, but some of them are already expired (scheduled at current time or earlier), this variable determines whether those items will be awaken as well in the same call to -seconds.</div><h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>
<pre class='code prettyprint lang-sc'>a = Scheduler(SystemClock);

a.sched(3, { "now it is 3 seconds.".postln; nil });
a.sched(5, { "now it is 5 seconds.".postln; nil });
a.sched(1, { "now it is 1 second.".postln; nil });

a.advance(0.5);
a.advance(0.5);
a.advance(2);
a.advance(2);

// the beats, seconds and clock are passed into the task function:
a.sched(1, { arg beats, secs, clock; [beats, secs, clock].postln });
a.advance(1);

// the scheduling is relative to "now":
a.sched(3, { "now it was 3 seconds.".postln });
a.sched(5, { "now it was 5 seconds.".postln });
a.sched(1, { "now it was 1 second.".postln });

a.advance(0.5);
a.advance(0.5);
a.advance(2);
a.advance(2);

// play a Routine or a task:
a.play(Routine { 5.do { arg i; i.postln; 1.yield } });
a.advance(0.9);</pre>
<pre class='code prettyprint lang-sc'>// scheduling tasks
(
x = Scheduler(TempoClock.default);

Task {
    inf.do { |i|
        ("next " ++ i ++ " in task." + Main.elapsedTime).postln;
        0.5.wait;
    }
}.play(x);
)

x.advance(0.1);
x.seconds;
x.advance(5);
x.seconds;

(
Routine {
    loop { x.advance(0.1); 0.1.wait };
}.play;
)

(
Task { 5.do {
    x.advance(1);
    2.0.rand.wait;
    }
}.play;
)

x.advance(8.1);

Pbind(\degree, Pseries(0, 2, 8), \dur, 0.25).play(x);

(
Task { 5.do {
    x.advance(0.20);
    1.0.wait;
    }
}.play;
)</pre>

<p><div class='doclink'>source: <a href='file:///usr/local/share/SuperCollider/HelpSource/Classes/Scheduler.schelp'>/usr/local/share/SuperCollider/HelpSource/Classes/Scheduler.schelp</a><br>link::Classes/Scheduler::<br>sc version: 3.8dev</div></div></body></html>