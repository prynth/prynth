<!doctype html><html lang='en'><head><title>SCImage | SuperCollider 3.9.3 Help</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script>
var helpRoot = './..';
var scdoc_title = 'SCImage';
var scdoc_sc_version = '3.9.3';
</script>
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
</head>
<body onload='fixTOC();prettyPrint()'>
<div id='toc'>
<div id='toctitle'>SCImage:</div>
<span class='toc_search'>Filter: <input id='toc_search'></span><ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc3'><a href='#*color'>color</a> </li>
<li class='toc3'><a href='#*open'>open</a> </li>
<li class='toc3'><a href='#*openURL'>openURL</a> </li>
<li class='toc3'><a href='#*fromImage'>fromImage</a> </li>
<li class='toc3'><a href='#*fromWindow'>fromWindow</a> </li>
<li class='toc2'><a href='#Class%20variables%20and%20attributes'>Class variables and attributes</a></li>
<ul class='toc'><li class='toc3'><a href='#*formats'>formats</a> </li>
<li class='toc3'><a href='#*compositingOperations'>compositingOperations</a> </li>
<li class='toc3'><a href='#*interpolations'>interpolations</a> </li>
<li class='toc3'><a href='#*closeAllPlotWindows'>closeAllPlotWindows</a> </li>
</ul><li class='toc2'><a href='#Inherited%20class%20methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc2'><a href='#commons%20/%20general%20attributes'>commons / general attributes</a></li>
<ul class='toc'><li class='toc3'><a href='#-width'>width</a> </li>
<li class='toc3'><a href='#-height'>height</a> </li>
<li class='toc3'><a href='#-setSize'>setSize</a> </li>
<li class='toc3'><a href='#-bounds'>bounds</a> </li>
<li class='toc3'><a href='#-free'>free</a> </li>
<li class='toc3'><a href='#-scalesWhenResized'>scalesWhenResized</a> </li>
<li class='toc3'><a href='#-url'>url</a> </li>
<li class='toc3'><a href='#-accelerated'>accelerated</a> </li>
<li class='toc3'><a href='#-interpolation'>interpolation</a> </li>
</ul><li class='toc2'><a href='#saving%20and%20archiving'>saving and archiving</a></li>
<ul class='toc'><li class='toc3'><a href='#-write'>write</a> </li>
</ul><li class='toc2'><a href='#rendering'>rendering</a></li>
<ul class='toc'><li class='toc3'><a href='#-plot'>plot</a> </li>
<li class='toc3'><a href='#-lockFocus'>lockFocus</a> </li>
<li class='toc3'><a href='#-unlockFocus'>unlockFocus</a> </li>
<li class='toc3'><a href='#-draw'>draw</a> </li>
<li class='toc3'><a href='#-drawStringAtPoint'>drawStringAtPoint</a> </li>
<li class='toc3'><a href='#-drawAtPoint'>drawAtPoint</a> </li>
<li class='toc3'><a href='#-drawInRect'>drawInRect</a> </li>
<li class='toc3'><a href='#-tileInRect'>tileInRect</a> </li>
</ul><li class='toc2'><a href='#Instance%20Methods%20/%20accessing%20and%20setting%20pixels'>Instance Methods / accessing and setting pixels</a></li>
<ul class='toc'><li class='toc3'><a href='#-setPixel'>setPixel</a> </li>
<li class='toc3'><a href='#-getPixel'>getPixel</a> </li>
<li class='toc3'><a href='#-setColor'>setColor</a> </li>
<li class='toc3'><a href='#-getColor'>getColor</a> </li>
<li class='toc3'><a href='#-pixels'>pixels</a> </li>
<li class='toc3'><a href='#-loadPixels'>loadPixels</a> </li>
<li class='toc3'><a href='#-setPixels'>setPixels</a> </li>
</ul><li class='toc2'><a href='#Instance%20Methods%20/%20Attributes%20for%20SCImageFilter%20support'>Instance Methods / Attributes for SCImageFilter support</a></li>
<ul class='toc'><li class='toc3'><a href='#-applyFilters'>applyFilters</a> </li>
<li class='toc3'><a href='#-filteredWith'>filteredWith</a> </li>
<li class='toc3'><a href='#-filters'>filters</a> </li>
<li class='toc3'><a href='#-addFilter'>addFilter</a> </li>
<li class='toc3'><a href='#-removeFilter'>removeFilter</a> </li>
<li class='toc3'><a href='#-flatten'>flatten</a> </li>
<li class='toc3'><a href='#-invert'>invert</a> </li>
<li class='toc3'><a href='#-crop'>crop</a> </li>
</ul><li class='toc2'><a href='#Instance%20Methods%20/%20Attributes%20for%20SCImageKernel%20support'>Instance Methods / Attributes for SCImageKernel support</a></li>
<ul class='toc'><li class='toc3'><a href='#-applyKernel'>applyKernel</a> </li>
</ul><li class='toc2'><a href='#Inherited%20instance%20methods'>Inherited instance methods</a></li>
</ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'><li class='toc2'><a href='#Views%20addition'>Views addition</a></li>
<ul class='toc'></ul></ul></ul></div><div class='contents'>
<div id='menubar'></div>
<div class='header'>
<div id='label'>
<span id='folder'>Classes</span>
 | <span id='categories'><a href='./../Browse.html#GUI'>GUI</a>&#8201;&gt;&#8201;<a href='./../Browse.html#GUI>Views'>Views</a></span>
</div><h1>SCImage</h1>
<div id='summary'>image component</div>
</div>
<div class='subheader'>
<div id='filename'>Location: <b>NOT INSTALLED!</b></div>
<div id='related'>See also: <a href="./../Classes/SCImageFilter.html">SCImageFilter</a>, <a href="./../Classes/SCImageKernel.html">SCImageKernel</a></div>
</div>
<h2><a class='anchor' name='description'>Description</a></h2>

<p>SCImage is an image component for the macOS SuperCollider client. SCImage is currently a wrapper around different models : you can use it for bitmap operations, image embedding for custom UI and for more advanced image processing as applying filters and kernels, both provided with the CoreImage framework.
<p>SCImage currently supports most formats including tiff, bmp, gif, jpeg, png, tga...ect.. for reading. But for for writing it supports only those in <code class='code prettyprint lang-sc'>SCImage.formats</code>.<div class='note'><span class='notelabel'>NOTE:</span> <a href="./../Classes/GUI.html">GUI</a> Issue : since it is macOS only, be sure to call <code class='code prettyprint lang-sc'>GUI.cocoa</code> before any SCImage.call</div><h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='*new' href='./../Overviews/Methods.html#new'>new</a></h3>
<div class='method'>
<p>Creates a new SCImage instance. multiple stands here for multiple arguments.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>multiple<td class='argumentdesc'>
<p>May be a...<ul>
<li><a href="./../Classes/Number.html">Number</a> to create an <strong>empty</strong> image of size multiple as width and height<pre class='code prettyprint lang-sc'>i = SCImage.new(400);        // Create a 400x400 pixels SCimage.
i.dump;
i.free;

i = SCImage.new(400,200);    // Create a 400x200 pixels SCimage.
i.dump;
i.free;</pre>

<p><li><a href="./../Classes/Point.html">Point</a> to create an <strong>empty</strong> image of size multiple.x as width and multiple.y as height<pre class='code prettyprint lang-sc'>i = SCImage.new(400@200);    // Create a 400x200 pixels SCimage.
i.dump;
i.free;</pre>

<p><li><a href="./../Classes/String.html">String</a> to create an image from a <strong>local file</strong> or from an <strong>URL</strong> (http://, ftp://, <a href="file:///)">file:///)</a><pre class='code prettyprint lang-sc'>//    Path string
i = SCImage.new("/Library/Desktop Pictures/Ripples Blue.jpg");
[i.width, i.height].postln;
i.plot;
i.free;
//    URL string - http:// or ftp:// - blocks until image is downloaded
i = SCImage.new("http://www.google.com/intl/en_ALL/images/logo.gif");
i.plot;
i.url;
i.free;</pre>
</ul>
</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='*color' href='./../Overviews/Methods.html#color'>color</a></h3>
<div class='method'>
<p>Creates a new SCImage instance filled with the specified color.<pre class='code prettyprint lang-sc'>i = SCImage.color(400, 200, Color.blue(0.9,0.1));
i.plot(freeOnClose:true);</pre>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>args<td class='argumentdesc'>
<p>multiple arguments. the last argument should be a valid <a href="./../Classes/Color.html">Color</a></table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='*open' href='./../Overviews/Methods.html#open'>open</a></h3>
<div class='method'>
<p>Creates a new SCImage instance from the local file at <strong>path</strong>.<pre class='code prettyprint lang-sc'>(
i = SCImage.open("/Library/Desktop Pictures/Ripples Blue.jpg");
i.plot(freeOnClose:true);
i.url.postln;
)</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='*openURL' href='./../Overviews/Methods.html#openURL'>openURL</a></h3>
<div class='method'>
<p>Creates a new SCImage instance from a valid image at the specified URL <strong>path</strong>.<pre class='code prettyprint lang-sc'>i = SCImage.openURL("file:///Library/Desktop%20Pictures/Ripples%20Blue.jpg");
i.url;
w = i.plot(freeOnClose:true);</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='*fromImage' href='./../Overviews/Methods.html#fromImage'>fromImage</a></h3>
<div class='method'>
<p>Creates a new SCImage instance from another SCImage.<pre class='code prettyprint lang-sc'>i = SCImage.new(SCDoc.helpSourceDir +/+ "images/vduck2.jpg");
j = SCImage.fromImage(i);
i.dump;
j.dump;
[i, j].do(_.plot);
[i, j].do(_.free);</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='*fromWindow' href='./../Overviews/Methods.html#fromWindow'>fromWindow</a></h3>
<div class='method'>
<p>Creates a new SCImage from a portion of a SCWindow. this can be used to capture either a window or a specific SCView.<pre class='code prettyprint lang-sc'>// WINDOW Example:
// First create a window and draw inside of it
(
    w = SCWindow.new;
    w.front; // comment this to copy offscreen window
    w.view.background_(Color.white);
    w.drawFunc = {
        SCPen.translate(100, 100);
        10.do{
            // set the Color
            SCPen.color = Color.blue(rrand(0.0, 1), rrand(0.0, 0.5));
            SCPen.addWedge((100.rand)@(100.rand), rrand(10, 100), 2pi.rand, 2pi.rand);
            SCPen.perform([\stroke, \fill].choose);
        }
    };
    w.refresh;
)

// then grab the window
(
    i = SCImage.fromWindow(w);
    w.close;
    i.plot(freeOnClose:true);
)

// VIEW Capture Example:
// First create a window and add some views inside of it
(
    w = SCWindow.new.front;
    b = [10, 80].asSpec;
    c = SCNumberBox(w, Rect(20, 20, 60, 40));
    a = SCSlider(w, Rect(20, 80, 100, 40))
        .focusColor_(Color.red(alpha:0.2))
        .action_({
            c.value_(b.map(a.value).round(0.01))
    // round the float so it will fit in the SCNumberBox
            });
)

// then grab the window
(
    i = SCImage.fromWindow(w, a.bounds);
    w.close;
    i.plot(freeOnClose:true);
)</pre>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>window<td class='argumentdesc'>
<p>the SCWindow object.<tr><td class='argumentname'>rect<td class='argumentdesc'>
<p>optional. the constrained rect to capture inside the SCWindow. By default, it is the window size.</table></div><h3><a class='anchor' name='Class%20variables%20and%20attributes'>Class variables and attributes</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='*formats' href='./../Overviews/Methods.html#formats'>formats</a></h3>
<div class='method'>
<p>returns all the valid image formats as an <a href="./../Classes/Array.html">Array</a><pre class='code prettyprint lang-sc'>SCImage.formats;</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='*compositingOperations' href='./../Overviews/Methods.html#compositingOperations'>compositingOperations</a></h3>
<div class='method'>
<p>returns all the valid compositing operations you can use when drawing an SCImage as an <a href="./../Classes/Array.html">Array</a><pre class='code prettyprint lang-sc'>SCImage.compositingOperations;</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='*interpolations' href='./../Overviews/Methods.html#interpolations'>interpolations</a></h3>
<div class='method'>
<p>returns an <a href="./../Classes/Array.html">Array</a> of the different levels of interpolation you can specify when drawing an SCImage.<pre class='code prettyprint lang-sc'>SCImage.interpolations;</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='*closeAllPlotWindows' href='./../Overviews/Methods.html#closeAllPlotWindows'>closeAllPlotWindows</a></h3>
<div class='method'>
<p>close all the SCImage plot windows currently opened.</div><h3><a class='anchor' name='Inherited%20class%20methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3><a class='anchor' name='commons%20/%20general%20attributes'>commons / general attributes</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-width' href='./../Overviews/Methods.html#width'>width</a></h3>
<div class='method'>
<p>returns or set the width of the receiver</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-height' href='./../Overviews/Methods.html#height'>height</a></h3>
<div class='method'>
<p>returns or set the height of the receiver</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setSize' href='./../Overviews/Methods.html#setSize'>setSize</a></h3>
<div class='method'>
<p>set the size of the receiver</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-bounds' href='./../Overviews/Methods.html#bounds'>bounds</a></h3>
<div class='method'>
<p>returns the bounds of the receiver.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-free' href='./../Overviews/Methods.html#free'>free</a></h3>
<div class='method'>
<p>deallocate the receiver. this method is useful if you want to manage and reclaim yourself resources. otherwise you do not need to call this method since each object is automatically garbage collected.<pre class='code prettyprint lang-sc'>i = SCImage.new("/Library/Desktop Pictures/Ripples Blue.jpg");
SCImage.all;
i.free;
SCImage.all;</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-scalesWhenResized' href='./../Overviews/Methods.html#scalesWhenResized'>scalesWhenResized</a></h3>
<div class='method'>
<p>flag to tell or set if the receiver should update its bitmap representation to scale when a resize operation if performed<pre class='code prettyprint lang-sc'>(
    i = SCImage.new("/Library/Desktop Pictures/Ripples Blue.jpg");
    i.bounds.postln; // getting the dimensions
    w =i.plot;
)

// changing the size of an image
(
    i.scalesWhenResized_(true);
    i.setSize(400, 400 / (i.width / i.height));
    a =i.plot;
)
(
a.close; w.close; i.free;
)</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-url' href='./../Overviews/Methods.html#url'>url</a></h3>
<div class='method'>
<p>returns or set the url of the receiver. Returning only if any where supplied at creation, otherwise returns nil. Setting may be used for different purpose but try to supply a valid one since it is used for archiving the image as an object.<pre class='code prettyprint lang-sc'>i = SCImage.new("http://www.google.com/intl/en_ALL/images/logo.gif");
i.url;
i.plot;
i.free;</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-accelerated' href='./../Overviews/Methods.html#accelerated'>accelerated</a></h3>
<div class='method'>
<p>if true, the receiver currently use the CoreImage model, possibly caching its data on GPU, if not the bitmap model. Set it to switch representation.<div class='warning'><span class='warninglabel'>WARNING:</span> this method should never be used directly unless you know perfectly what you are doing. Since the SCImage will switch internally and manage itself the syncronization between representations.</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-interpolation' href='./../Overviews/Methods.html#interpolation'>interpolation</a></h3>
<div class='method'>
<p>get or set the level of interpolation used when rendering the image - it has not effect when the SCImage is accelerated. see <a href="#*interpolations">*interpolations</a> for a valid range of values.<pre class='code prettyprint lang-sc'>(
i = SCImage.new(SCDoc.helpSourceDir +/+ "images/vduck2.jpg");
w = i.plot;
i.interpolation;            // get the image current interpolation mode
)

(
i.interpolation = 'none';        // experiment with interpolation modes
w.refresh;
)

(
i.interpolation = 'low';
w.refresh;
)

(
i.interpolation = 1;            // same as 'low'
w.refresh;
)

(
i.interpolation = 'high';
w.refresh;
)

(
i.interpolation = 'default';
w.refresh;
)

(
i.accelerated_(true);
i.interpolation = 'none'; // does not work on coreimage accelerated image
w.refresh;
)

i.free;</pre>
</div><h3><a class='anchor' name='saving%20and%20archiving'>saving and archiving</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-write' href='./../Overviews/Methods.html#write'>write</a></h3>
<div class='method'>
<p>write the SCImage to a file.<pre class='code prettyprint lang-sc'>i = SCImage.new("/Library/Desktop Pictures/Ripples Blue.jpg");
i.dump
i.write("~/Desktop/my_image.png");
i.free;

//    storeOn / asCompileString
i = SCImage.new("/Library/Desktop Pictures/Ripples Blue.jpg");
i.url;
i.asCompileString;
i.writeArchive("~/Desktop/my_image.scd".standardizePath);

i.free;
i = nil;

Document.open("~/Desktop/my_image.scd".standardizePath);

i = Object.readArchive("~/Desktop/my_image.scd".standardizePath);
i.plot;
i.free;</pre>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>path<td class='argumentdesc'>
<p>the location where to save it<tr><td class='argumentname'>format<td class='argumentdesc'>
<p>(optional) format to use. see SCImage.formats for supported formats. If nil, it will get the format depending on the path extension.</table></div><h3><a class='anchor' name='rendering'>rendering</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-plot' href='./../Overviews/Methods.html#plot'>plot</a></h3>
<div class='method'>
<p>plots the image in a SCWindow.<pre class='code prettyprint lang-sc'>i = SCImage.new("/Library/Desktop Pictures/Ripples Blue.jpg");
w = i.plot;
w.close;

w = i.plot(showInfo:false);
w.close;
i.free;

// other option - image will be automatically freed when closed
SCImage.new("/Library/Desktop Pictures/Ripples Blue.jpg").plot("Hello", freeOnClose:true);</pre>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>name<td class='argumentdesc'>
<p>the title of the SCWindow. may be nil.<tr><td class='argumentname'>bounds<td class='argumentdesc'>
<p>the bounds of the SCWindow. may be nil.<tr><td class='argumentname'>freeOnClose<td class='argumentdesc'>
<p>flag to tell if the SCWindow should free the SCImage when closed.<tr><td class='argumentname'>background<td class='argumentdesc'>
<p>additional background to apply to the SCWindow. may be useful for artifacts due to alpha / compositing...<tr><td class='argumentname'>showInfo<td class='argumentdesc'>
<p>shows pixel coordinates while the mouse is over the image's plot window.</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-lockFocus' href='./../Overviews/Methods.html#lockFocus'>lockFocus</a></h3>
<div class='method'>
<p>sets the receiver as the current graphic context. So you can use SCPen to draw inside of it.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-unlockFocus' href='./../Overviews/Methods.html#unlockFocus'>unlockFocus</a></h3>
<div class='method'>
<p>restore the graphic context state. the receiver is not anymore the current graphic context.<pre class='code prettyprint lang-sc'>(
    j = SCImage.new(400,300);

    j.lockFocus;

        SCPen.translate(100, 100);
        1000.do{
            // set the Color
            SCPen.color = Color.green(rrand(0.0, 1), rrand(0.0, 0.5));
            SCPen.addAnnularWedge(
                (100.rand)@(100.rand),
                rrand(10, 50),
                rrand(51, 100),
                2pi.rand,
                2pi.rand
            );
            SCPen.perform([\stroke, \fill].choose);
        };

    j.unlockFocus;
)

j.plot;
j.write("~/Desktop/my_drawing.png"); // write the image
j.free;</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-draw' href='./../Overviews/Methods.html#draw'>draw</a></h3>
<div class='method'>
<p>shortcut for drawing inside an image. equivalent to :<ul>
<li>receiver.lockFocus<li>aFunction<li>receiver.unlockFocus</ul>

<p><pre class='code prettyprint lang-sc'>(
    j = SCImage.new(400,300);
    j.draw({ arg image;

        SCPen.translate(100, 100);
        1000.do {
            // set the Color
            SCPen.color = Color.green(rrand(0.0, 1), rrand(0.0, 0.5));
            SCPen.addAnnularWedge(
                (100.rand)@(100.rand),
                rrand(10, 50),
                rrand(51, 100),
                2pi.rand,
                2pi.rand
            );
            SCPen.perform([\stroke, \fill].choose);
        };
    }).plot(freeOnClose:true);
)

//    String drawing support on the image
//    drawStringAtPoint(string, point, font, color);
(
    j = SCImage.new(150,50);
    j.draw({ arg bounds;
        j.drawStringAtPoint("Hello, world!", 10@10, Font("Lucida Grande", 24), Color.black);
    });
)

j.plot;
j.write("~/Desktop/hello.png");
j.free;</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-drawStringAtPoint' href='./../Overviews/Methods.html#drawStringAtPoint'>drawStringAtPoint</a></h3>
<div class='method'>
<p>renders *correctly* a String inside an SCImage :) <code class='code prettyprint lang-sc'>// to fix to have a compliant interface</code><pre class='code prettyprint lang-sc'>(
    var width, height, tgHeight, ratio, str, font, color, strb, targetWidth=400, shadowColor, run = true;
    shadowColor = Color.black;

    color = Color.gray(0.8);
    str = "I Love Pixels";
    font = Font("Monaco", 10);
    strb = str.bounds(font);
    width = strb.width;
    height = strb.height;
    ratio = height / width;
    i = SCImage(width@(height));
    i.draw({|bb|
        SCPen.smoothing_(false);
        i.drawStringAtPoint(str, 0@0, font, color);
    });
    i.interpolation_(\none);
    tgHeight = targetWidth * ratio;
    w = SCWindow.new("", Rect(400,400, 450, 150)).drawFunc_({
        SCPen.setShadow(2@2, 0.4, color:Color.red);
        i.drawInRect(Rect(5,5,targetWidth, tgHeight));
    });

    w.view.background_(Color.white);
    w.onClose_({run = false; i.free;});
    w.front;
)</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-drawAtPoint' href='./../Overviews/Methods.html#drawAtPoint'>drawAtPoint</a></h3>
<div class='method'>
<p>render the image or a portion of it in the current graphic context.<pre class='code prettyprint lang-sc'>(
    var operation='sourceOver', fraction=1.0, i, w;

    i = SCImage.new(
    //    "http://supercollider.sourceforge.net/theme/sc01/icon.supercollider.gif"
    //    SCDoc.helpSourceDir +/+ "images/duck_alpha.png"
        SCDoc.helpSourceDir +/+ "images/Swamp.png"
    );

    w = SCWindow.new("SCImage", Rect(120, 400, 360, 180)).front;

    SCSlider.new(w, Rect(10, 150, 150, 16))
        .value_(1.0)
        .action_({ arg sl;
            fraction = sl.value;
            w.refresh;
        });

    SCPopUpMenu.new(w, Rect(170, 150, 100, 16))
        .items_( SCImage.compositingOperations.collect({ arg i; i.asString }) )
        .value_(2)
        .action_({ arg pm;
            operation = SCImage.compositingOperations.at(pm.value);
            w.refresh;
        });

    w.onClose_({ i.free }); // free the image when the window is closed

    w.drawFunc_({

        i.drawAtPoint(10@10, nil, operation, fraction);

    });
)</pre>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>point<td class='argumentdesc'>
<p>the <a href="./../Classes/Point.html">Point</a> where to draw it<tr><td class='argumentname'>fromRect<td class='argumentdesc'>
<p>the portion of the SCImage to use<tr><td class='argumentname'>operation<td class='argumentdesc'>
<p>the compositing operation to use. <code class='code prettyprint lang-sc'>'sourceOver'</code> is the default.<tr><td class='argumentname'>fraction<td class='argumentdesc'>
<p>the opacity to use, ranging from 0.0 (fully transparent) to 1.0 (fully opaque)</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-drawInRect' href='./../Overviews/Methods.html#drawInRect'>drawInRect</a></h3>
<div class='method'>
<p>render the image or a portion of it in a specified rectangle of the current graphic context. This may stretch the image depending on the destination rect.<pre class='code prettyprint lang-sc'>(
    i = SCImage.new(
        // "http://supercollider.sourceforge.net/theme/sc01/icon.supercollider.gif"
        SCDoc.helpSourceDir +/+ "images/icon.supercollider.png"
    );

    w = SCWindow.new("SCImage", Rect(120, 400, 360, 180)).front;
    w.onClose_({ i.free }); // free the image when the window is closed
    w.drawFunc_({
        i.drawInRect(Rect(10,10,50,50), Rect(10,10,50,50), 2, 1.0); // only a section
    });
)</pre>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>rect<td class='argumentdesc'>
<p>the <a href="./../Classes/Rect.html">Rect</a> where to draw it<tr><td class='argumentname'>fromRect<td class='argumentdesc'>
<p>the portion of the SCImage to use<tr><td class='argumentname'>operation<td class='argumentdesc'>
<p>the compositing operation to use. <code class='code prettyprint lang-sc'>'sourceOver'</code> is the default.<tr><td class='argumentname'>fraction<td class='argumentdesc'>
<p>the opacity to use, ranging from 0.0 (fully transparent) to 1.0 (fully opaque)</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-tileInRect' href='./../Overviews/Methods.html#tileInRect'>tileInRect</a></h3>
<div class='method'>
<p>tile the image or a portion of it in a specified rectangle of the current graphic context. This may stretch the image depending on the destination rect.<pre class='code prettyprint lang-sc'>(
    i = SCImage.new(
        // "http://supercollider.sourceforge.net/theme/sc01/icon.supercollider.gif"
        SCDoc.helpSourceDir +/+ "images/icon.supercollider.png"
    );

    w = SCWindow.new("SCImage", Rect(120, 400, 360, 180)).front;
    w.onClose_({ i.free }); // free the image when the window is closed
    w.drawFunc_({
        i.tileInRect(w.view.bounds, nil, 2, 1.0); // all image contents
    });
)</pre>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>rect<td class='argumentdesc'>
<p>the <a href="./../Classes/Rect.html">Rect</a> where to draw it<tr><td class='argumentname'>fromRect<td class='argumentdesc'>
<p>the portion of the SCImage to use<tr><td class='argumentname'>operation<td class='argumentdesc'>
<p>the compositing operation to use. <code class='code prettyprint lang-sc'>'sourceOver'</code> is the default.<div class='note'><span class='notelabel'>NOTE:</span> Compositing operations are currently disabled for tileInRect</div><tr><td class='argumentname'>fraction<td class='argumentdesc'>
<p>the opacity to use, ranging from 0.0 (fully transparent) to 1.0 (fully opaque)</table></div><h3><a class='anchor' name='Instance%20Methods%20/%20accessing%20and%20setting%20pixels'>Instance Methods / accessing and setting pixels</a></h3>
<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setPixel' href='./../Overviews/Methods.html#setPixel'>setPixel</a></h3>
<div class='method'>
<p>fill a pixel located at x @ y.<pre class='code prettyprint lang-sc'>i = SCImage.color(60, 60, Color.blue(0.1,0.1));
w = i.plot;
i.setPixel([255,0,0,255].asRGBA, 0, 0); // setting red
w.refresh;
("pixel at 0 @ 0:"+i.getPixel(0,0).rgbaArray).postln;
i.free;</pre>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>rgbaInteger<td class='argumentdesc'>
<p>an 32 bit <a href="./../Classes/Integer.html">Integer</a> containing color information packed as 8bit RGBA</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-getPixel' href='./../Overviews/Methods.html#getPixel'>getPixel</a></h3>
<div class='method'>
<p>retrieve the pixel value at x @ y as a RGBA integer<pre class='code prettyprint lang-sc'>// A simple example on how to manipulate pixels with SCImage
b = Int32Array[
    Integer.fromRGBA(255,0,0,255), // red
    Integer.fromRGBA(0,255,0,255), // green
    Integer.fromRGBA(0,0,255,255), // blue
    Integer.fromRGBA(255,0,255,255) // purple
];

b[0].red; // 255 see Integer.red
b[0].green; // 0 see Integer.green
b[0].blue; // 0 see Integer.blue
b[0].alpha; // 255 see Integer.alpha

a = SCImage.new(b.size@1).pixels_(b).interpolation_(\none);
a.plot;


// Set + Get
a.setPixel([255, 0, 255, 128].asRGBA /* create an Integer from 0-255 integer rgba value */, 0, 0).plot;
p = a.getPixel(0,0);

p.red; // 255
p.green; // 0
p.blue; // 255
p.alpha; // 128

// now another important example
a.setPixel([255, 0, 255, 0].asRGBA, 1, 0).plot; // clear color -&gt; alpha is 0
p = a.getPixel(1,0);

p.red; // you expect 255 but you get 0 ??? Why = because SCImage uses premultiplied color component value internally
// meaning all Red, Green, and Blue component are premultiplied by the alpha
// if alpha is 0 you get 0 back for all components.

p.green; // 0
p.blue; // 0
p.alpha; // 0

p = a.getColor(1,0); // more explicit - but same here</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setColor' href='./../Overviews/Methods.html#setColor'>setColor</a></h3>
<div class='method'>
<p>fill the pixel located at x @ y with the specified <strong>color</strong>.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-getColor' href='./../Overviews/Methods.html#getColor'>getColor</a></h3>
<div class='method'>
<p>retrieve the pixel value at x @ y as a <a href="./../Classes/Color.html">Color</a>.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-pixels' href='./../Overviews/Methods.html#pixels'>pixels</a></h3>
<div class='method'>
<p>retrieve or set all the pixels of the receiver.<div class='note'><span class='notelabel'>NOTE:</span> Carefull: the returned Array is a <a href="./../Classes/Int32Array.html">Int32Array</a> of size receiver.width * receiver.height containing all pixel values as 32bit Integer</div><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>array<td class='argumentdesc'>
<p>an <a href="./../Classes/Int32Array.html">Int32Array</a> of size receiver.width * receiver.height containing all pixel values as 32bit Integer</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-loadPixels' href='./../Overviews/Methods.html#loadPixels'>loadPixels</a></h3>
<div class='method'>
<p>load all the pixels of the receiver in an array. it is better and faster to call this function instead of <a href="#-pixels">-pixels</a> if you plan to retrieve frequently the pixel data (since it won't allocate a new array everytime !)<pre class='code prettyprint lang-sc'>// exec one line at a time
i = SCImage.new(
    // "http://supercollider.sourceforge.net/theme/sc01/icon.supercollider.gif"
    SCDoc.helpSourceDir +/+ "images/icon.supercollider.png"
);

// first grab the pixels
p = i.pixels;

// do some mods - here invert
i.invert;

// reload directly in my array - do not need to call i.pixels again
i.loadPixels(p);
i.free;
p;</pre>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>array<td class='argumentdesc'>
<p>the array that will be filled. Should be an <a href="./../Classes/Int32Array.html">Int32Array</a> of size receiver.width * receiver.height.<tr><td class='argumentname'>region<td class='argumentdesc'>
<p>the targeted rectangular region. (nil by default, meaning full size)<tr><td class='argumentname'>start<td class='argumentdesc'>
<p>the start index of the array.</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-setPixels' href='./../Overviews/Methods.html#setPixels'>setPixels</a></h3>
<div class='method'>
<p>set the pixels in a specific portion of the receiver.<pre class='code prettyprint lang-sc'>(
    i = SCImage.new(20@20);
    i.pixels_(
        Int32Array.fill(i.width * i.height, {
            Integer.fromRGBA(255.rand,127.rand,255.rand,255)
        })
    );
    //i.interpolation_(\none); // uncomment to see the difference
    w = i.plot(freeOnClose:true);
    i.pixels.postln;
)

(
    i = SCImage.color(50@50, Color.white);
    i.setPixels(
        Int32Array.fill(20*20,{Integer.fromRGBA(255.rand, 127.rand, 255.rand, 255)}),
        Rect(10,10,20,20)
    );
    i.interpolation_(\none); // uncomment to see the difference
    w = i.plot(freeOnClose:true);
    i.pixels.postln;
)</pre>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>array<td class='argumentdesc'>
<p>an <a href="./../Classes/Int32Array.html">Int32Array</a> of size <strong>rect</strong>.width * <strong>rect</strong>.height containing all pixel values as 32bit Integer<tr><td class='argumentname'>rect<td class='argumentdesc'>
<p>a rectangle defining the portion to update in the receiver. By default <strong>rect</strong> is nil, meaning full image size.<tr><td class='argumentname'>start<td class='argumentdesc'>
<p>the array start index.</table></div><h3><a class='anchor' name='Instance%20Methods%20/%20Attributes%20for%20SCImageFilter%20support'>Instance Methods / Attributes for SCImageFilter support</a></h3>

<p>see <a href="./../Classes/SCImageFilter.html">SCImageFilter</a> for more info<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-applyFilters' href='./../Overviews/Methods.html#applyFilters'>applyFilters</a></h3>
<div class='method'>
<p>apply an array of <a href="./../Classes/SCImageFilter.html">SCImageFilter</a> to the image. this should be considered as an in place operation, meaning the SCImage is altered after it.<pre class='code prettyprint lang-sc'>// ******** Built In CoreImage Generators ********
// Generators are not filters, they actually create an image but do not need an input image
// you just have to create an image of a new size
// ** The Simple Random Filter **
(
f = SCImageFilter.new(\CIRandomGenerator);
a = SCImage.new(500@500);
a.applyFilters(f);
w = a.plot(freeOnClose:true, background:Color.black);
a.bounds.postln;
)

// ** The StarShine example **
(
var width=500, height=500, centerVector;

centerVector = [ width*0.5, height*0.5 ];
a = SCImage.new(500@500);
f = SCImageFilter.new(\CIStarShineGenerator);

f.center_(centerVector);
f.radius_(width*0.05);
f.color_(Color.blue);
f.crossWidth_(2.0);
f.crossAngle_(0.0);
f.crossOpacity_(-4.0);

a.applyFilters(f);
w = a.plot(freeOnClose:true, background:Color.gray); // change background to see
)


// ** Starshine + Pixellate + ZoomBlur **
(
var width=500, height=500, centerVector;

centerVector = [ width*0.5, height*0.5 ];
a = SCImage.new(500@500);

f = SCImageFilter.new(\CIStarShineGenerator);
g = SCImageFilter.new(\CIPixellate);
h = SCImageFilter.new(\CIZoomBlur);

f.center_(centerVector);
f.radius_(width*0.05);
f.color_(Color.blue);
f.crossWidth_(2.0);
f.crossAngle_(0.0);
f.crossOpacity_(-4.0);
g.center_(centerVector);
h.center_(centerVector);
h.amount_(50);

a.applyFilters([f, g, h]);
w = a.plot(freeOnClose:true, background:Color.black);
)</pre>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>filters<td class='argumentdesc'>
<p>a SCImageFilter or an array of <a href="./../Classes/SCImageFilter.html">SCImageFilter</a> to be applied<tr><td class='argumentname'>crop<td class='argumentdesc'>
<p>the crop region to finally use. This may be required for extending bounds since some SCImageFilter / CoreImageFilters require to set a wider region (to be applied correctly) or may create a huge image. Setting crop to nil sets no crop region. In case the current maximum size of a filtered SCImage is 4096 / 4096. Any larger size will be clipped. by default crop is constrained to the receiver bounds.<tr><td class='argumentname'>region<td class='argumentdesc'><div class='note'><span class='notelabel'>NOTE:</span> supported only in macOS 10.5 and later.</div>
<p>option to constrain the filter to a specific region IN the SCImage.</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-filteredWith' href='./../Overviews/Methods.html#filteredWith'>filteredWith</a></h3>
<div class='method'>
<p>returns a new SCImage, copy of the receiver filtered with an array of SCImageFilter. arguments are the same as <a href="#-applyFilters">-applyFilters</a> (except for <strong>region</strong>).<div class='note'><span class='notelabel'>NOTE:</span> Beware: you are responsible for freeing the newly created SCImage !!!</div></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-filters' href='./../Overviews/Methods.html#filters'>filters</a></h3>
<div class='method'>
<p>filters is the instance variable that holds the array of SCImageFilter attached to the receiver. This is a convenient for applying filters out place and changing the SCImageFilter's attributes. see <a href="#-addFilter">-addFilter</a>, <a href="#-removeFilter">-removeFilter</a>
<p>see <a href="./../Classes/SCImageFilter.html">SCImageFilter</a> for an example on how to use the <strong>filters</strong> array.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-addFilter' href='./../Overviews/Methods.html#addFilter'>addFilter</a></h3>
<div class='method'>
<p>you can also attach filters to the receiver for real-time changing operations. In this case the receiver will create a cache before each rendering to maintain his previous state, and allowing you to use filters without applying them in place. The cache is managed directly by the receiver. you can add several filters to the receiver, the first filter in the array is the first applied in the rendering chain.
<p>see <a href="./../Classes/SCImageFilter.html">SCImageFilter</a> for an example on how to use <strong>addFilter</strong>.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>filter<td class='argumentdesc'>
<p>a SCImageFilter to apply before rendering of the image</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-removeFilter' href='./../Overviews/Methods.html#removeFilter'>removeFilter</a></h3>
<div class='method'>
<p>see <a href="./../Classes/SCImageFilter.html">SCImageFilter</a> for an example on how to use <strong>removeFilter</strong>.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>filter<td class='argumentdesc'>
<p>the SCImageFilter to remove from the rendering chain.</table></div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-flatten' href='./../Overviews/Methods.html#flatten'>flatten</a></h3>
<div class='method'>
<p>if <a href="#-filters">-filters</a> is not zero sized, this method will apply all those filters in place. if the image is accelerated this method force a bitmap representation of the receiver.</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-invert' href='./../Overviews/Methods.html#invert'>invert</a></h3>
<div class='method'>
<p>invert the receiver<pre class='code prettyprint lang-sc'>(
i = SCImage.new("/Library/Desktop Pictures/Ripples Blue.jpg");
i.invert;
i.plot(freeOnClose:true);
)</pre>
</div><h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-crop' href='./../Overviews/Methods.html#crop'>crop</a></h3>
<div class='method'>
<p>crop the receiver<pre class='code prettyprint lang-sc'>(
i = SCImage.new("/Library/Desktop Pictures/Ripples Blue.jpg");
i.crop( Rect(10,10,120,100) );
i.plot(freeOnClose:true);
)</pre>
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>aRect<td class='argumentdesc'>
<p>the cropping region</table></div><h3><a class='anchor' name='Instance%20Methods%20/%20Attributes%20for%20SCImageKernel%20support'>Instance Methods / Attributes for SCImageKernel support</a></h3>

<p>see <a href="./../Classes/SCImageKernel.html">SCImageKernel</a> for examples and more info.<h3 class='method-code'><span class='method-prefix'>.</span><a class='method-name' name='-applyKernel' href='./../Overviews/Methods.html#applyKernel'>applyKernel</a></h3>
<div class='method'>
<p>apply a Kernel in place. the receiver is modified after this call.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>kernel<td class='argumentdesc'>
<p>a <a href="./../Classes/SCImageKernel.html">SCImageKernel</a></table></div><h3><a class='anchor' name='Inherited%20instance%20methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>
<h3><a class='anchor' name='Views%20addition'>Views addition</a></h3>

<p>you can now use a SCImage as a valid view background. 16 drawing modes are defined to behave differently.<dl>
<dt>tileMode values:<dd><table>
<tr><td>1<td>fixed to left, fixed to top<tr><td>2<td>horizontally tile, fixed to top<tr><td>3<td>fixed to right, fixed to top<tr><td>4<td>fixed to left, vertically tile<tr><td>5<td>horizontally tile, vertically tile<tr><td>6<td>fixed to right, vertically tile<tr><td>7<td>fixed to left, fixed to bottom<tr><td>8<td>horizontally tile, fixed to bottom<tr><td>9<td>fixed to right, fixed to bottom<tr><td>10<td>fit<tr><td>11<td>center, center (scale)<tr><td>12<td>center , fixed to top<tr><td>13<td>center , fixed to bottom<tr><td>14<td>fixed to left, center<tr><td>15<td>fixed to right, center<tr><td>16<td>center, center (no scale)</table>
<dt>SCView:backgroundImage_<dd><strong>image</strong> - the SCImage to use
<p><strong>tileMode</strong> - the mode to use. by default fixed to left, fixed to top
<p><strong>alpha</strong> - opacity 0 &lt; x &lt; 1
<p><strong>fromRect</strong> - the portion of the image to use. by default use the full image.</dl>

<p><pre class='code prettyprint lang-sc'>(
    b = 1.0;
    a = SCImage.new(SCDoc.helpSourceDir +/+ "images/vduck2.jpg");
    r = Rect(20,3,40,40);
    w = SCWindow.new("SCImage background" /*, textured:false*/ );
    w.view.background_(Color.gray);
    w.view.backgroundImage_(a, 5, b, r);
    w.front;
)

// monte carlo :) exec every line to test
// r = nil; // uncomment for full image
w.view.backgroundImage_(a, 1, b, r);
w.view.backgroundImage_(a, 2, b, r);
w.view.backgroundImage_(a, 3, b, r);
w.view.backgroundImage_(a, 4, b, r);
w.view.backgroundImage_(a, 5, b, r);
w.view.backgroundImage_(a, 6, b, r);
w.view.backgroundImage_(a, 7, b, r);
w.view.backgroundImage_(a, 8, b, r);
w.view.backgroundImage_(a, 9, b, r);
w.view.backgroundImage_(a, 10, b, r);
w.view.backgroundImage_(a, 11, b, r); // find best ratio - move to see
w.view.backgroundImage_(a, 12, b, r);
w.view.backgroundImage_(a, 13, b, r);
w.view.backgroundImage_(a, 14, b, r);
w.view.backgroundImage_(a, 15, b, r);
w.view.backgroundImage_(a, 16, b, r);

// this is safe even if window is still open because Background object holds the SCImage
a.free;

w.close;

(
    a = SCImage.new("/Library/Desktop Pictures/Ripples Blue.jpg");
    w = SCWindow.new("SCImage background");
    l = SC2DSlider.new(w, Rect(10,10,200,200))
        .backgroundImage_( a, 5, 1, Rect(0,0,10,10) );
    w.front;
    a.free; // safe
)

(
    var bounds = Rect(10,10,150,18);
    a = SCImage.new("/Library/Desktop Pictures/Ripples Blue.jpg");
    w = SCWindow.new("SCImage background");
    l = SCSlider.new(w, bounds)
        .backgroundImage_(a);
    w.front;
    a.free; // safe
)</pre>

<p><div class='doclink'>helpfile source: <a href='file:///private/var/folders/qf/zrk81q7s6ygdbbgwm1_h5gc80000gn/T/AppTranslocation/8BAA739F-B195-446C-A6B4-C103296EBF70/d/SuperCollider.app/Contents/Resources/HelpSource/Classes/SCImage.schelp'>/private/var/folders/qf/zrk81q7s6ygdbbgwm1_h5gc80000gn/T/AppTranslocation/8BAA739F-B195-446C-A6B4-C103296EBF70/d/SuperCollider.app/Contents/Resources/HelpSource/Classes/SCImage.schelp</a><br>link::Classes/SCImage::<br></div></div></body></html>