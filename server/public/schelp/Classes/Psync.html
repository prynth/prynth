<html><head><title>Psync</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES</div>
<div id='categories'><a href='./../Browse.html#Streams-Patterns-Events>Patterns>Repetition'>Streams-Patterns-Events>Patterns>Repetition</a></div>
<h1>Psync</h1>
<div id='summary'>synchronise and limit pattern duration</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /usr/local/share/SuperCollider/SCClassLibrary/Common/Streams/<a href='file:///usr/local/share/SuperCollider/SCClassLibrary/Common/Streams/FilterPatterns.sc'>FilterPatterns.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/FilterPattern.html">FilterPattern</a> : <a href="../Classes/Pattern.html">Pattern</a> : <a href="../Classes/AbstractFunction.html">AbstractFunction</a> : <a href="../Classes/Object.html">Object</a></div>
<div id='related'>See also: <a href="./../Classes/Pfindur.html">Pfindur</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
<li class='toc2'><a href='#Undocumented instance methods'>Undocumented instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-embedInStream'>embedInStream</a> </li>
<li class='toc3'><a href='#-maxdur'>maxdur</a> </li>
<li class='toc3'><a href='#-quant'>quant</a> </li>
<li class='toc3'><a href='#-tolerance'>tolerance</a> </li>
</ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>Psync behaves somewhat like <a href="./../Classes/Pfindur.html">Pfindur</a> -- it has a <code>maxdur</code> argument that limits the total duration of the event stream.
<p>The difference is in what happens if the event pattern stops on its own before <code>maxdur</code> is reached. If the total duration of the event pattern is shorter than the given maximum duration:<ul>
<li>Pfindur simply ends: no further time manipulation.<li>Psync inserts a rest to round the total duration up to the nearest multiple of the given <code>quant</code>.</ul>
<table>
<tr><td><strong>Pbind's natural duration</strong><td><code class='code prettyprint lang-sc'>Pfindur(16, Pbind(....))</code> <strong>behavior</strong><td><code class='code prettyprint lang-sc'>Psync(Pbind(....), 4, 16)</code> <strong>behavior</strong><tr><td>6 beats<td>Pfindur plays only 6 beats<td>Psync rounds up to 8 beats (adds a two-beat rest)<tr><td>18 beats<td>Pfindur cuts off after 16 beats<td>Psync cuts off after 16 beats</table>

<p><code>maxdur</code> may be omitted. If the Pbind stops by itself, the rest will be inserted according to <code>quant</code>, but the total duration will be unlimited.<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>pattern</span>, <span class='argstr'>quant</span>, <span class='argstr'>maxdur</span>, <span class='argstr'>tolerance: 0.001</span>)</h3>
<div class='method'>
<p><h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>pattern<td class='argumentdesc'>
<p>a pattern that returns events.<tr><td class='argumentname'>quant<td class='argumentdesc'>
<p>rounding factor for total duration (effectively a "bar length")<tr><td class='argumentname'>maxdur<td class='argumentdesc'>
<p>maximum duration<tr><td class='argumentname'>tolerance<td class='argumentdesc'>
<p>difference threshhold that a pattern must exceed max to be ended.</table></div><h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h3><a class='anchor' name='Undocumented instance methods'>Undocumented instance methods</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-embedInStream' href='./../Overviews/Methods.html#embedInStream'>embedInStream</a> (<span class='argstr'>event</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-maxdur' href='./../Overviews/Methods.html#maxdur'>maxdur</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-maxdur' href='./../Overviews/Methods.html#maxdur'>maxdur</a> = value</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-quant' href='./../Overviews/Methods.html#quant'>quant</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-quant' href='./../Overviews/Methods.html#quant'>quant</a> = value</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-tolerance' href='./../Overviews/Methods.html#tolerance'>tolerance</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-tolerance' href='./../Overviews/Methods.html#tolerance'>tolerance</a> = value</h3>
<h2><a class='anchor' name='examples'>Examples</a></h2>
<pre class='code prettyprint lang-sc'>(
SynthDef(\help_sinegrain,
    { arg out=0, freq=440, sustain=0.05, pan;
        var env;
        env = EnvGen.kr(Env.perc(0.01, sustain, 0.3), doneAction:2);
        Out.ar(out, Pan2.ar(SinOsc.ar(freq, 0, env), pan))
    }).add;
)

(
// a fixed duration pattern:

f = Pbind(
    \dur, 0.5,
    \degree, Pn(4,1),
    \instrument, \help_sinegrain
);

// this pattern has indetermined length:
a = Prand([
    Pbind(
        \dur, Pseq([0.02, 0.002, 0.1, 0.1],2),
        \degree, Pseq([9, 7, 5],inf),
        \instrument, \help_sinegrain
    ),
    Pbind(
        \dur, Pseq([1, 0.35],2),
        \degree, Pseq([0, [2b,5b]],inf),
        \instrument, \help_sinegrain
    ),
    Pbind(
        \dur, Pseq([0.15, 0.25, 1.3],2),
        \degree, Pseq([2b,4,5b],inf),
        \instrument, \help_sinegrain
    )
]);
)

Pseq([f, f, a, a], inf).play; // play a sequence


// Psync allows to limit the duration of a stream relative to a beat grid

b = Psync(a, 1, 1); // create a sequence of exactly 1 beat elements
Pseq([f, f, b, b], inf).play;


b = Psync(a, 1, 2); // create a sequence of elements of either 1 or 2 beats length
Pseq([f, f, b, b], inf).play;

(
b = Psync(a, 2);    // create a sequence of elements with a minimum of 2 beats,
            // but with undetermined upper limit
Ppar([
    Pseq([f, f, b, b], inf), // sequence
    Pbind(\instrument, \help_sinegrain, \freq, 1000, \sustain, 0.01, \dur, 2) // metronome
]).play;
)</pre>

<p><div class='doclink'>source: <a href='file:///usr/local/share/SuperCollider/HelpSource/Classes/Psync.schelp'>/usr/local/share/SuperCollider/HelpSource/Classes/Psync.schelp</a><br>link::Classes/Psync::<br>sc version: 3.8dev</div></div></body></html>