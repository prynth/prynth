<html><head><title>PatternProxy</title>
<link rel='stylesheet' href='./../scdoc.css' type='text/css' />
<link rel='stylesheet' href='./../frontend.css' type='text/css' />
<link rel='stylesheet' href='./../custom.css' type='text/css' />
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
<script src='./../scdoc.js' type='text/javascript'></script>
<script src='./../docmap.js' type='text/javascript'></script>
<script src='./../prettify.js' type='text/javascript'></script>
<script src='./../lang-sc.js' type='text/javascript'></script>
<script type='text/javascript'>var helpRoot='./..';</script>
</head>
<ul id='menubar'></ul>
<body onload='fixTOC();prettyPrint()'>
<div class='contents'>
<div class='header'>
<div id='label'>SuperCollider CLASSES</div>
<div id='categories'><a href='./../Browse.html#Libraries>JITLib>Patterns'>Libraries>JITLib>Patterns</a>, <a href='./../Browse.html#Live Coding'>Live Coding</a></div>
<h1>PatternProxy</h1>
<div id='summary'>stream reference</div>
</div>
<div class='subheader'>
<div id='filename'>Source: /usr/local/share/SuperCollider/SCClassLibrary/JITLib/Patterns/<a href='file:///usr/local/share/SuperCollider/SCClassLibrary/JITLib/Patterns/Pdef.sc'>Pdef.sc</a></div><div id='superclasses'>Inherits from: <a href="../Classes/Pattern.html">Pattern</a> : <a href="../Classes/AbstractFunction.html">AbstractFunction</a> : <a href="../Classes/Object.html">Object</a></div>
<div id='subclasses'>Subclasses: <a href="../Classes/Pdefn.html">Pdefn</a>, <a href="../Classes/TaskProxy.html">TaskProxy</a></div>
<div id='related'>See also: <a href="./../Classes/Pdefn.html">Pdefn</a></div>
</div>
<div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*new'>new</a> </li>
<li class='toc3'><a href='#*default'>default</a> </li>
<li class='toc3'><a href='#*defaultQuant'>defaultQuant</a> </li>
<li class='toc3'><a href='#*defaultValue'>defaultValue</a> </li>
<li class='toc2'><a href='#Inherited class methods'>Inherited class methods</a></li>
</ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-asStream'>asStream</a> </li>
<li class='toc3'><a href='#-embedInStream'>embedInStream</a> </li>
<li class='toc3'><a href='#-source'>source</a> </li>
<li class='toc3'><a href='#-clear'>clear</a> </li>
<li class='toc3'><a href='#-quant'>quant</a> </li>
<li class='toc3'><a href='#-condition'>condition</a> </li>
<li class='toc3'><a href='#-embedInStream'>embedInStream</a> </li>
<li class='toc2'><a href='#Methods implemented for subclasses'>Methods implemented for subclasses</a></li>
<ul class='toc'><li class='toc3'><a href='#-envir'>envir</a> </li>
<li class='toc3'><a href='#-set'>set</a> </li>
<li class='toc3'><a href='#-endless'>endless</a> </li>
</ul><li class='toc2'><a href='#Inherited instance methods'>Inherited instance methods</a></li>
<li class='toc2'><a href='#Undocumented instance methods'>Undocumented instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-asCode'>asCode</a> </li>
<li class='toc3'><a href='#-buildForProxy'>buildForProxy</a> </li>
<li class='toc3'><a href='#-clock'>clock</a> </li>
<li class='toc3'><a href='#-constrainStream'>constrainStream</a> </li>
<li class='toc3'><a href='#-convertFunction'>convertFunction</a> </li>
<li class='toc3'><a href='#-copy'>copy</a> </li>
<li class='toc3'><a href='#-copyState'>copyState</a> </li>
<li class='toc3'><a href='#-count'>count</a> </li>
<li class='toc3'><a href='#-defaultEvent'>defaultEvent</a> </li>
<li class='toc3'><a href='#-embed'>embed</a> </li>
<li class='toc3'><a href='#-get'>get</a> </li>
<li class='toc3'><a href='#-isEventPattern'>isEventPattern</a> </li>
<li class='toc3'><a href='#-pattern'>pattern</a> </li>
<li class='toc3'><a href='#-phase'>phase</a> </li>
<li class='toc3'><a href='#-place'>place</a> </li>
<li class='toc3'><a href='#-quantBeat'>quantBeat</a> </li>
<li class='toc3'><a href='#-receiveEvent'>receiveEvent</a> </li>
<li class='toc3'><a href='#-remove'>remove</a> </li>
<li class='toc3'><a href='#-repositoryArgs'>repositoryArgs</a> </li>
<li class='toc3'><a href='#-reset'>reset</a> </li>
<li class='toc3'><a href='#-sched'>sched</a> </li>
<li class='toc3'><a href='#-setSource'>setSource</a> </li>
<li class='toc3'><a href='#-softSet'>softSet</a> </li>
<li class='toc3'><a href='#-timingOffset'>timingOffset</a> </li>
<li class='toc3'><a href='#-unset'>unset</a> </li>
</ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>

<p>Keeps a reference to a stream that can be replaced while playing. Multiple streams are thus handled without creating dependencies.<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*new' href='./../Overviews/Methods.html#new'>new</a> (<span class='argstr'>source</span>)</h3>
<div class='method'>
<p>create a new instance with a pattern (the source). the pattern should be a <em>value pattern</em> (see <a href="./../Classes/Pdefn.html">Pdefn</a>).
<p>for event pattern proxy, see: <a href="./../Classes/EventPatternProxy.html">EventPatternProxy</a>. instead of a pattern, a <strong>function</strong> can be passed in, creating a routine.</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*default' href='./../Overviews/Methods.html#default'>default</a> </h3>
<div class='method'>
<p>a default source, if none is given. the default is 1.0 (it is not 0.0 in order to make it safe for durations)</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*defaultQuant' href='./../Overviews/Methods.html#defaultQuant'>defaultQuant</a></h3>
<h3 class='cmethodname'><span class='methprefix'>*</span><a name='*defaultQuant' href='./../Overviews/Methods.html#defaultQuant'>defaultQuant</a> = value</h3>
<div class='method'>
<p>set the default quantization value for the class. (default: nil)</div><h3 class='cmethodname'><span class='methprefix'>*</span><a name='*defaultValue' href='./../Overviews/Methods.html#defaultValue'>defaultValue</a> </h3>
<div class='method'>
<p>a default retrurn value, if no source is given. the default is 1.0 (it is not 0.0 in order to make it safe for durations). This is used in <a href="./../-endless">-endless</a>.</div><h3><a class='anchor' name='Inherited class methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-asStream' href='./../Overviews/Methods.html#asStream'>asStream</a> </h3>
<div class='method'>
<p>Return a <a href="./../Classes/Stream.html">Stream</a> from this pattern. One pattern proxy can be used to produce any number of independent streams.<pre class='code prettyprint lang-sc'>a = PatternProxy.new;
a.source = Pgeom(1, Pwhite(1.01, 1.2), inf);
b = a.asStream; c = a.asStream;

b.next;
b.next;
b.next;

c.next; // c is independent from b
c.next;

a.source = Pgeom([1, 2, 3], Pwhite(1.01, 1.2), inf); // replace the source

b.next;
c.next;</pre>
</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-embedInStream' href='./../Overviews/Methods.html#embedInStream'>embedInStream</a> (<span class='argstr'>inval</span>, <span class='argstr'>embed: true</span>, <span class='argstr'>default</span>)</h3>
<div class='method'>
<p>Given a <a href="./../Classes/Stream.html">Stream</a> like e.g. <a href="./../Classes/Routine.html">Routine</a>, yield all values from the pattern in the proxy before continuing. One pattern proxy can be used to produce values for any number of independent streams.<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'>inval<td class='argumentdesc'>
<p>The inval is passed into all substreams and can be used to control how they behave from the outside.<tr><td class='argumentname'>embed<td class='argumentdesc'>
<p>See <a href="./../Classes/Object.html#-streamArg">Object: -streamArg</a> for explanation.<tr><td class='argumentname'>default<td class='argumentdesc'>
<p>Replacement for <code class='code prettyprint lang-sc'>nil</code> outputs of the source pattern. One use case is <a href="#-endless">-endless</a>.<pre class='code prettyprint lang-sc'>a = PatternProxy.new;
a.source = Pgeom(1, Pwhite(1.01, 1.2), 4);
r = Routine { loop { 2.yield; 3.yield; a.embedInStream }; };
r.nextN(12); // the next 12 values from r
a.source = Pgeom([1, 2, 3], Pwhite(1.01, 1.2), inf); // replace the source
r.nextN(12); // the next 12 values from r</pre>
</table></div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-source' href='./../Overviews/Methods.html#source'>source</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-source' href='./../Overviews/Methods.html#source'>source</a> = <span class='argstr'>obj</span></h3>
<div class='method'>
<p>set the source. If a quantization is given, schedule this change to the next beat</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-clear' href='./../Overviews/Methods.html#clear'>clear</a> </h3>
<div class='method'>
<p>set the source to nil</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-quant' href='./../Overviews/Methods.html#quant'>quant</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-quant' href='./../Overviews/Methods.html#quant'>quant</a> = <span class='argstr'>val</span></h3>
<div class='method'>
<p>set or get the quantization value</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-condition' href='./../Overviews/Methods.html#condition'>condition</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-condition' href='./../Overviews/Methods.html#condition'>condition</a> = value</h3>
<div class='method'>
<p>provide a condition under which the pattern is switched when a new one is inserted. the stream value and a count is passed into the function. the methods <strong>count_(n)</strong> simply counts up to n and switches the pattern then</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-embedInStream' href='./../Overviews/Methods.html#embedInStream'>embedInStream</a> (<span class='argstr'>inval</span>, <span class='argstr'>embed: true</span>, <span class='argstr'>default</span>)</h3>
<div class='method'>
<p>just like any pattern, embeds itself in stream</div><h3><a class='anchor' name='Methods implemented for subclasses'>Methods implemented for subclasses</a></h3>

<p>PatternProxy implements some methods for the benefits of its subclasses <a href="./../Classes/Pdefn.html">Pdefn</a> / <a href="./../Classes/Pdef.html">Pdef</a> / <a href="./../Classes/Tdef.html">Tdef</a> which are not useful for <a href="./../Classes/PatternProxy.html">PatternProxy</a> and <a href="./../Classes/TaskProxy.html">TaskProxy</a>.<h3 class='imethodname'><span class='methprefix'>-</span><a name='-envir' href='./../Overviews/Methods.html#envir'>envir</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-envir' href='./../Overviews/Methods.html#envir'>envir</a> = value</h3>
<div class='method'>
<p>provide a default environment for the proxy. If given, it is used as an environment for the routine function. When set for the first time, the routine pattern is rebuilt.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-set' href='./../Overviews/Methods.html#set'>set</a> ( <span class='argstr'>... args</span>)</h3>
<div class='method'>
<p>set arguments in the environment. If there is none, it is created and the pattern is rebuilt.</div><h3 class='imethodname'><span class='methprefix'>-</span><a name='-endless' href='./../Overviews/Methods.html#endless'>endless</a> (<span class='argstr'>default</span>)</h3>
<div class='method'>
<p>returns a Prout that plays the proxy endlessly, replacing <strong>nil</strong> with a <strong>default</strong> value (1). This allows to create streams that idle on until a new pattern is inserted.</div><h3><a class='anchor' name='Inherited instance methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h3><a class='anchor' name='Undocumented instance methods'>Undocumented instance methods</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-asCode' href='./../Overviews/Methods.html#asCode'>asCode</a> </h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/JITLib/Patterns/extPostAsCode.sc'>/usr/local/share/SuperCollider/SCClassLibrary/JITLib/Patterns/extPostAsCode.sc</a></div>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-buildForProxy' href='./../Overviews/Methods.html#buildForProxy'>buildForProxy</a> </h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/JITLib/ProxySpace/wrapForNodeProxy.sc'>/usr/local/share/SuperCollider/SCClassLibrary/JITLib/ProxySpace/wrapForNodeProxy.sc</a></div>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-clock' href='./../Overviews/Methods.html#clock'>clock</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-clock' href='./../Overviews/Methods.html#clock'>clock</a> = value</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-constrainStream' href='./../Overviews/Methods.html#constrainStream'>constrainStream</a> (<span class='argstr'>stream</span>, <span class='argstr'>newStream</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-convertFunction' href='./../Overviews/Methods.html#convertFunction'>convertFunction</a> (<span class='argstr'>func</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-copy' href='./../Overviews/Methods.html#copy'>copy</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-copyState' href='./../Overviews/Methods.html#copyState'>copyState</a> (<span class='argstr'>proxy</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-count' href='./../Overviews/Methods.html#count'>count</a> (<span class='argstr'>n: 1</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-defaultEvent' href='./../Overviews/Methods.html#defaultEvent'>defaultEvent</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-embed' href='./../Overviews/Methods.html#embed'>embed</a> (<span class='argstr'>val</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-get' href='./../Overviews/Methods.html#get'>get</a> (<span class='argstr'>key</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-isEventPattern' href='./../Overviews/Methods.html#isEventPattern'>isEventPattern</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-pattern' href='./../Overviews/Methods.html#pattern'>pattern</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-pattern' href='./../Overviews/Methods.html#pattern'>pattern</a> = <span class='argstr'>pat</span></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-phase' href='./../Overviews/Methods.html#phase'>phase</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-phase' href='./../Overviews/Methods.html#phase'>phase</a> = <span class='argstr'>val</span></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-place' href='./../Overviews/Methods.html#place'>place</a> ( <span class='argstr'>... args</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-quantBeat' href='./../Overviews/Methods.html#quantBeat'>quantBeat</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-quantBeat' href='./../Overviews/Methods.html#quantBeat'>quantBeat</a> = <span class='argstr'>val</span></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-receiveEvent' href='./../Overviews/Methods.html#receiveEvent'>receiveEvent</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-remove' href='./../Overviews/Methods.html#remove'>remove</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-repositoryArgs' href='./../Overviews/Methods.html#repositoryArgs'>repositoryArgs</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-reset' href='./../Overviews/Methods.html#reset'>reset</a> </h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-sched' href='./../Overviews/Methods.html#sched'>sched</a> (<span class='argstr'>func</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-setSource' href='./../Overviews/Methods.html#setSource'>setSource</a> (<span class='argstr'>obj</span>)</h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-softSet' href='./../Overviews/Methods.html#softSet'>softSet</a> (<span class='argstr'>param</span>, <span class='argstr'>val</span>, <span class='argstr'>within: 0.025</span>, <span class='argstr'>mapped: true</span>, <span class='argstr'>lastVal</span>, <span class='argstr'>spec</span>)</h3>
<div class='extmethod'>From extension in <a href='file:///usr/local/share/SuperCollider/SCClassLibrary/JITLib/GUI/extSoftSet.sc'>/usr/local/share/SuperCollider/SCClassLibrary/JITLib/GUI/extSoftSet.sc</a></div>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-timingOffset' href='./../Overviews/Methods.html#timingOffset'>timingOffset</a></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-timingOffset' href='./../Overviews/Methods.html#timingOffset'>timingOffset</a> = <span class='argstr'>val</span></h3>
<h3 class='imethodname'><span class='methprefix'>-</span><a name='-unset' href='./../Overviews/Methods.html#unset'>unset</a> ( <span class='argstr'>... args</span>)</h3>
<h2><a class='anchor' name='examples'>Examples</a></h2>
<pre class='code prettyprint lang-sc'>a = PatternProxy(Pseq([1, 2, 3], inf));

x = Pseq([0, 0, a], inf).asStream;

t = Task({ loop({ x.next.postln; 0.3.wait }) }).play;


a.source = Pseq([55, 66, 77], inf);
a.source = Pseq([55, 66, 77], 1);

t.stop;</pre>
<pre class='code prettyprint lang-sc'>// PatternProxy, like Pdefn can be accessed in multiple streams

(
SynthDef("Pdefhelp", { arg out, freq, sustain=1, amp=1, pan;
    var env, u=1;
    env = EnvGen.kr(Env.perc(0.03, sustain), 1, doneAction:2);
    5.do { var d; d = exprand(0.01, 1); u = SinOsc.ar(d * 300, u, rrand(0.1,1.2) * d, 1) };
    Out.ar(out, Pan2.ar(SinOsc.ar(u + 1 * freq, 0, amp * env), pan));

}).add;
s.boot;
)

(
x = PatternProxy.new;
x.source = Pseq([0, 3, 2], inf);

Pset(\instrument, \Pdefhelp,
    Ppar([
    Pbind(\degree, x),
    Pbind(\degree, x, \dur, 1/3)
])
).play;
)

x.source = Prand([0, 3, [1s, 4]], inf);

x.source = Pn(Pshuf([0, 3, 2, 7, 6], 2), inf);



// if quant is set, the update is done at the next beat or whatever is specified:

x.quant = 4;
x.source = Pn(Pseries(0, 1, 8), inf);

x.quant = nil; // reactivate immediacy

(
x.source = Prout {
    loop {
    4.do { |i|
        #[2, 3, 4].choose.yield;
        #[5, 0, 11].choose.yield;
        #[6, 3, 4].choose.do { |j| (i % j).yield };
    }
    }
}
)</pre>

<p><div class='doclink'>source: <a href='file:///usr/local/share/SuperCollider/HelpSource/Classes/PatternProxy.schelp'>/usr/local/share/SuperCollider/HelpSource/Classes/PatternProxy.schelp</a><br>link::Classes/PatternProxy::<br>sc version: 3.8dev</div></div></body></html>